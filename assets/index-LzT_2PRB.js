var PN=Object.defineProperty;var tE=a=>{throw TypeError(a)};var IN=(a,t,e)=>t in a?PN(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var lt=(a,t,e)=>IN(a,typeof t!="symbol"?t+"":t,e),Zv=(a,t,e)=>t.has(a)||tE("Cannot "+e);var c=(a,t,e)=>(Zv(a,t,"read from private field"),e?e.call(a):t.get(a)),k=(a,t,e)=>t.has(a)?tE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),S=(a,t,e,n)=>(Zv(a,t,"write to private field"),n?n.call(a,e):t.set(a,e),e),L=(a,t,e)=>(Zv(a,t,"access private method"),e);var wi=(a,t,e,n)=>({set _(s){S(a,t,s,e)},get _(){return c(a,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fg(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Jv={exports:{}},vf={},t1={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function ON(){if(eE)return ee;eE=1;var a=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function m(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function x(D,U,st){this.props=D,this.context=U,this.refs=E,this.updater=st||b}x.prototype.isReactComponent={},x.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},x.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function N(){}N.prototype=x.prototype;function I(D,U,st){this.props=D,this.context=U,this.refs=E,this.updater=st||b}var B=I.prototype=new N;B.constructor=I,_(B,x.prototype),B.isPureReactComponent=!0;var j=Array.isArray,T=Object.prototype.hasOwnProperty,P={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function W(D,U,st){var gt,at={},vt=null,yt=null;if(U!=null)for(gt in U.ref!==void 0&&(yt=U.ref),U.key!==void 0&&(vt=""+U.key),U)T.call(U,gt)&&!M.hasOwnProperty(gt)&&(at[gt]=U[gt]);var bt=arguments.length-2;if(bt===1)at.children=st;else if(1<bt){for(var Nt=Array(bt),Ht=0;Ht<bt;Ht++)Nt[Ht]=arguments[Ht+2];at.children=Nt}if(D&&D.defaultProps)for(gt in bt=D.defaultProps,bt)at[gt]===void 0&&(at[gt]=bt[gt]);return{$$typeof:a,type:D,key:vt,ref:yt,props:at,_owner:P.current}}function nt(D,U){return{$$typeof:a,type:D.type,key:U,ref:D.ref,props:D.props,_owner:D._owner}}function ht(D){return typeof D=="object"&&D!==null&&D.$$typeof===a}function O(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(st){return U[st]})}var et=/\/+/g;function q(D,U){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):U.toString(36)}function X(D,U,st,gt,at){var vt=typeof D;(vt==="undefined"||vt==="boolean")&&(D=null);var yt=!1;if(D===null)yt=!0;else switch(vt){case"string":case"number":yt=!0;break;case"object":switch(D.$$typeof){case a:case t:yt=!0}}if(yt)return yt=D,at=at(yt),D=gt===""?"."+q(yt,0):gt,j(at)?(st="",D!=null&&(st=D.replace(et,"$&/")+"/"),X(at,U,st,"",function(Ht){return Ht})):at!=null&&(ht(at)&&(at=nt(at,st+(!at.key||yt&&yt.key===at.key?"":(""+at.key).replace(et,"$&/")+"/")+D)),U.push(at)),1;if(yt=0,gt=gt===""?".":gt+":",j(D))for(var bt=0;bt<D.length;bt++){vt=D[bt];var Nt=gt+q(vt,bt);yt+=X(vt,U,st,Nt,at)}else if(Nt=m(D),typeof Nt=="function")for(D=Nt.call(D),bt=0;!(vt=D.next()).done;)vt=vt.value,Nt=gt+q(vt,bt++),yt+=X(vt,U,st,Nt,at);else if(vt==="object")throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return yt}function rt(D,U,st){if(D==null)return D;var gt=[],at=0;return X(D,gt,"","",function(vt){return U.call(st,vt,at++)}),gt}function V(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(st){(D._status===0||D._status===-1)&&(D._status=1,D._result=st)},function(st){(D._status===0||D._status===-1)&&(D._status=2,D._result=st)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var K={current:null},Z={transition:null},ot={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:Z,ReactCurrentOwner:P};function J(){throw Error("act(...) is not supported in production builds of React.")}return ee.Children={map:rt,forEach:function(D,U,st){rt(D,function(){U.apply(this,arguments)},st)},count:function(D){var U=0;return rt(D,function(){U++}),U},toArray:function(D){return rt(D,function(U){return U})||[]},only:function(D){if(!ht(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ee.Component=x,ee.Fragment=e,ee.Profiler=s,ee.PureComponent=I,ee.StrictMode=n,ee.Suspense=d,ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ot,ee.act=J,ee.cloneElement=function(D,U,st){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var gt=_({},D.props),at=D.key,vt=D.ref,yt=D._owner;if(U!=null){if(U.ref!==void 0&&(vt=U.ref,yt=P.current),U.key!==void 0&&(at=""+U.key),D.type&&D.type.defaultProps)var bt=D.type.defaultProps;for(Nt in U)T.call(U,Nt)&&!M.hasOwnProperty(Nt)&&(gt[Nt]=U[Nt]===void 0&&bt!==void 0?bt[Nt]:U[Nt])}var Nt=arguments.length-2;if(Nt===1)gt.children=st;else if(1<Nt){bt=Array(Nt);for(var Ht=0;Ht<Nt;Ht++)bt[Ht]=arguments[Ht+2];gt.children=bt}return{$$typeof:a,type:D.type,key:at,ref:vt,props:gt,_owner:yt}},ee.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:o,_context:D},D.Consumer=D},ee.createElement=W,ee.createFactory=function(D){var U=W.bind(null,D);return U.type=D,U},ee.createRef=function(){return{current:null}},ee.forwardRef=function(D){return{$$typeof:u,render:D}},ee.isValidElement=ht,ee.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:V}},ee.memo=function(D,U){return{$$typeof:f,type:D,compare:U===void 0?null:U}},ee.startTransition=function(D){var U=Z.transition;Z.transition={};try{D()}finally{Z.transition=U}},ee.unstable_act=J,ee.useCallback=function(D,U){return K.current.useCallback(D,U)},ee.useContext=function(D){return K.current.useContext(D)},ee.useDebugValue=function(){},ee.useDeferredValue=function(D){return K.current.useDeferredValue(D)},ee.useEffect=function(D,U){return K.current.useEffect(D,U)},ee.useId=function(){return K.current.useId()},ee.useImperativeHandle=function(D,U,st){return K.current.useImperativeHandle(D,U,st)},ee.useInsertionEffect=function(D,U){return K.current.useInsertionEffect(D,U)},ee.useLayoutEffect=function(D,U){return K.current.useLayoutEffect(D,U)},ee.useMemo=function(D,U){return K.current.useMemo(D,U)},ee.useReducer=function(D,U,st){return K.current.useReducer(D,U,st)},ee.useRef=function(D){return K.current.useRef(D)},ee.useState=function(D){return K.current.useState(D)},ee.useSyncExternalStore=function(D,U,st){return K.current.useSyncExternalStore(D,U,st)},ee.useTransition=function(){return K.current.useTransition()},ee.version="18.3.1",ee}var nE;function Bg(){return nE||(nE=1,t1.exports=ON()),t1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function MN(){if(iE)return vf;iE=1;var a=Bg(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var g,y={},m=null,b=null;f!==void 0&&(m=""+f),d.key!==void 0&&(m=""+d.key),d.ref!==void 0&&(b=d.ref);for(g in d)n.call(d,g)&&!o.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:t,type:u,key:m,ref:b,props:y,_owner:s.current}}return vf.Fragment=e,vf.jsx=l,vf.jsxs=l,vf}var sE;function DN(){return sE||(sE=1,Jv.exports=MN()),Jv.exports}var ne=DN(),xn=Bg();const FN=Fg(xn);var jm={},e1={exports:{}},Ui={},n1={exports:{}},i1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function BN(){return rE||(rE=1,function(a){function t(Z,ot){var J=Z.length;Z.push(ot);t:for(;0<J;){var D=J-1>>>1,U=Z[D];if(0<s(U,ot))Z[D]=ot,Z[J]=U,J=D;else break t}}function e(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var ot=Z[0],J=Z.pop();if(J!==ot){Z[0]=J;t:for(var D=0,U=Z.length,st=U>>>1;D<st;){var gt=2*(D+1)-1,at=Z[gt],vt=gt+1,yt=Z[vt];if(0>s(at,J))vt<U&&0>s(yt,at)?(Z[D]=yt,Z[vt]=J,D=vt):(Z[D]=at,Z[gt]=J,D=gt);else if(vt<U&&0>s(yt,J))Z[D]=yt,Z[vt]=J,D=vt;else break t}}return ot}function s(Z,ot){var J=Z.sortIndex-ot.sortIndex;return J!==0?J:Z.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();a.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,y=null,m=3,b=!1,_=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(Z){for(var ot=e(f);ot!==null;){if(ot.callback===null)n(f);else if(ot.startTime<=Z)n(f),ot.sortIndex=ot.expirationTime,t(d,ot);else break;ot=e(f)}}function j(Z){if(E=!1,B(Z),!_)if(e(d)!==null)_=!0,V(T);else{var ot=e(f);ot!==null&&K(j,ot.startTime-Z)}}function T(Z,ot){_=!1,E&&(E=!1,N(W),W=-1),b=!0;var J=m;try{for(B(ot),y=e(d);y!==null&&(!(y.expirationTime>ot)||Z&&!O());){var D=y.callback;if(typeof D=="function"){y.callback=null,m=y.priorityLevel;var U=D(y.expirationTime<=ot);ot=a.unstable_now(),typeof U=="function"?y.callback=U:y===e(d)&&n(d),B(ot)}else n(d);y=e(d)}if(y!==null)var st=!0;else{var gt=e(f);gt!==null&&K(j,gt.startTime-ot),st=!1}return st}finally{y=null,m=J,b=!1}}var P=!1,M=null,W=-1,nt=5,ht=-1;function O(){return!(a.unstable_now()-ht<nt)}function et(){if(M!==null){var Z=a.unstable_now();ht=Z;var ot=!0;try{ot=M(!0,Z)}finally{ot?q():(P=!1,M=null)}}else P=!1}var q;if(typeof I=="function")q=function(){I(et)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,rt=X.port2;X.port1.onmessage=et,q=function(){rt.postMessage(null)}}else q=function(){x(et,0)};function V(Z){M=Z,P||(P=!0,q())}function K(Z,ot){W=x(function(){Z(a.unstable_now())},ot)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Z){Z.callback=null},a.unstable_continueExecution=function(){_||b||(_=!0,V(T))},a.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<Z?Math.floor(1e3/Z):5},a.unstable_getCurrentPriorityLevel=function(){return m},a.unstable_getFirstCallbackNode=function(){return e(d)},a.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var ot=3;break;default:ot=m}var J=m;m=ot;try{return Z()}finally{m=J}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Z,ot){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=m;m=Z;try{return ot()}finally{m=J}},a.unstable_scheduleCallback=function(Z,ot,J){var D=a.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?D+J:D):J=D,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=J+U,Z={id:g++,callback:ot,priorityLevel:Z,startTime:J,expirationTime:U,sortIndex:-1},J>D?(Z.sortIndex=J,t(f,Z),e(d)===null&&Z===e(f)&&(E?(N(W),W=-1):E=!0,K(j,J-D))):(Z.sortIndex=U,t(d,Z),_||b||(_=!0,V(T))),Z},a.unstable_shouldYield=O,a.unstable_wrapCallback=function(Z){var ot=m;return function(){var J=m;m=ot;try{return Z.apply(this,arguments)}finally{m=J}}}}(i1)),i1}var oE;function jN(){return oE||(oE=1,n1.exports=BN()),n1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function qN(){if(aE)return Ui;aE=1;var a=Bg(),t=jN();function e(i){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,r){l(i,r),l(i+"Capture",r)}function l(i,r){for(s[i]=r,i=0;i<r.length;i++)n.add(r[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function m(i){return d.call(y,i)?!0:d.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function b(i,r,h,p){if(h!==null&&h.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function _(i,r,h,p){if(r===null||typeof r>"u"||b(i,r,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(i,r,h,p,v,w,C){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=i,this.type=r,this.sanitizeURL=w,this.removeEmptyString=C}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var r=i[0];x[r]=new E(r,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var r=i.replace(N,I);x[r]=new E(r,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var r=i.replace(N,I);x[r]=new E(r,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var r=i.replace(N,I);x[r]=new E(r,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,r,h,p){var v=x.hasOwnProperty(r)?x[r]:null;(v!==null?v.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(_(r,h,v,p)&&(h=null),p||v===null?m(r)&&(h===null?i.removeAttribute(r):i.setAttribute(r,""+h)):v.mustUseProperty?i[v.propertyName]=h===null?v.type===3?!1:"":h:(r=v.attributeName,p=v.attributeNamespace,h===null?i.removeAttribute(r):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,p?i.setAttributeNS(p,r,h):i.setAttribute(r,h))))}var j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),ht=Symbol.for("react.provider"),O=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ot(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var J=Object.assign,D;function U(i){if(D===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+i}var st=!1;function gt(i,r){if(!i||st)return"";st=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(tt){var p=tt}Reflect.construct(i,[],r)}else{try{r.call()}catch(tt){p=tt}i.call(r.prototype)}else{try{throw Error()}catch(tt){p=tt}i()}}catch(tt){if(tt&&p&&typeof tt.stack=="string"){for(var v=tt.stack.split(`
`),w=p.stack.split(`
`),C=v.length-1,F=w.length-1;1<=C&&0<=F&&v[C]!==w[F];)F--;for(;1<=C&&0<=F;C--,F--)if(v[C]!==w[F]){if(C!==1||F!==1)do if(C--,F--,0>F||v[C]!==w[F]){var z=`
`+v[C].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=C&&0<=F);break}}}finally{st=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?U(i):""}function at(i){switch(i.tag){case 5:return U(i.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return i=gt(i.type,!1),i;case 11:return i=gt(i.type.render,!1),i;case 1:return i=gt(i.type,!0),i;default:return""}}function vt(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case P:return"Portal";case nt:return"Profiler";case W:return"StrictMode";case q:return"Suspense";case X:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case ht:return(i._context.displayName||"Context")+".Provider";case et:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case rt:return r=i.displayName||null,r!==null?r:vt(i.type)||"Memo";case V:r=i._payload,i=i._init;try{return vt(i(r))}catch{}}return null}function yt(i){var r=i.type;switch(i.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=r.render,i=i.displayName||i.name||"",r.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vt(r);case 8:return r===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function bt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Nt(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ht(i){var r=Nt(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),p=""+i[r];if(!i.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return v.call(this)},set:function(C){p=""+C,w.call(this,C)}}),Object.defineProperty(i,r,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function te(i){i._valueTracker||(i._valueTracker=Ht(i))}function Jt(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var h=r.getValue(),p="";return i&&(p=Nt(i)?i.checked?"true":"false":i.value),i=p,i!==h?(r.setValue(i),!0):!1}function re(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function pe(i,r){var h=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function qe(i,r){var h=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;h=bt(r.value!=null?r.value:h),i._wrapperState={initialChecked:p,initialValue:h,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ss(i,r){r=r.checked,r!=null&&B(i,"checked",r,!1)}function ai(i,r){Ss(i,r);var h=bt(r.value),p=r.type;if(h!=null)p==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}r.hasOwnProperty("value")?Ts(i,r.type,h):r.hasOwnProperty("defaultValue")&&Ts(i,r.type,bt(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(i.defaultChecked=!!r.defaultChecked)}function ir(i,r,h){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+i._wrapperState.initialValue,h||r===i.value||(i.value=r),i.defaultValue=r}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function Ts(i,r,h){(r!=="number"||re(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var li=Array.isArray;function ui(i,r,h,p){if(i=i.options,r){r={};for(var v=0;v<h.length;v++)r["$"+h[v]]=!0;for(h=0;h<i.length;h++)v=r.hasOwnProperty("$"+i[h].value),i[h].selected!==v&&(i[h].selected=v),v&&p&&(i[h].defaultSelected=!0)}else{for(h=""+bt(h),r=null,v=0;v<i.length;v++){if(i[v].value===h){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}r!==null||i[v].disabled||(r=i[v])}r!==null&&(r.selected=!0)}}function Ur(i,r){if(r.dangerouslySetInnerHTML!=null)throw Error(e(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function sr(i,r){var h=r.value;if(h==null){if(h=r.children,r=r.defaultValue,h!=null){if(r!=null)throw Error(e(92));if(li(h)){if(1<h.length)throw Error(e(93));h=h[0]}r=h}r==null&&(r=""),h=r}i._wrapperState={initialValue:bt(h)}}function dn(i,r){var h=bt(r.value),p=bt(r.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),r.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),p!=null&&(i.defaultValue=""+p)}function Un(i){var r=i.textContent;r===i._wrapperState.initialValue&&r!==""&&r!==null&&(i.value=r)}function Qi(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ri(i,r){return i==null||i==="http://www.w3.org/1999/xhtml"?Qi(r):i==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Pi,rr=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,h,p,v){MSApp.execUnsafeLocalFunction(function(){return i(r,h,p,v)})}:i}(function(i,r){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=r;else{for(Pi=Pi||document.createElement("div"),Pi.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Pi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;r.firstChild;)i.appendChild(r.firstChild)}});function Ve(i,r){if(r){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=r;return}}i.textContent=r}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},or=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(i){or.forEach(function(r){r=r+i.charAt(0).toUpperCase()+i.substring(1),Zi[r]=Zi[i]})});function ar(i,r,h){return r==null||typeof r=="boolean"||r===""?"":h||typeof r!="number"||r===0||Zi.hasOwnProperty(i)&&Zi[i]?(""+r).trim():r+"px"}function wn(i,r){i=i.style;for(var h in r)if(r.hasOwnProperty(h)){var p=h.indexOf("--")===0,v=ar(h,r[h],p);h==="float"&&(h="cssFloat"),p?i.setProperty(h,v):i[h]=v}}var ci=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xs(i,r){if(r){if(ci[i]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(e(137,i));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(e(61))}if(r.style!=null&&typeof r.style!="object")throw Error(e(62))}}function Ii(i,r){if(i.indexOf("-")===-1)return typeof r.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ji=null;function Ze(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cs=null,Oi=null,he=null;function hi(i){if(i=nf(i)){if(typeof Cs!="function")throw Error(e(280));var r=i.stateNode;r&&(r=tm(r),Cs(i.stateNode,i.type,r))}}function ks(i){Oi?he?he.push(i):he=[i]:Oi=i}function lr(){if(Oi){var i=Oi,r=he;if(he=Oi=null,hi(i),r)for(i=0;i<r.length;i++)hi(r[i])}}function Ns(i,r){return i(r)}function ur(){}var di=!1;function Lo(i,r,h){if(di)return i(r,h);di=!0;try{return Ns(i,r,h)}finally{di=!1,(Oi!==null||he!==null)&&(ur(),lr())}}function An(i,r){var h=i.stateNode;if(h===null)return null;var p=tm(h);if(p===null)return null;h=p[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break t;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(e(231,r,typeof h));return h}var $r=!1;if(u)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){$r=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{$r=!1}function $n(i,r,h,p,v,w,C,F,z){var tt=Array.prototype.slice.call(arguments,3);try{r.apply(h,tt)}catch(ct){this.onError(ct)}}var fi=!1,ts=null,ke=!1,Gr=null,Pa={onError:function(i){fi=!0,ts=i}};function pi(i,r,h,p,v,w,C,F,z){fi=!1,ts=null,$n.apply(Pa,arguments)}function Ia(i,r,h,p,v,w,C,F,z){if(pi.apply(this,arguments),fi){if(fi){var tt=ts;fi=!1,ts=null}else throw Error(e(198));ke||(ke=!0,Gr=tt)}}function Mi(i){var r=i,h=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(h=r.return),i=r.return;while(i)}return r.tag===3?h:null}function We(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function Ro(i){if(Mi(i)!==i)throw Error(e(188))}function zl(i){var r=i.alternate;if(!r){if(r=Mi(i),r===null)throw Error(e(188));return r!==i?null:i}for(var h=i,p=r;;){var v=h.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===h)return Ro(v),i;if(w===p)return Ro(v),r;w=w.sibling}throw Error(e(188))}if(h.return!==p.return)h=v,p=w;else{for(var C=!1,F=v.child;F;){if(F===h){C=!0,h=v,p=w;break}if(F===p){C=!0,p=v,h=w;break}F=F.sibling}if(!C){for(F=w.child;F;){if(F===h){C=!0,h=w,p=v;break}if(F===p){C=!0,p=w,h=v;break}F=F.sibling}if(!C)throw Error(e(189))}}if(h.alternate!==p)throw Error(e(190))}if(h.tag!==3)throw Error(e(188));return h.stateNode.current===h?i:r}function kt(i){return i=zl(i),i!==null?$(i):null}function $(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var r=$(i);if(r!==null)return r;i=i.sibling}return null}var ft=t.unstable_scheduleCallback,wt=t.unstable_cancelCallback,ge=t.unstable_shouldYield,Xe=t.unstable_requestPaint,Gt=t.unstable_now,on=t.unstable_getCurrentPriorityLevel,_n=t.unstable_ImmediatePriority,gi=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,hr=t.unstable_LowPriority,Gn=t.unstable_IdlePriority,Vr=null,Di=null;function qd(i){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(Vr,i,void 0,(i.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:Oa,Hd=Math.log,zd=Math.LN2;function Oa(i){return i>>>=0,i===0?32:31-(Hd(i)/zd|0)|0}var Wr=64,Ls=4194304;function Xr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Po(i,r){var h=i.pendingLanes;if(h===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,C=h&268435455;if(C!==0){var F=C&~v;F!==0?p=Xr(F):(w&=C,w!==0&&(p=Xr(w)))}else C=h&~v,C!==0?p=Xr(C):w!==0&&(p=Xr(w));if(p===0)return 0;if(r!==0&&r!==p&&(r&v)===0&&(v=p&-p,w=r&-r,v>=w||v===16&&(w&4194240)!==0))return r;if((p&4)!==0&&(p|=h&16),r=i.entangledLanes,r!==0)for(i=i.entanglements,r&=p;0<r;)h=31-mi(r),v=1<<h,p|=i[h],r&=~v;return p}function Ud(i,r){switch(i){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $d(i,r){for(var h=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var C=31-mi(w),F=1<<C,z=v[C];z===-1?((F&h)===0||(F&p)!==0)&&(v[C]=Ud(F,r)):z<=r&&(i.expiredLanes|=F),w&=~F}}function Ul(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Mc(){var i=Wr;return Wr<<=1,(Wr&4194240)===0&&(Wr=64),i}function Io(i){for(var r=[],h=0;31>h;h++)r.push(i);return r}function Oo(i,r,h){i.pendingLanes|=r,r!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,r=31-mi(r),i[r]=h}function Gd(i,r){var h=i.pendingLanes&~r;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=r,i.mutableReadLanes&=r,i.entangledLanes&=r,r=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<h;){var v=31-mi(h),w=1<<v;r[v]=0,p[v]=-1,i[v]=-1,h&=~w}}function dr(i,r){var h=i.entangledLanes|=r;for(i=i.entanglements;h;){var p=31-mi(h),v=1<<p;v&r|i[p]&r&&(i[p]|=r),h&=~v}}var Wt=0;function Rs(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ps,$l,es,Dc,Fc,Gl=!1,Ma=[],ns=null,Oe=null,is=null,Yr=new Map,Is=new Map,Fi=[],Da="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bc(i,r){switch(i){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":Oe=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Yr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(r.pointerId)}}function Kr(i,r,h,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:r,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},r!==null&&(r=nf(r),r!==null&&$l(r)),i):(i.eventSystemFlags|=p,r=i.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),i)}function Vl(i,r,h,p,v){switch(r){case"focusin":return ns=Kr(ns,i,r,h,p,v),!0;case"dragenter":return Oe=Kr(Oe,i,r,h,p,v),!0;case"mouseover":return is=Kr(is,i,r,h,p,v),!0;case"pointerover":var w=v.pointerId;return Yr.set(w,Kr(Yr.get(w)||null,i,r,h,p,v)),!0;case"gotpointercapture":return w=v.pointerId,Is.set(w,Kr(Is.get(w)||null,i,r,h,p,v)),!0}return!1}function Wl(i){var r=Kl(i.target);if(r!==null){var h=Mi(r);if(h!==null){if(r=h.tag,r===13){if(r=We(h),r!==null){i.blockedOn=r,Fc(i.priority,function(){es(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yi(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var h=ae(i.domEventName,i.eventSystemFlags,r[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var p=new h.constructor(h.type,h);Ji=p,h.target.dispatchEvent(p),Ji=null}else return r=nf(h),r!==null&&$l(r),i.blockedOn=h,!1;r.shift()}return!0}function Xl(i,r,h){yi(i)&&h.delete(r)}function Yl(){Gl=!1,ns!==null&&yi(ns)&&(ns=null),Oe!==null&&yi(Oe)&&(Oe=null),is!==null&&yi(is)&&(is=null),Yr.forEach(Xl),Is.forEach(Xl)}function Mo(i,r){i.blockedOn===r&&(i.blockedOn=null,Gl||(Gl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Yl)))}function Do(i){function r(v){return Mo(v,i)}if(0<Ma.length){Mo(Ma[0],i);for(var h=1;h<Ma.length;h++){var p=Ma[h];p.blockedOn===i&&(p.blockedOn=null)}}for(ns!==null&&Mo(ns,i),Oe!==null&&Mo(Oe,i),is!==null&&Mo(is,i),Yr.forEach(r),Is.forEach(r),h=0;h<Fi.length;h++)p=Fi[h],p.blockedOn===i&&(p.blockedOn=null);for(;0<Fi.length&&(h=Fi[0],h.blockedOn===null);)Wl(h),h.blockedOn===null&&Fi.shift()}var A=j.ReactCurrentBatchConfig,R=!0;function H(i,r,h,p){var v=Wt,w=A.transition;A.transition=null;try{Wt=1,zt(i,r,h,p)}finally{Wt=v,A.transition=w}}function it(i,r,h,p){var v=Wt,w=A.transition;A.transition=null;try{Wt=4,zt(i,r,h,p)}finally{Wt=v,A.transition=w}}function zt(i,r,h,p){if(R){var v=ae(i,r,h,p);if(v===null)zy(i,r,p,Rt,h),Bc(i,p);else if(Vl(v,i,r,h,p))p.stopPropagation();else if(Bc(i,p),r&4&&-1<Da.indexOf(i)){for(;v!==null;){var w=nf(v);if(w!==null&&Ps(w),w=ae(i,r,h,p),w===null&&zy(i,r,p,Rt,h),w===v)break;v=w}v!==null&&p.stopPropagation()}else zy(i,r,p,null,h)}}var Rt=null;function ae(i,r,h,p){if(Rt=null,i=Ze(p),i=Kl(i),i!==null)if(r=Mi(i),r===null)i=null;else if(h=r.tag,h===13){if(i=We(r),i!==null)return i;i=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null);return Rt=i,null}function le(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(on()){case _n:return 1;case gi:return 4;case Ne:case hr:return 16;case Gn:return 536870912;default:return 16}default:return 16}}var be=null,ce=null,Je=null;function In(){if(Je)return Je;var i,r=ce,h=r.length,p,v="value"in be?be.value:be.textContent,w=v.length;for(i=0;i<h&&r[i]===v[i];i++);var C=h-i;for(p=1;p<=C&&r[h-p]===v[w-p];p++);return Je=v.slice(i,1<p?1-p:void 0)}function Me(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function tn(){return!0}function an(){return!1}function Ye(i){function r(h,p,v,w,C){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(h=i[F],this[F]=h?h(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?tn:an,this.isPropagationStopped=an,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),r}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=Ye(Vn),Fa=J({},Vn,{view:0,detail:0}),jc=Ye(Fa),Ba,Ny,Vd,Vg=J({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ry,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vd&&(Vd&&i.type==="mousemove"?(Ba=i.screenX-Vd.screenX,Ny=i.screenY-Vd.screenY):Ny=Ba=0,Vd=i),Ba)},movementY:function(i){return"movementY"in i?i.movementY:Ny}}),Uw=Ye(Vg),ok=J({},Vg,{dataTransfer:0}),ak=Ye(ok),lk=J({},Fa,{relatedTarget:0}),Ly=Ye(lk),uk=J({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),ck=Ye(uk),hk=J({},Vn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),dk=Ye(hk),fk=J({},Vn,{data:0}),$w=Ye(fk),pk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yk(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=mk[i])?!!r[i]:!1}function Ry(){return yk}var vk=J({},Fa,{key:function(i){if(i.key){var r=pk[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Me(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ry,charCode:function(i){return i.type==="keypress"?Me(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Me(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bk=Ye(vk),wk=J({},Vg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gw=Ye(wk),Ak=J({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ry}),_k=Ye(Ak),Ek=J({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sk=Ye(Ek),Tk=J({},Vg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xk=Ye(Tk),Ck=[9,13,27,32],Py=u&&"CompositionEvent"in window,Wd=null;u&&"documentMode"in document&&(Wd=document.documentMode);var kk=u&&"TextEvent"in window&&!Wd,Vw=u&&(!Py||Wd&&8<Wd&&11>=Wd),Ww=" ",Xw=!1;function Yw(i,r){switch(i){case"keyup":return Ck.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qc=!1;function Nk(i,r){switch(i){case"compositionend":return Kw(r);case"keypress":return r.which!==32?null:(Xw=!0,Ww);case"textInput":return i=r.data,i===Ww&&Xw?null:i;default:return null}}function Lk(i,r){if(qc)return i==="compositionend"||!Py&&Yw(i,r)?(i=In(),Je=ce=be=null,qc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vw&&r.locale!=="ko"?null:r.data;default:return null}}var Rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qw(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Rk[i.type]:r==="textarea"}function Zw(i,r,h,p){ks(p),r=Qg(r,"onChange"),0<r.length&&(h=new fr("onChange","change",null,h,p),i.push({event:h,listeners:r}))}var Xd=null,Yd=null;function Pk(i){mA(i,0)}function Wg(i){var r=Gc(i);if(Jt(r))return i}function Ik(i,r){if(i==="change")return r}var Jw=!1;if(u){var Iy;if(u){var Oy="oninput"in document;if(!Oy){var tA=document.createElement("div");tA.setAttribute("oninput","return;"),Oy=typeof tA.oninput=="function"}Iy=Oy}else Iy=!1;Jw=Iy&&(!document.documentMode||9<document.documentMode)}function eA(){Xd&&(Xd.detachEvent("onpropertychange",nA),Yd=Xd=null)}function nA(i){if(i.propertyName==="value"&&Wg(Yd)){var r=[];Zw(r,Yd,i,Ze(i)),Lo(Pk,r)}}function Ok(i,r,h){i==="focusin"?(eA(),Xd=r,Yd=h,Xd.attachEvent("onpropertychange",nA)):i==="focusout"&&eA()}function Mk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wg(Yd)}function Dk(i,r){if(i==="click")return Wg(r)}function Fk(i,r){if(i==="input"||i==="change")return Wg(r)}function Bk(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var pr=typeof Object.is=="function"?Object.is:Bk;function Kd(i,r){if(pr(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var h=Object.keys(i),p=Object.keys(r);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!d.call(r,v)||!pr(i[v],r[v]))return!1}return!0}function iA(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sA(i,r){var h=iA(i);i=0;for(var p;h;){if(h.nodeType===3){if(p=i+h.textContent.length,i<=r&&p>=r)return{node:h,offset:r-i};i=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=iA(h)}}function rA(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?rA(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function oA(){for(var i=window,r=re();r instanceof i.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)i=r.contentWindow;else break;r=re(i.document)}return r}function My(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}function jk(i){var r=oA(),h=i.focusedElem,p=i.selectionRange;if(r!==h&&h&&h.ownerDocument&&rA(h.ownerDocument.documentElement,h)){if(p!==null&&My(h)){if(r=p.start,i=p.end,i===void 0&&(i=r),"selectionStart"in h)h.selectionStart=r,h.selectionEnd=Math.min(i,h.value.length);else if(i=(r=h.ownerDocument||document)&&r.defaultView||window,i.getSelection){i=i.getSelection();var v=h.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=sA(h,w);var C=sA(h,p);v&&C&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(r=r.createRange(),r.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(r),i.extend(C.node,C.offset)):(r.setEnd(C.node,C.offset),i.addRange(r)))}}for(r=[],i=h;i=i.parentNode;)i.nodeType===1&&r.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<r.length;h++)i=r[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var qk=u&&"documentMode"in document&&11>=document.documentMode,Hc=null,Dy=null,Qd=null,Fy=!1;function aA(i,r,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Fy||Hc==null||Hc!==re(p)||(p=Hc,"selectionStart"in p&&My(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Qd&&Kd(Qd,p)||(Qd=p,p=Qg(Dy,"onSelect"),0<p.length&&(r=new fr("onSelect","select",null,r,h),i.push({event:r,listeners:p}),r.target=Hc)))}function Xg(i,r){var h={};return h[i.toLowerCase()]=r.toLowerCase(),h["Webkit"+i]="webkit"+r,h["Moz"+i]="moz"+r,h}var zc={animationend:Xg("Animation","AnimationEnd"),animationiteration:Xg("Animation","AnimationIteration"),animationstart:Xg("Animation","AnimationStart"),transitionend:Xg("Transition","TransitionEnd")},By={},lA={};u&&(lA=document.createElement("div").style,"AnimationEvent"in window||(delete zc.animationend.animation,delete zc.animationiteration.animation,delete zc.animationstart.animation),"TransitionEvent"in window||delete zc.transitionend.transition);function Yg(i){if(By[i])return By[i];if(!zc[i])return i;var r=zc[i],h;for(h in r)if(r.hasOwnProperty(h)&&h in lA)return By[i]=r[h];return i}var uA=Yg("animationend"),cA=Yg("animationiteration"),hA=Yg("animationstart"),dA=Yg("transitionend"),fA=new Map,pA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(i,r){fA.set(i,r),o(r,[i])}for(var jy=0;jy<pA.length;jy++){var qy=pA[jy],Hk=qy.toLowerCase(),zk=qy[0].toUpperCase()+qy.slice(1);ja(Hk,"on"+zk)}ja(uA,"onAnimationEnd"),ja(cA,"onAnimationIteration"),ja(hA,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(dA,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zd));function gA(i,r,h){var p=i.type||"unknown-event";i.currentTarget=h,Ia(p,r,void 0,i),i.currentTarget=null}function mA(i,r){r=(r&4)!==0;for(var h=0;h<i.length;h++){var p=i[h],v=p.event;p=p.listeners;t:{var w=void 0;if(r)for(var C=p.length-1;0<=C;C--){var F=p[C],z=F.instance,tt=F.currentTarget;if(F=F.listener,z!==w&&v.isPropagationStopped())break t;gA(v,F,tt),w=z}else for(C=0;C<p.length;C++){if(F=p[C],z=F.instance,tt=F.currentTarget,F=F.listener,z!==w&&v.isPropagationStopped())break t;gA(v,F,tt),w=z}}}if(ke)throw i=Gr,ke=!1,Gr=null,i}function Le(i,r){var h=r[Xy];h===void 0&&(h=r[Xy]=new Set);var p=i+"__bubble";h.has(p)||(yA(r,i,2,!1),h.add(p))}function Hy(i,r,h){var p=0;r&&(p|=4),yA(h,i,p,r)}var Kg="_reactListening"+Math.random().toString(36).slice(2);function Jd(i){if(!i[Kg]){i[Kg]=!0,n.forEach(function(h){h!=="selectionchange"&&(Uk.has(h)||Hy(h,!1,i),Hy(h,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Kg]||(r[Kg]=!0,Hy("selectionchange",!1,r))}}function yA(i,r,h,p){switch(le(r)){case 1:var v=H;break;case 4:v=it;break;default:v=zt}h=v.bind(null,r,h,i),v=void 0,!$r||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(r,h,{capture:!0,passive:v}):i.addEventListener(r,h,!0):v!==void 0?i.addEventListener(r,h,{passive:v}):i.addEventListener(r,h,!1)}function zy(i,r,h,p,v){var w=p;if((r&1)===0&&(r&2)===0&&p!==null)t:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var F=p.stateNode.containerInfo;if(F===v||F.nodeType===8&&F.parentNode===v)break;if(C===4)for(C=p.return;C!==null;){var z=C.tag;if((z===3||z===4)&&(z=C.stateNode.containerInfo,z===v||z.nodeType===8&&z.parentNode===v))return;C=C.return}for(;F!==null;){if(C=Kl(F),C===null)return;if(z=C.tag,z===5||z===6){p=w=C;continue t}F=F.parentNode}}p=p.return}Lo(function(){var tt=w,ct=Ze(h),dt=[];t:{var ut=fA.get(i);if(ut!==void 0){var _t=fr,Ct=i;switch(i){case"keypress":if(Me(h)===0)break t;case"keydown":case"keyup":_t=bk;break;case"focusin":Ct="focus",_t=Ly;break;case"focusout":Ct="blur",_t=Ly;break;case"beforeblur":case"afterblur":_t=Ly;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_t=Uw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_t=ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_t=_k;break;case uA:case cA:case hA:_t=ck;break;case dA:_t=Sk;break;case"scroll":_t=jc;break;case"wheel":_t=xk;break;case"copy":case"cut":case"paste":_t=dk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_t=Gw}var Lt=(r&4)!==0,en=!Lt&&i==="scroll",Y=Lt?ut!==null?ut+"Capture":null:ut;Lt=[];for(var G=tt,Q;G!==null;){Q=G;var pt=Q.stateNode;if(Q.tag===5&&pt!==null&&(Q=pt,Y!==null&&(pt=An(G,Y),pt!=null&&Lt.push(tf(G,pt,Q)))),en)break;G=G.return}0<Lt.length&&(ut=new _t(ut,Ct,null,h,ct),dt.push({event:ut,listeners:Lt}))}}if((r&7)===0){t:{if(ut=i==="mouseover"||i==="pointerover",_t=i==="mouseout"||i==="pointerout",ut&&h!==Ji&&(Ct=h.relatedTarget||h.fromElement)&&(Kl(Ct)||Ct[Fo]))break t;if((_t||ut)&&(ut=ct.window===ct?ct:(ut=ct.ownerDocument)?ut.defaultView||ut.parentWindow:window,_t?(Ct=h.relatedTarget||h.toElement,_t=tt,Ct=Ct?Kl(Ct):null,Ct!==null&&(en=Mi(Ct),Ct!==en||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(_t=null,Ct=tt),_t!==Ct)){if(Lt=Uw,pt="onMouseLeave",Y="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Lt=Gw,pt="onPointerLeave",Y="onPointerEnter",G="pointer"),en=_t==null?ut:Gc(_t),Q=Ct==null?ut:Gc(Ct),ut=new Lt(pt,G+"leave",_t,h,ct),ut.target=en,ut.relatedTarget=Q,pt=null,Kl(ct)===tt&&(Lt=new Lt(Y,G+"enter",Ct,h,ct),Lt.target=Q,Lt.relatedTarget=en,pt=Lt),en=pt,_t&&Ct)e:{for(Lt=_t,Y=Ct,G=0,Q=Lt;Q;Q=Uc(Q))G++;for(Q=0,pt=Y;pt;pt=Uc(pt))Q++;for(;0<G-Q;)Lt=Uc(Lt),G--;for(;0<Q-G;)Y=Uc(Y),Q--;for(;G--;){if(Lt===Y||Y!==null&&Lt===Y.alternate)break e;Lt=Uc(Lt),Y=Uc(Y)}Lt=null}else Lt=null;_t!==null&&vA(dt,ut,_t,Lt,!1),Ct!==null&&en!==null&&vA(dt,en,Ct,Lt,!0)}}t:{if(ut=tt?Gc(tt):window,_t=ut.nodeName&&ut.nodeName.toLowerCase(),_t==="select"||_t==="input"&&ut.type==="file")var It=Ik;else if(Qw(ut))if(Jw)It=Fk;else{It=Mk;var Bt=Ok}else(_t=ut.nodeName)&&_t.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(It=Dk);if(It&&(It=It(i,tt))){Zw(dt,It,h,ct);break t}Bt&&Bt(i,ut,tt),i==="focusout"&&(Bt=ut._wrapperState)&&Bt.controlled&&ut.type==="number"&&Ts(ut,"number",ut.value)}switch(Bt=tt?Gc(tt):window,i){case"focusin":(Qw(Bt)||Bt.contentEditable==="true")&&(Hc=Bt,Dy=tt,Qd=null);break;case"focusout":Qd=Dy=Hc=null;break;case"mousedown":Fy=!0;break;case"contextmenu":case"mouseup":case"dragend":Fy=!1,aA(dt,h,ct);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":aA(dt,h,ct)}var jt;if(Py)t:{switch(i){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else qc?Yw(i,h)&&(Ut="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Ut="onCompositionStart");Ut&&(Vw&&h.locale!=="ko"&&(qc||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&qc&&(jt=In()):(be=ct,ce="value"in be?be.value:be.textContent,qc=!0)),Bt=Qg(tt,Ut),0<Bt.length&&(Ut=new $w(Ut,i,null,h,ct),dt.push({event:Ut,listeners:Bt}),jt?Ut.data=jt:(jt=Kw(h),jt!==null&&(Ut.data=jt)))),(jt=kk?Nk(i,h):Lk(i,h))&&(tt=Qg(tt,"onBeforeInput"),0<tt.length&&(ct=new $w("onBeforeInput","beforeinput",null,h,ct),dt.push({event:ct,listeners:tt}),ct.data=jt))}mA(dt,r)})}function tf(i,r,h){return{instance:i,listener:r,currentTarget:h}}function Qg(i,r){for(var h=r+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=An(i,h),w!=null&&p.unshift(tf(i,w,v)),w=An(i,r),w!=null&&p.push(tf(i,w,v))),i=i.return}return p}function Uc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function vA(i,r,h,p,v){for(var w=r._reactName,C=[];h!==null&&h!==p;){var F=h,z=F.alternate,tt=F.stateNode;if(z!==null&&z===p)break;F.tag===5&&tt!==null&&(F=tt,v?(z=An(h,w),z!=null&&C.unshift(tf(h,z,F))):v||(z=An(h,w),z!=null&&C.push(tf(h,z,F)))),h=h.return}C.length!==0&&i.push({event:r,listeners:C})}var $k=/\r\n?/g,Gk=/\u0000|\uFFFD/g;function bA(i){return(typeof i=="string"?i:""+i).replace($k,`
`).replace(Gk,"")}function Zg(i,r,h){if(r=bA(r),bA(i)!==r&&h)throw Error(e(425))}function Jg(){}var Uy=null,$y=null;function Gy(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vy=typeof setTimeout=="function"?setTimeout:void 0,Vk=typeof clearTimeout=="function"?clearTimeout:void 0,wA=typeof Promise=="function"?Promise:void 0,Wk=typeof queueMicrotask=="function"?queueMicrotask:typeof wA<"u"?function(i){return wA.resolve(null).then(i).catch(Xk)}:Vy;function Xk(i){setTimeout(function(){throw i})}function Wy(i,r){var h=r,p=0;do{var v=h.nextSibling;if(i.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(p===0){i.removeChild(v),Do(r);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=v}while(h);Do(r)}function qa(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return i}function AA(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(r===0)return i;r--}else h==="/$"&&r++}i=i.previousSibling}return null}var $c=Math.random().toString(36).slice(2),Qr="__reactFiber$"+$c,ef="__reactProps$"+$c,Fo="__reactContainer$"+$c,Xy="__reactEvents$"+$c,Yk="__reactListeners$"+$c,Kk="__reactHandles$"+$c;function Kl(i){var r=i[Qr];if(r)return r;for(var h=i.parentNode;h;){if(r=h[Fo]||h[Qr]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(i=AA(i);i!==null;){if(h=i[Qr])return h;i=AA(i)}return r}i=h,h=i.parentNode}return null}function nf(i){return i=i[Qr]||i[Fo],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Gc(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(e(33))}function tm(i){return i[ef]||null}var Yy=[],Vc=-1;function Ha(i){return{current:i}}function Re(i){0>Vc||(i.current=Yy[Vc],Yy[Vc]=null,Vc--)}function Te(i,r){Vc++,Yy[Vc]=i.current,i.current=r}var za={},Wn=Ha(za),Bi=Ha(!1),Ql=za;function Wc(i,r){var h=i.type.contextTypes;if(!h)return za;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in h)v[w]=r[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=v),v}function ji(i){return i=i.childContextTypes,i!=null}function em(){Re(Bi),Re(Wn)}function _A(i,r,h){if(Wn.current!==za)throw Error(e(168));Te(Wn,r),Te(Bi,h)}function EA(i,r,h){var p=i.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var v in p)if(!(v in r))throw Error(e(108,yt(i)||"Unknown",v));return J({},h,p)}function nm(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||za,Ql=Wn.current,Te(Wn,i),Te(Bi,Bi.current),!0}function SA(i,r,h){var p=i.stateNode;if(!p)throw Error(e(169));h?(i=EA(i,r,Ql),p.__reactInternalMemoizedMergedChildContext=i,Re(Bi),Re(Wn),Te(Wn,i)):Re(Bi),Te(Bi,h)}var Bo=null,im=!1,Ky=!1;function TA(i){Bo===null?Bo=[i]:Bo.push(i)}function Qk(i){im=!0,TA(i)}function Ua(){if(!Ky&&Bo!==null){Ky=!0;var i=0,r=Wt;try{var h=Bo;for(Wt=1;i<h.length;i++){var p=h[i];do p=p(!0);while(p!==null)}Bo=null,im=!1}catch(v){throw Bo!==null&&(Bo=Bo.slice(i+1)),ft(_n,Ua),v}finally{Wt=r,Ky=!1}}return null}var Xc=[],Yc=0,sm=null,rm=0,Os=[],Ms=0,Zl=null,jo=1,qo="";function Jl(i,r){Xc[Yc++]=rm,Xc[Yc++]=sm,sm=i,rm=r}function xA(i,r,h){Os[Ms++]=jo,Os[Ms++]=qo,Os[Ms++]=Zl,Zl=i;var p=jo;i=qo;var v=32-mi(p)-1;p&=~(1<<v),h+=1;var w=32-mi(r)+v;if(30<w){var C=v-v%5;w=(p&(1<<C)-1).toString(32),p>>=C,v-=C,jo=1<<32-mi(r)+v|h<<v|p,qo=w+i}else jo=1<<w|h<<v|p,qo=i}function Qy(i){i.return!==null&&(Jl(i,1),xA(i,1,0))}function Zy(i){for(;i===sm;)sm=Xc[--Yc],Xc[Yc]=null,rm=Xc[--Yc],Xc[Yc]=null;for(;i===Zl;)Zl=Os[--Ms],Os[Ms]=null,qo=Os[--Ms],Os[Ms]=null,jo=Os[--Ms],Os[Ms]=null}var ss=null,rs=null,De=!1,gr=null;function CA(i,r){var h=js(5,null,null,0);h.elementType="DELETED",h.stateNode=r,h.return=i,r=i.deletions,r===null?(i.deletions=[h],i.flags|=16):r.push(h)}function kA(i,r){switch(i.tag){case 5:var h=i.type;return r=r.nodeType!==1||h.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(i.stateNode=r,ss=i,rs=qa(r.firstChild),!0):!1;case 6:return r=i.pendingProps===""||r.nodeType!==3?null:r,r!==null?(i.stateNode=r,ss=i,rs=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(h=Zl!==null?{id:jo,overflow:qo}:null,i.memoizedState={dehydrated:r,treeContext:h,retryLane:1073741824},h=js(18,null,null,0),h.stateNode=r,h.return=i,i.child=h,ss=i,rs=null,!0):!1;default:return!1}}function Jy(i){return(i.mode&1)!==0&&(i.flags&128)===0}function tv(i){if(De){var r=rs;if(r){var h=r;if(!kA(i,r)){if(Jy(i))throw Error(e(418));r=qa(h.nextSibling);var p=ss;r&&kA(i,r)?CA(p,h):(i.flags=i.flags&-4097|2,De=!1,ss=i)}}else{if(Jy(i))throw Error(e(418));i.flags=i.flags&-4097|2,De=!1,ss=i}}}function NA(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ss=i}function om(i){if(i!==ss)return!1;if(!De)return NA(i),De=!0,!1;var r;if((r=i.tag!==3)&&!(r=i.tag!==5)&&(r=i.type,r=r!=="head"&&r!=="body"&&!Gy(i.type,i.memoizedProps)),r&&(r=rs)){if(Jy(i))throw LA(),Error(e(418));for(;r;)CA(i,r),r=qa(r.nextSibling)}if(NA(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(e(317));t:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(r===0){rs=qa(i.nextSibling);break t}r--}else h!=="$"&&h!=="$!"&&h!=="$?"||r++}i=i.nextSibling}rs=null}}else rs=ss?qa(i.stateNode.nextSibling):null;return!0}function LA(){for(var i=rs;i;)i=qa(i.nextSibling)}function Kc(){rs=ss=null,De=!1}function ev(i){gr===null?gr=[i]:gr.push(i)}var Zk=j.ReactCurrentBatchConfig;function sf(i,r,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(e(309));var p=h.stateNode}if(!p)throw Error(e(147,i));var v=p,w=""+i;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===w?r.ref:(r=function(C){var F=v.refs;C===null?delete F[w]:F[w]=C},r._stringRef=w,r)}if(typeof i!="string")throw Error(e(284));if(!h._owner)throw Error(e(290,i))}return i}function am(i,r){throw i=Object.prototype.toString.call(r),Error(e(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i))}function RA(i){var r=i._init;return r(i._payload)}function PA(i){function r(Y,G){if(i){var Q=Y.deletions;Q===null?(Y.deletions=[G],Y.flags|=16):Q.push(G)}}function h(Y,G){if(!i)return null;for(;G!==null;)r(Y,G),G=G.sibling;return null}function p(Y,G){for(Y=new Map;G!==null;)G.key!==null?Y.set(G.key,G):Y.set(G.index,G),G=G.sibling;return Y}function v(Y,G){return Y=Qa(Y,G),Y.index=0,Y.sibling=null,Y}function w(Y,G,Q){return Y.index=Q,i?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<G?(Y.flags|=2,G):Q):(Y.flags|=2,G)):(Y.flags|=1048576,G)}function C(Y){return i&&Y.alternate===null&&(Y.flags|=2),Y}function F(Y,G,Q,pt){return G===null||G.tag!==6?(G=Vv(Q,Y.mode,pt),G.return=Y,G):(G=v(G,Q),G.return=Y,G)}function z(Y,G,Q,pt){var It=Q.type;return It===M?ct(Y,G,Q.props.children,pt,Q.key):G!==null&&(G.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===V&&RA(It)===G.type)?(pt=v(G,Q.props),pt.ref=sf(Y,G,Q),pt.return=Y,pt):(pt=Rm(Q.type,Q.key,Q.props,null,Y.mode,pt),pt.ref=sf(Y,G,Q),pt.return=Y,pt)}function tt(Y,G,Q,pt){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=Wv(Q,Y.mode,pt),G.return=Y,G):(G=v(G,Q.children||[]),G.return=Y,G)}function ct(Y,G,Q,pt,It){return G===null||G.tag!==7?(G=au(Q,Y.mode,pt,It),G.return=Y,G):(G=v(G,Q),G.return=Y,G)}function dt(Y,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Vv(""+G,Y.mode,Q),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return Q=Rm(G.type,G.key,G.props,null,Y.mode,Q),Q.ref=sf(Y,null,G),Q.return=Y,Q;case P:return G=Wv(G,Y.mode,Q),G.return=Y,G;case V:var pt=G._init;return dt(Y,pt(G._payload),Q)}if(li(G)||ot(G))return G=au(G,Y.mode,Q,null),G.return=Y,G;am(Y,G)}return null}function ut(Y,G,Q,pt){var It=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return It!==null?null:F(Y,G,""+Q,pt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:return Q.key===It?z(Y,G,Q,pt):null;case P:return Q.key===It?tt(Y,G,Q,pt):null;case V:return It=Q._init,ut(Y,G,It(Q._payload),pt)}if(li(Q)||ot(Q))return It!==null?null:ct(Y,G,Q,pt,null);am(Y,Q)}return null}function _t(Y,G,Q,pt,It){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Y=Y.get(Q)||null,F(G,Y,""+pt,It);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case T:return Y=Y.get(pt.key===null?Q:pt.key)||null,z(G,Y,pt,It);case P:return Y=Y.get(pt.key===null?Q:pt.key)||null,tt(G,Y,pt,It);case V:var Bt=pt._init;return _t(Y,G,Q,Bt(pt._payload),It)}if(li(pt)||ot(pt))return Y=Y.get(Q)||null,ct(G,Y,pt,It,null);am(G,pt)}return null}function Ct(Y,G,Q,pt){for(var It=null,Bt=null,jt=G,Ut=G=0,Tn=null;jt!==null&&Ut<Q.length;Ut++){jt.index>Ut?(Tn=jt,jt=null):Tn=jt.sibling;var me=ut(Y,jt,Q[Ut],pt);if(me===null){jt===null&&(jt=Tn);break}i&&jt&&me.alternate===null&&r(Y,jt),G=w(me,G,Ut),Bt===null?It=me:Bt.sibling=me,Bt=me,jt=Tn}if(Ut===Q.length)return h(Y,jt),De&&Jl(Y,Ut),It;if(jt===null){for(;Ut<Q.length;Ut++)jt=dt(Y,Q[Ut],pt),jt!==null&&(G=w(jt,G,Ut),Bt===null?It=jt:Bt.sibling=jt,Bt=jt);return De&&Jl(Y,Ut),It}for(jt=p(Y,jt);Ut<Q.length;Ut++)Tn=_t(jt,Y,Ut,Q[Ut],pt),Tn!==null&&(i&&Tn.alternate!==null&&jt.delete(Tn.key===null?Ut:Tn.key),G=w(Tn,G,Ut),Bt===null?It=Tn:Bt.sibling=Tn,Bt=Tn);return i&&jt.forEach(function(Za){return r(Y,Za)}),De&&Jl(Y,Ut),It}function Lt(Y,G,Q,pt){var It=ot(Q);if(typeof It!="function")throw Error(e(150));if(Q=It.call(Q),Q==null)throw Error(e(151));for(var Bt=It=null,jt=G,Ut=G=0,Tn=null,me=Q.next();jt!==null&&!me.done;Ut++,me=Q.next()){jt.index>Ut?(Tn=jt,jt=null):Tn=jt.sibling;var Za=ut(Y,jt,me.value,pt);if(Za===null){jt===null&&(jt=Tn);break}i&&jt&&Za.alternate===null&&r(Y,jt),G=w(Za,G,Ut),Bt===null?It=Za:Bt.sibling=Za,Bt=Za,jt=Tn}if(me.done)return h(Y,jt),De&&Jl(Y,Ut),It;if(jt===null){for(;!me.done;Ut++,me=Q.next())me=dt(Y,me.value,pt),me!==null&&(G=w(me,G,Ut),Bt===null?It=me:Bt.sibling=me,Bt=me);return De&&Jl(Y,Ut),It}for(jt=p(Y,jt);!me.done;Ut++,me=Q.next())me=_t(jt,Y,Ut,me.value,pt),me!==null&&(i&&me.alternate!==null&&jt.delete(me.key===null?Ut:me.key),G=w(me,G,Ut),Bt===null?It=me:Bt.sibling=me,Bt=me);return i&&jt.forEach(function(RN){return r(Y,RN)}),De&&Jl(Y,Ut),It}function en(Y,G,Q,pt){if(typeof Q=="object"&&Q!==null&&Q.type===M&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:t:{for(var It=Q.key,Bt=G;Bt!==null;){if(Bt.key===It){if(It=Q.type,It===M){if(Bt.tag===7){h(Y,Bt.sibling),G=v(Bt,Q.props.children),G.return=Y,Y=G;break t}}else if(Bt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===V&&RA(It)===Bt.type){h(Y,Bt.sibling),G=v(Bt,Q.props),G.ref=sf(Y,Bt,Q),G.return=Y,Y=G;break t}h(Y,Bt);break}else r(Y,Bt);Bt=Bt.sibling}Q.type===M?(G=au(Q.props.children,Y.mode,pt,Q.key),G.return=Y,Y=G):(pt=Rm(Q.type,Q.key,Q.props,null,Y.mode,pt),pt.ref=sf(Y,G,Q),pt.return=Y,Y=pt)}return C(Y);case P:t:{for(Bt=Q.key;G!==null;){if(G.key===Bt)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){h(Y,G.sibling),G=v(G,Q.children||[]),G.return=Y,Y=G;break t}else{h(Y,G);break}else r(Y,G);G=G.sibling}G=Wv(Q,Y.mode,pt),G.return=Y,Y=G}return C(Y);case V:return Bt=Q._init,en(Y,G,Bt(Q._payload),pt)}if(li(Q))return Ct(Y,G,Q,pt);if(ot(Q))return Lt(Y,G,Q,pt);am(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,G!==null&&G.tag===6?(h(Y,G.sibling),G=v(G,Q),G.return=Y,Y=G):(h(Y,G),G=Vv(Q,Y.mode,pt),G.return=Y,Y=G),C(Y)):h(Y,G)}return en}var Qc=PA(!0),IA=PA(!1),lm=Ha(null),um=null,Zc=null,nv=null;function iv(){nv=Zc=um=null}function sv(i){var r=lm.current;Re(lm),i._currentValue=r}function rv(i,r,h){for(;i!==null;){var p=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),i===h)break;i=i.return}}function Jc(i,r){um=i,nv=Zc=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&r)!==0&&(qi=!0),i.firstContext=null)}function Ds(i){var r=i._currentValue;if(nv!==i)if(i={context:i,memoizedValue:r,next:null},Zc===null){if(um===null)throw Error(e(308));Zc=i,um.dependencies={lanes:0,firstContext:i}}else Zc=Zc.next=i;return r}var tu=null;function ov(i){tu===null?tu=[i]:tu.push(i)}function OA(i,r,h,p){var v=r.interleaved;return v===null?(h.next=h,ov(r)):(h.next=v.next,v.next=h),r.interleaved=h,Ho(i,p)}function Ho(i,r){i.lanes|=r;var h=i.alternate;for(h!==null&&(h.lanes|=r),h=i,i=i.return;i!==null;)i.childLanes|=r,h=i.alternate,h!==null&&(h.childLanes|=r),h=i,i=i.return;return h.tag===3?h.stateNode:null}var $a=!1;function av(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MA(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function zo(i,r){return{eventTime:i,lane:r,tag:0,payload:null,callback:null,next:null}}function Ga(i,r,h){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(de&2)!==0){var v=p.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),p.pending=r,Ho(i,h)}return v=p.interleaved,v===null?(r.next=r,ov(p)):(r.next=v.next,v.next=r),p.interleaved=r,Ho(i,h)}function cm(i,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194240)!==0)){var p=r.lanes;p&=i.pendingLanes,h|=p,r.lanes=h,dr(i,h)}}function DA(i,r){var h=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var C={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?v=w=C:w=w.next=C,h=h.next}while(h!==null);w===null?v=w=r:w=w.next=r}else v=w=r;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=r:i.next=r,h.lastBaseUpdate=r}function hm(i,r,h,p){var v=i.updateQueue;$a=!1;var w=v.firstBaseUpdate,C=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var z=F,tt=z.next;z.next=null,C===null?w=tt:C.next=tt,C=z;var ct=i.alternate;ct!==null&&(ct=ct.updateQueue,F=ct.lastBaseUpdate,F!==C&&(F===null?ct.firstBaseUpdate=tt:F.next=tt,ct.lastBaseUpdate=z))}if(w!==null){var dt=v.baseState;C=0,ct=tt=z=null,F=w;do{var ut=F.lane,_t=F.eventTime;if((p&ut)===ut){ct!==null&&(ct=ct.next={eventTime:_t,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});t:{var Ct=i,Lt=F;switch(ut=r,_t=h,Lt.tag){case 1:if(Ct=Lt.payload,typeof Ct=="function"){dt=Ct.call(_t,dt,ut);break t}dt=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Lt.payload,ut=typeof Ct=="function"?Ct.call(_t,dt,ut):Ct,ut==null)break t;dt=J({},dt,ut);break t;case 2:$a=!0}}F.callback!==null&&F.lane!==0&&(i.flags|=64,ut=v.effects,ut===null?v.effects=[F]:ut.push(F))}else _t={eventTime:_t,lane:ut,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ct===null?(tt=ct=_t,z=dt):ct=ct.next=_t,C|=ut;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;ut=F,F=ut.next,ut.next=null,v.lastBaseUpdate=ut,v.shared.pending=null}}while(!0);if(ct===null&&(z=dt),v.baseState=z,v.firstBaseUpdate=tt,v.lastBaseUpdate=ct,r=v.shared.interleaved,r!==null){v=r;do C|=v.lane,v=v.next;while(v!==r)}else w===null&&(v.shared.lanes=0);iu|=C,i.lanes=C,i.memoizedState=dt}}function FA(i,r,h){if(i=r.effects,r.effects=null,i!==null)for(r=0;r<i.length;r++){var p=i[r],v=p.callback;if(v!==null){if(p.callback=null,p=h,typeof v!="function")throw Error(e(191,v));v.call(p)}}}var rf={},Zr=Ha(rf),of=Ha(rf),af=Ha(rf);function eu(i){if(i===rf)throw Error(e(174));return i}function lv(i,r){switch(Te(af,r),Te(of,i),Te(Zr,rf),i=r.nodeType,i){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ri(null,"");break;default:i=i===8?r.parentNode:r,r=i.namespaceURI||null,i=i.tagName,r=Ri(r,i)}Re(Zr),Te(Zr,r)}function th(){Re(Zr),Re(of),Re(af)}function BA(i){eu(af.current);var r=eu(Zr.current),h=Ri(r,i.type);r!==h&&(Te(of,i),Te(Zr,h))}function uv(i){of.current===i&&(Re(Zr),Re(of))}var He=Ha(0);function dm(i){for(var r=i;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var cv=[];function hv(){for(var i=0;i<cv.length;i++)cv[i]._workInProgressVersionPrimary=null;cv.length=0}var fm=j.ReactCurrentDispatcher,dv=j.ReactCurrentBatchConfig,nu=0,ze=null,fn=null,En=null,pm=!1,lf=!1,uf=0,Jk=0;function Xn(){throw Error(e(321))}function fv(i,r){if(r===null)return!1;for(var h=0;h<r.length&&h<i.length;h++)if(!pr(i[h],r[h]))return!1;return!0}function pv(i,r,h,p,v,w){if(nu=w,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,fm.current=i===null||i.memoizedState===null?iN:sN,i=h(p,v),lf){w=0;do{if(lf=!1,uf=0,25<=w)throw Error(e(301));w+=1,En=fn=null,r.updateQueue=null,fm.current=rN,i=h(p,v)}while(lf)}if(fm.current=ym,r=fn!==null&&fn.next!==null,nu=0,En=fn=ze=null,pm=!1,r)throw Error(e(300));return i}function gv(){var i=uf!==0;return uf=0,i}function Jr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?ze.memoizedState=En=i:En=En.next=i,En}function Fs(){if(fn===null){var i=ze.alternate;i=i!==null?i.memoizedState:null}else i=fn.next;var r=En===null?ze.memoizedState:En.next;if(r!==null)En=r,fn=i;else{if(i===null)throw Error(e(310));fn=i,i={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},En===null?ze.memoizedState=En=i:En=En.next=i}return En}function cf(i,r){return typeof r=="function"?r(i):r}function mv(i){var r=Fs(),h=r.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=i;var p=fn,v=p.baseQueue,w=h.pending;if(w!==null){if(v!==null){var C=v.next;v.next=w.next,w.next=C}p.baseQueue=v=w,h.pending=null}if(v!==null){w=v.next,p=p.baseState;var F=C=null,z=null,tt=w;do{var ct=tt.lane;if((nu&ct)===ct)z!==null&&(z=z.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),p=tt.hasEagerState?tt.eagerState:i(p,tt.action);else{var dt={lane:ct,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};z===null?(F=z=dt,C=p):z=z.next=dt,ze.lanes|=ct,iu|=ct}tt=tt.next}while(tt!==null&&tt!==w);z===null?C=p:z.next=F,pr(p,r.memoizedState)||(qi=!0),r.memoizedState=p,r.baseState=C,r.baseQueue=z,h.lastRenderedState=p}if(i=h.interleaved,i!==null){v=i;do w=v.lane,ze.lanes|=w,iu|=w,v=v.next;while(v!==i)}else v===null&&(h.lanes=0);return[r.memoizedState,h.dispatch]}function yv(i){var r=Fs(),h=r.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=i;var p=h.dispatch,v=h.pending,w=r.memoizedState;if(v!==null){h.pending=null;var C=v=v.next;do w=i(w,C.action),C=C.next;while(C!==v);pr(w,r.memoizedState)||(qi=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),h.lastRenderedState=w}return[w,p]}function jA(){}function qA(i,r){var h=ze,p=Fs(),v=r(),w=!pr(p.memoizedState,v);if(w&&(p.memoizedState=v,qi=!0),p=p.queue,vv(UA.bind(null,h,p,i),[i]),p.getSnapshot!==r||w||En!==null&&En.memoizedState.tag&1){if(h.flags|=2048,hf(9,zA.bind(null,h,p,v,r),void 0,null),Sn===null)throw Error(e(349));(nu&30)!==0||HA(h,r,v)}return v}function HA(i,r,h){i.flags|=16384,i={getSnapshot:r,value:h},r=ze.updateQueue,r===null?(r={lastEffect:null,stores:null},ze.updateQueue=r,r.stores=[i]):(h=r.stores,h===null?r.stores=[i]:h.push(i))}function zA(i,r,h,p){r.value=h,r.getSnapshot=p,$A(r)&&GA(i)}function UA(i,r,h){return h(function(){$A(r)&&GA(i)})}function $A(i){var r=i.getSnapshot;i=i.value;try{var h=r();return!pr(i,h)}catch{return!0}}function GA(i){var r=Ho(i,1);r!==null&&br(r,i,1,-1)}function VA(i){var r=Jr();return typeof i=="function"&&(i=i()),r.memoizedState=r.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:i},r.queue=i,i=i.dispatch=nN.bind(null,ze,i),[r.memoizedState,i]}function hf(i,r,h,p){return i={tag:i,create:r,destroy:h,deps:p,next:null},r=ze.updateQueue,r===null?(r={lastEffect:null,stores:null},ze.updateQueue=r,r.lastEffect=i.next=i):(h=r.lastEffect,h===null?r.lastEffect=i.next=i:(p=h.next,h.next=i,i.next=p,r.lastEffect=i)),i}function WA(){return Fs().memoizedState}function gm(i,r,h,p){var v=Jr();ze.flags|=i,v.memoizedState=hf(1|r,h,void 0,p===void 0?null:p)}function mm(i,r,h,p){var v=Fs();p=p===void 0?null:p;var w=void 0;if(fn!==null){var C=fn.memoizedState;if(w=C.destroy,p!==null&&fv(p,C.deps)){v.memoizedState=hf(r,h,w,p);return}}ze.flags|=i,v.memoizedState=hf(1|r,h,w,p)}function XA(i,r){return gm(8390656,8,i,r)}function vv(i,r){return mm(2048,8,i,r)}function YA(i,r){return mm(4,2,i,r)}function KA(i,r){return mm(4,4,i,r)}function QA(i,r){if(typeof r=="function")return i=i(),r(i),function(){r(null)};if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function ZA(i,r,h){return h=h!=null?h.concat([i]):null,mm(4,4,QA.bind(null,r,i),h)}function bv(){}function JA(i,r){var h=Fs();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&fv(r,p[1])?p[0]:(h.memoizedState=[i,r],i)}function t_(i,r){var h=Fs();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&fv(r,p[1])?p[0]:(i=i(),h.memoizedState=[i,r],i)}function e_(i,r,h){return(nu&21)===0?(i.baseState&&(i.baseState=!1,qi=!0),i.memoizedState=h):(pr(h,r)||(h=Mc(),ze.lanes|=h,iu|=h,i.baseState=!0),r)}function tN(i,r){var h=Wt;Wt=h!==0&&4>h?h:4,i(!0);var p=dv.transition;dv.transition={};try{i(!1),r()}finally{Wt=h,dv.transition=p}}function n_(){return Fs().memoizedState}function eN(i,r,h){var p=Ya(i);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},i_(i))s_(r,h);else if(h=OA(i,r,h,p),h!==null){var v=bi();br(h,i,p,v),r_(h,r,p)}}function nN(i,r,h){var p=Ya(i),v={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(i_(i))s_(r,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var C=r.lastRenderedState,F=w(C,h);if(v.hasEagerState=!0,v.eagerState=F,pr(F,C)){var z=r.interleaved;z===null?(v.next=v,ov(r)):(v.next=z.next,z.next=v),r.interleaved=v;return}}catch{}finally{}h=OA(i,r,v,p),h!==null&&(v=bi(),br(h,i,p,v),r_(h,r,p))}}function i_(i){var r=i.alternate;return i===ze||r!==null&&r===ze}function s_(i,r){lf=pm=!0;var h=i.pending;h===null?r.next=r:(r.next=h.next,h.next=r),i.pending=r}function r_(i,r,h){if((h&4194240)!==0){var p=r.lanes;p&=i.pendingLanes,h|=p,r.lanes=h,dr(i,h)}}var ym={readContext:Ds,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},iN={readContext:Ds,useCallback:function(i,r){return Jr().memoizedState=[i,r===void 0?null:r],i},useContext:Ds,useEffect:XA,useImperativeHandle:function(i,r,h){return h=h!=null?h.concat([i]):null,gm(4194308,4,QA.bind(null,r,i),h)},useLayoutEffect:function(i,r){return gm(4194308,4,i,r)},useInsertionEffect:function(i,r){return gm(4,2,i,r)},useMemo:function(i,r){var h=Jr();return r=r===void 0?null:r,i=i(),h.memoizedState=[i,r],i},useReducer:function(i,r,h){var p=Jr();return r=h!==void 0?h(r):r,p.memoizedState=p.baseState=r,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:r},p.queue=i,i=i.dispatch=eN.bind(null,ze,i),[p.memoizedState,i]},useRef:function(i){var r=Jr();return i={current:i},r.memoizedState=i},useState:VA,useDebugValue:bv,useDeferredValue:function(i){return Jr().memoizedState=i},useTransition:function(){var i=VA(!1),r=i[0];return i=tN.bind(null,i[1]),Jr().memoizedState=i,[r,i]},useMutableSource:function(){},useSyncExternalStore:function(i,r,h){var p=ze,v=Jr();if(De){if(h===void 0)throw Error(e(407));h=h()}else{if(h=r(),Sn===null)throw Error(e(349));(nu&30)!==0||HA(p,r,h)}v.memoizedState=h;var w={value:h,getSnapshot:r};return v.queue=w,XA(UA.bind(null,p,w,i),[i]),p.flags|=2048,hf(9,zA.bind(null,p,w,h,r),void 0,null),h},useId:function(){var i=Jr(),r=Sn.identifierPrefix;if(De){var h=qo,p=jo;h=(p&~(1<<32-mi(p)-1)).toString(32)+h,r=":"+r+"R"+h,h=uf++,0<h&&(r+="H"+h.toString(32)),r+=":"}else h=Jk++,r=":"+r+"r"+h.toString(32)+":";return i.memoizedState=r},unstable_isNewReconciler:!1},sN={readContext:Ds,useCallback:JA,useContext:Ds,useEffect:vv,useImperativeHandle:ZA,useInsertionEffect:YA,useLayoutEffect:KA,useMemo:t_,useReducer:mv,useRef:WA,useState:function(){return mv(cf)},useDebugValue:bv,useDeferredValue:function(i){var r=Fs();return e_(r,fn.memoizedState,i)},useTransition:function(){var i=mv(cf)[0],r=Fs().memoizedState;return[i,r]},useMutableSource:jA,useSyncExternalStore:qA,useId:n_,unstable_isNewReconciler:!1},rN={readContext:Ds,useCallback:JA,useContext:Ds,useEffect:vv,useImperativeHandle:ZA,useInsertionEffect:YA,useLayoutEffect:KA,useMemo:t_,useReducer:yv,useRef:WA,useState:function(){return yv(cf)},useDebugValue:bv,useDeferredValue:function(i){var r=Fs();return fn===null?r.memoizedState=i:e_(r,fn.memoizedState,i)},useTransition:function(){var i=yv(cf)[0],r=Fs().memoizedState;return[i,r]},useMutableSource:jA,useSyncExternalStore:qA,useId:n_,unstable_isNewReconciler:!1};function mr(i,r){if(i&&i.defaultProps){r=J({},r),i=i.defaultProps;for(var h in i)r[h]===void 0&&(r[h]=i[h]);return r}return r}function wv(i,r,h,p){r=i.memoizedState,h=h(p,r),h=h==null?r:J({},r,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var vm={isMounted:function(i){return(i=i._reactInternals)?Mi(i)===i:!1},enqueueSetState:function(i,r,h){i=i._reactInternals;var p=bi(),v=Ya(i),w=zo(p,v);w.payload=r,h!=null&&(w.callback=h),r=Ga(i,w,v),r!==null&&(br(r,i,v,p),cm(r,i,v))},enqueueReplaceState:function(i,r,h){i=i._reactInternals;var p=bi(),v=Ya(i),w=zo(p,v);w.tag=1,w.payload=r,h!=null&&(w.callback=h),r=Ga(i,w,v),r!==null&&(br(r,i,v,p),cm(r,i,v))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var h=bi(),p=Ya(i),v=zo(h,p);v.tag=2,r!=null&&(v.callback=r),r=Ga(i,v,p),r!==null&&(br(r,i,p,h),cm(r,i,p))}};function o_(i,r,h,p,v,w,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,C):r.prototype&&r.prototype.isPureReactComponent?!Kd(h,p)||!Kd(v,w):!0}function a_(i,r,h){var p=!1,v=za,w=r.contextType;return typeof w=="object"&&w!==null?w=Ds(w):(v=ji(r)?Ql:Wn.current,p=r.contextTypes,w=(p=p!=null)?Wc(i,v):za),r=new r(h,w),i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=vm,i.stateNode=r,r._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),r}function l_(i,r,h,p){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,p),r.state!==i&&vm.enqueueReplaceState(r,r.state,null)}function Av(i,r,h,p){var v=i.stateNode;v.props=h,v.state=i.memoizedState,v.refs={},av(i);var w=r.contextType;typeof w=="object"&&w!==null?v.context=Ds(w):(w=ji(r)?Ql:Wn.current,v.context=Wc(i,w)),v.state=i.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(wv(i,r,w,h),v.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(r=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),r!==v.state&&vm.enqueueReplaceState(v,v.state,null),hm(i,h,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function eh(i,r){try{var h="",p=r;do h+=at(p),p=p.return;while(p);var v=h}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:r,stack:v,digest:null}}function _v(i,r,h){return{value:i,source:null,stack:h??null,digest:r??null}}function Ev(i,r){try{console.error(r.value)}catch(h){setTimeout(function(){throw h})}}var oN=typeof WeakMap=="function"?WeakMap:Map;function u_(i,r,h){h=zo(-1,h),h.tag=3,h.payload={element:null};var p=r.value;return h.callback=function(){Tm||(Tm=!0,Bv=p),Ev(i,r)},h}function c_(i,r,h){h=zo(-1,h),h.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=r.value;h.payload=function(){return p(v)},h.callback=function(){Ev(i,r)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){Ev(i,r),typeof p!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})}),h}function h_(i,r,h){var p=i.pingCache;if(p===null){p=i.pingCache=new oN;var v=new Set;p.set(r,v)}else v=p.get(r),v===void 0&&(v=new Set,p.set(r,v));v.has(h)||(v.add(h),i=wN.bind(null,i,r,h),r.then(i,i))}function d_(i){do{var r;if((r=i.tag===13)&&(r=i.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return i;i=i.return}while(i!==null);return null}function f_(i,r,h,p,v){return(i.mode&1)===0?(i===r?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(r=zo(-1,1),r.tag=2,Ga(h,r,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var aN=j.ReactCurrentOwner,qi=!1;function vi(i,r,h,p){r.child=i===null?IA(r,null,h,p):Qc(r,i.child,h,p)}function p_(i,r,h,p,v){h=h.render;var w=r.ref;return Jc(r,v),p=pv(i,r,h,p,w,v),h=gv(),i!==null&&!qi?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~v,Uo(i,r,v)):(De&&h&&Qy(r),r.flags|=1,vi(i,r,p,v),r.child)}function g_(i,r,h,p,v){if(i===null){var w=h.type;return typeof w=="function"&&!Gv(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(r.tag=15,r.type=w,m_(i,r,w,p,v)):(i=Rm(h.type,null,p,r,r.mode,v),i.ref=r.ref,i.return=r,r.child=i)}if(w=i.child,(i.lanes&v)===0){var C=w.memoizedProps;if(h=h.compare,h=h!==null?h:Kd,h(C,p)&&i.ref===r.ref)return Uo(i,r,v)}return r.flags|=1,i=Qa(w,p),i.ref=r.ref,i.return=r,r.child=i}function m_(i,r,h,p,v){if(i!==null){var w=i.memoizedProps;if(Kd(w,p)&&i.ref===r.ref)if(qi=!1,r.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(qi=!0);else return r.lanes=i.lanes,Uo(i,r,v)}return Sv(i,r,h,p,v)}function y_(i,r,h){var p=r.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(ih,os),os|=h;else{if((h&1073741824)===0)return i=w!==null?w.baseLanes|h:h,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:i,cachePool:null,transitions:null},r.updateQueue=null,Te(ih,os),os|=i,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,Te(ih,os),os|=p}else w!==null?(p=w.baseLanes|h,r.memoizedState=null):p=h,Te(ih,os),os|=p;return vi(i,r,v,h),r.child}function v_(i,r){var h=r.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(r.flags|=512,r.flags|=2097152)}function Sv(i,r,h,p,v){var w=ji(h)?Ql:Wn.current;return w=Wc(r,w),Jc(r,v),h=pv(i,r,h,p,w,v),p=gv(),i!==null&&!qi?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~v,Uo(i,r,v)):(De&&p&&Qy(r),r.flags|=1,vi(i,r,h,v),r.child)}function b_(i,r,h,p,v){if(ji(h)){var w=!0;nm(r)}else w=!1;if(Jc(r,v),r.stateNode===null)wm(i,r),a_(r,h,p),Av(r,h,p,v),p=!0;else if(i===null){var C=r.stateNode,F=r.memoizedProps;C.props=F;var z=C.context,tt=h.contextType;typeof tt=="object"&&tt!==null?tt=Ds(tt):(tt=ji(h)?Ql:Wn.current,tt=Wc(r,tt));var ct=h.getDerivedStateFromProps,dt=typeof ct=="function"||typeof C.getSnapshotBeforeUpdate=="function";dt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==p||z!==tt)&&l_(r,C,p,tt),$a=!1;var ut=r.memoizedState;C.state=ut,hm(r,p,C,v),z=r.memoizedState,F!==p||ut!==z||Bi.current||$a?(typeof ct=="function"&&(wv(r,h,ct,p),z=r.memoizedState),(F=$a||o_(r,h,F,p,ut,z,tt))?(dt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(r.flags|=4194308)):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=z),C.props=p,C.state=z,C.context=tt,p=F):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{C=r.stateNode,MA(i,r),F=r.memoizedProps,tt=r.type===r.elementType?F:mr(r.type,F),C.props=tt,dt=r.pendingProps,ut=C.context,z=h.contextType,typeof z=="object"&&z!==null?z=Ds(z):(z=ji(h)?Ql:Wn.current,z=Wc(r,z));var _t=h.getDerivedStateFromProps;(ct=typeof _t=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==dt||ut!==z)&&l_(r,C,p,z),$a=!1,ut=r.memoizedState,C.state=ut,hm(r,p,C,v);var Ct=r.memoizedState;F!==dt||ut!==Ct||Bi.current||$a?(typeof _t=="function"&&(wv(r,h,_t,p),Ct=r.memoizedState),(tt=$a||o_(r,h,tt,p,ut,Ct,z)||!1)?(ct||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,Ct,z),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,Ct,z)),typeof C.componentDidUpdate=="function"&&(r.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===i.memoizedProps&&ut===i.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&ut===i.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=Ct),C.props=p,C.state=Ct,C.context=z,p=tt):(typeof C.componentDidUpdate!="function"||F===i.memoizedProps&&ut===i.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&ut===i.memoizedState||(r.flags|=1024),p=!1)}return Tv(i,r,h,p,w,v)}function Tv(i,r,h,p,v,w){v_(i,r);var C=(r.flags&128)!==0;if(!p&&!C)return v&&SA(r,h,!1),Uo(i,r,w);p=r.stateNode,aN.current=r;var F=C&&typeof h.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,i!==null&&C?(r.child=Qc(r,i.child,null,w),r.child=Qc(r,null,F,w)):vi(i,r,F,w),r.memoizedState=p.state,v&&SA(r,h,!0),r.child}function w_(i){var r=i.stateNode;r.pendingContext?_A(i,r.pendingContext,r.pendingContext!==r.context):r.context&&_A(i,r.context,!1),lv(i,r.containerInfo)}function A_(i,r,h,p,v){return Kc(),ev(v),r.flags|=256,vi(i,r,h,p),r.child}var xv={dehydrated:null,treeContext:null,retryLane:0};function Cv(i){return{baseLanes:i,cachePool:null,transitions:null}}function __(i,r,h){var p=r.pendingProps,v=He.current,w=!1,C=(r.flags&128)!==0,F;if((F=C)||(F=i!==null&&i.memoizedState===null?!1:(v&2)!==0),F?(w=!0,r.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),Te(He,v&1),i===null)return tv(r),i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((r.mode&1)===0?r.lanes=1:i.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(C=p.children,i=p.fallback,w?(p=r.mode,w=r.child,C={mode:"hidden",children:C},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=C):w=Pm(C,p,0,null),i=au(i,p,h,null),w.return=r,i.return=r,w.sibling=i,r.child=w,r.child.memoizedState=Cv(h),r.memoizedState=xv,i):kv(r,C));if(v=i.memoizedState,v!==null&&(F=v.dehydrated,F!==null))return lN(i,r,C,p,F,v,h);if(w){w=p.fallback,C=r.mode,v=i.child,F=v.sibling;var z={mode:"hidden",children:p.children};return(C&1)===0&&r.child!==v?(p=r.child,p.childLanes=0,p.pendingProps=z,r.deletions=null):(p=Qa(v,z),p.subtreeFlags=v.subtreeFlags&14680064),F!==null?w=Qa(F,w):(w=au(w,C,h,null),w.flags|=2),w.return=r,p.return=r,p.sibling=w,r.child=p,p=w,w=r.child,C=i.child.memoizedState,C=C===null?Cv(h):{baseLanes:C.baseLanes|h,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=i.childLanes&~h,r.memoizedState=xv,p}return w=i.child,i=w.sibling,p=Qa(w,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=h),p.return=r,p.sibling=null,i!==null&&(h=r.deletions,h===null?(r.deletions=[i],r.flags|=16):h.push(i)),r.child=p,r.memoizedState=null,p}function kv(i,r){return r=Pm({mode:"visible",children:r},i.mode,0,null),r.return=i,i.child=r}function bm(i,r,h,p){return p!==null&&ev(p),Qc(r,i.child,null,h),i=kv(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function lN(i,r,h,p,v,w,C){if(h)return r.flags&256?(r.flags&=-257,p=_v(Error(e(422))),bm(i,r,C,p)):r.memoizedState!==null?(r.child=i.child,r.flags|=128,null):(w=p.fallback,v=r.mode,p=Pm({mode:"visible",children:p.children},v,0,null),w=au(w,v,C,null),w.flags|=2,p.return=r,w.return=r,p.sibling=w,r.child=p,(r.mode&1)!==0&&Qc(r,i.child,null,C),r.child.memoizedState=Cv(C),r.memoizedState=xv,w);if((r.mode&1)===0)return bm(i,r,C,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var F=p.dgst;return p=F,w=Error(e(419)),p=_v(w,p,void 0),bm(i,r,C,p)}if(F=(C&i.childLanes)!==0,qi||F){if(p=Sn,p!==null){switch(C&-C){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|C))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,Ho(i,v),br(p,i,v,-1))}return $v(),p=_v(Error(e(421))),bm(i,r,C,p)}return v.data==="$?"?(r.flags|=128,r.child=i.child,r=AN.bind(null,i),v._reactRetry=r,null):(i=w.treeContext,rs=qa(v.nextSibling),ss=r,De=!0,gr=null,i!==null&&(Os[Ms++]=jo,Os[Ms++]=qo,Os[Ms++]=Zl,jo=i.id,qo=i.overflow,Zl=r),r=kv(r,p.children),r.flags|=4096,r)}function E_(i,r,h){i.lanes|=r;var p=i.alternate;p!==null&&(p.lanes|=r),rv(i.return,r,h)}function Nv(i,r,h,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=v)}function S_(i,r,h){var p=r.pendingProps,v=p.revealOrder,w=p.tail;if(vi(i,r,p.children,h),p=He.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&E_(i,h,r);else if(i.tag===19)E_(i,h,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Te(He,p),(r.mode&1)===0)r.memoizedState=null;else switch(v){case"forwards":for(h=r.child,v=null;h!==null;)i=h.alternate,i!==null&&dm(i)===null&&(v=h),h=h.sibling;h=v,h===null?(v=r.child,r.child=null):(v=h.sibling,h.sibling=null),Nv(r,!1,v,h,w);break;case"backwards":for(h=null,v=r.child,r.child=null;v!==null;){if(i=v.alternate,i!==null&&dm(i)===null){r.child=v;break}i=v.sibling,v.sibling=h,h=v,v=i}Nv(r,!0,h,null,w);break;case"together":Nv(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function wm(i,r){(r.mode&1)===0&&i!==null&&(i.alternate=null,r.alternate=null,r.flags|=2)}function Uo(i,r,h){if(i!==null&&(r.dependencies=i.dependencies),iu|=r.lanes,(h&r.childLanes)===0)return null;if(i!==null&&r.child!==i.child)throw Error(e(153));if(r.child!==null){for(i=r.child,h=Qa(i,i.pendingProps),r.child=h,h.return=r;i.sibling!==null;)i=i.sibling,h=h.sibling=Qa(i,i.pendingProps),h.return=r;h.sibling=null}return r.child}function uN(i,r,h){switch(r.tag){case 3:w_(r),Kc();break;case 5:BA(r);break;case 1:ji(r.type)&&nm(r);break;case 4:lv(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,v=r.memoizedProps.value;Te(lm,p._currentValue),p._currentValue=v;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(Te(He,He.current&1),r.flags|=128,null):(h&r.child.childLanes)!==0?__(i,r,h):(Te(He,He.current&1),i=Uo(i,r,h),i!==null?i.sibling:null);Te(He,He.current&1);break;case 19:if(p=(h&r.childLanes)!==0,(i.flags&128)!==0){if(p)return S_(i,r,h);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Te(He,He.current),p)break;return null;case 22:case 23:return r.lanes=0,y_(i,r,h)}return Uo(i,r,h)}var T_,Lv,x_,C_;T_=function(i,r){for(var h=r.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break;for(;h.sibling===null;){if(h.return===null||h.return===r)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Lv=function(){},x_=function(i,r,h,p){var v=i.memoizedProps;if(v!==p){i=r.stateNode,eu(Zr.current);var w=null;switch(h){case"input":v=pe(i,v),p=pe(i,p),w=[];break;case"select":v=J({},v,{value:void 0}),p=J({},p,{value:void 0}),w=[];break;case"textarea":v=Ur(i,v),p=Ur(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Jg)}xs(h,p);var C;h=null;for(tt in v)if(!p.hasOwnProperty(tt)&&v.hasOwnProperty(tt)&&v[tt]!=null)if(tt==="style"){var F=v[tt];for(C in F)F.hasOwnProperty(C)&&(h||(h={}),h[C]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(s.hasOwnProperty(tt)?w||(w=[]):(w=w||[]).push(tt,null));for(tt in p){var z=p[tt];if(F=v!=null?v[tt]:void 0,p.hasOwnProperty(tt)&&z!==F&&(z!=null||F!=null))if(tt==="style")if(F){for(C in F)!F.hasOwnProperty(C)||z&&z.hasOwnProperty(C)||(h||(h={}),h[C]="");for(C in z)z.hasOwnProperty(C)&&F[C]!==z[C]&&(h||(h={}),h[C]=z[C])}else h||(w||(w=[]),w.push(tt,h)),h=z;else tt==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,F=F?F.__html:void 0,z!=null&&F!==z&&(w=w||[]).push(tt,z)):tt==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(tt,""+z):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(s.hasOwnProperty(tt)?(z!=null&&tt==="onScroll"&&Le("scroll",i),w||F===z||(w=[])):(w=w||[]).push(tt,z))}h&&(w=w||[]).push("style",h);var tt=w;(r.updateQueue=tt)&&(r.flags|=4)}},C_=function(i,r,h,p){h!==p&&(r.flags|=4)};function df(i,r){if(!De)switch(i.tailMode){case"hidden":r=i.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Yn(i){var r=i.alternate!==null&&i.alternate.child===i.child,h=0,p=0;if(r)for(var v=i.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=h,r}function cN(i,r,h){var p=r.pendingProps;switch(Zy(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(r),null;case 1:return ji(r.type)&&em(),Yn(r),null;case 3:return p=r.stateNode,th(),Re(Bi),Re(Wn),hv(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(om(r)?r.flags|=4:i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gr!==null&&(Hv(gr),gr=null))),Lv(i,r),Yn(r),null;case 5:uv(r);var v=eu(af.current);if(h=r.type,i!==null&&r.stateNode!=null)x_(i,r,h,p,v),i.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(e(166));return Yn(r),null}if(i=eu(Zr.current),om(r)){p=r.stateNode,h=r.type;var w=r.memoizedProps;switch(p[Qr]=r,p[ef]=w,i=(r.mode&1)!==0,h){case"dialog":Le("cancel",p),Le("close",p);break;case"iframe":case"object":case"embed":Le("load",p);break;case"video":case"audio":for(v=0;v<Zd.length;v++)Le(Zd[v],p);break;case"source":Le("error",p);break;case"img":case"image":case"link":Le("error",p),Le("load",p);break;case"details":Le("toggle",p);break;case"input":qe(p,w),Le("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},Le("invalid",p);break;case"textarea":sr(p,w),Le("invalid",p)}xs(h,w),v=null;for(var C in w)if(w.hasOwnProperty(C)){var F=w[C];C==="children"?typeof F=="string"?p.textContent!==F&&(w.suppressHydrationWarning!==!0&&Zg(p.textContent,F,i),v=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(w.suppressHydrationWarning!==!0&&Zg(p.textContent,F,i),v=["children",""+F]):s.hasOwnProperty(C)&&F!=null&&C==="onScroll"&&Le("scroll",p)}switch(h){case"input":te(p),ir(p,w,!0);break;case"textarea":te(p),Un(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Jg)}p=v,r.updateQueue=p,p!==null&&(r.flags|=4)}else{C=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Qi(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(h,{is:p.is}):(i=C.createElement(h),h==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,h),i[Qr]=r,i[ef]=p,T_(i,r,!1,!1),r.stateNode=i;t:{switch(C=Ii(h,p),h){case"dialog":Le("cancel",i),Le("close",i),v=p;break;case"iframe":case"object":case"embed":Le("load",i),v=p;break;case"video":case"audio":for(v=0;v<Zd.length;v++)Le(Zd[v],i);v=p;break;case"source":Le("error",i),v=p;break;case"img":case"image":case"link":Le("error",i),Le("load",i),v=p;break;case"details":Le("toggle",i),v=p;break;case"input":qe(i,p),v=pe(i,p),Le("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=J({},p,{value:void 0}),Le("invalid",i);break;case"textarea":sr(i,p),v=Ur(i,p),Le("invalid",i);break;default:v=p}xs(h,v),F=v;for(w in F)if(F.hasOwnProperty(w)){var z=F[w];w==="style"?wn(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&rr(i,z)):w==="children"?typeof z=="string"?(h!=="textarea"||z!=="")&&Ve(i,z):typeof z=="number"&&Ve(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?z!=null&&w==="onScroll"&&Le("scroll",i):z!=null&&B(i,w,z,C))}switch(h){case"input":te(i),ir(i,p,!1);break;case"textarea":te(i),Un(i);break;case"option":p.value!=null&&i.setAttribute("value",""+bt(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?ui(i,!!p.multiple,w,!1):p.defaultValue!=null&&ui(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=Jg)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Yn(r),null;case 6:if(i&&r.stateNode!=null)C_(i,r,i.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(e(166));if(h=eu(af.current),eu(Zr.current),om(r)){if(p=r.stateNode,h=r.memoizedProps,p[Qr]=r,(w=p.nodeValue!==h)&&(i=ss,i!==null))switch(i.tag){case 3:Zg(p.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Zg(p.nodeValue,h,(i.mode&1)!==0)}w&&(r.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Qr]=r,r.stateNode=p}return Yn(r),null;case 13:if(Re(He),p=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(De&&rs!==null&&(r.mode&1)!==0&&(r.flags&128)===0)LA(),Kc(),r.flags|=98560,w=!1;else if(w=om(r),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(e(318));if(w=r.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(e(317));w[Qr]=r}else Kc(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yn(r),w=!1}else gr!==null&&(Hv(gr),gr=null),w=!0;if(!w)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=h,r):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(i===null||(He.current&1)!==0?pn===0&&(pn=3):$v())),r.updateQueue!==null&&(r.flags|=4),Yn(r),null);case 4:return th(),Lv(i,r),i===null&&Jd(r.stateNode.containerInfo),Yn(r),null;case 10:return sv(r.type._context),Yn(r),null;case 17:return ji(r.type)&&em(),Yn(r),null;case 19:if(Re(He),w=r.memoizedState,w===null)return Yn(r),null;if(p=(r.flags&128)!==0,C=w.rendering,C===null)if(p)df(w,!1);else{if(pn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(C=dm(i),C!==null){for(r.flags|=128,df(w,!1),p=C.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=h,h=r.child;h!==null;)w=h,i=p,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,i=C.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return Te(He,He.current&1|2),r.child}i=i.sibling}w.tail!==null&&Gt()>sh&&(r.flags|=128,p=!0,df(w,!1),r.lanes=4194304)}else{if(!p)if(i=dm(C),i!==null){if(r.flags|=128,p=!0,h=i.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),df(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!De)return Yn(r),null}else 2*Gt()-w.renderingStartTime>sh&&h!==1073741824&&(r.flags|=128,p=!0,df(w,!1),r.lanes=4194304);w.isBackwards?(C.sibling=r.child,r.child=C):(h=w.last,h!==null?h.sibling=C:r.child=C,w.last=C)}return w.tail!==null?(r=w.tail,w.rendering=r,w.tail=r.sibling,w.renderingStartTime=Gt(),r.sibling=null,h=He.current,Te(He,p?h&1|2:h&1),r):(Yn(r),null);case 22:case 23:return Uv(),p=r.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(os&1073741824)!==0&&(Yn(r),r.subtreeFlags&6&&(r.flags|=8192)):Yn(r),null;case 24:return null;case 25:return null}throw Error(e(156,r.tag))}function hN(i,r){switch(Zy(r),r.tag){case 1:return ji(r.type)&&em(),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return th(),Re(Bi),Re(Wn),hv(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 5:return uv(r),null;case 13:if(Re(He),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(e(340));Kc()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Re(He),null;case 4:return th(),null;case 10:return sv(r.type._context),null;case 22:case 23:return Uv(),null;case 24:return null;default:return null}}var Am=!1,Kn=!1,dN=typeof WeakSet=="function"?WeakSet:Set,St=null;function nh(i,r){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Ke(i,r,p)}else h.current=null}function Rv(i,r,h){try{h()}catch(p){Ke(i,r,p)}}var k_=!1;function fN(i,r){if(Uy=R,i=oA(),My(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else t:{h=(h=i.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break t}var C=0,F=-1,z=-1,tt=0,ct=0,dt=i,ut=null;e:for(;;){for(var _t;dt!==h||v!==0&&dt.nodeType!==3||(F=C+v),dt!==w||p!==0&&dt.nodeType!==3||(z=C+p),dt.nodeType===3&&(C+=dt.nodeValue.length),(_t=dt.firstChild)!==null;)ut=dt,dt=_t;for(;;){if(dt===i)break e;if(ut===h&&++tt===v&&(F=C),ut===w&&++ct===p&&(z=C),(_t=dt.nextSibling)!==null)break;dt=ut,ut=dt.parentNode}dt=_t}h=F===-1||z===-1?null:{start:F,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for($y={focusedElem:i,selectionRange:h},R=!1,St=r;St!==null;)if(r=St,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,St=i;else for(;St!==null;){r=St;try{var Ct=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var Lt=Ct.memoizedProps,en=Ct.memoizedState,Y=r.stateNode,G=Y.getSnapshotBeforeUpdate(r.elementType===r.type?Lt:mr(r.type,Lt),en);Y.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Q=r.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(pt){Ke(r,r.return,pt)}if(i=r.sibling,i!==null){i.return=r.return,St=i;break}St=r.return}return Ct=k_,k_=!1,Ct}function ff(i,r,h){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&Rv(r,h,w)}v=v.next}while(v!==p)}}function _m(i,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var h=r=r.next;do{if((h.tag&i)===i){var p=h.create;h.destroy=p()}h=h.next}while(h!==r)}}function Pv(i){var r=i.ref;if(r!==null){var h=i.stateNode;switch(i.tag){case 5:i=h;break;default:i=h}typeof r=="function"?r(i):r.current=i}}function N_(i){var r=i.alternate;r!==null&&(i.alternate=null,N_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&(delete r[Qr],delete r[ef],delete r[Xy],delete r[Yk],delete r[Kk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function L_(i){return i.tag===5||i.tag===3||i.tag===4}function R_(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||L_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Iv(i,r,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?h.nodeType===8?h.parentNode.insertBefore(i,r):h.insertBefore(i,r):(h.nodeType===8?(r=h.parentNode,r.insertBefore(i,h)):(r=h,r.appendChild(i)),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=Jg));else if(p!==4&&(i=i.child,i!==null))for(Iv(i,r,h),i=i.sibling;i!==null;)Iv(i,r,h),i=i.sibling}function Ov(i,r,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?h.insertBefore(i,r):h.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Ov(i,r,h),i=i.sibling;i!==null;)Ov(i,r,h),i=i.sibling}var On=null,yr=!1;function Va(i,r,h){for(h=h.child;h!==null;)P_(i,r,h),h=h.sibling}function P_(i,r,h){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(Vr,h)}catch{}switch(h.tag){case 5:Kn||nh(h,r);case 6:var p=On,v=yr;On=null,Va(i,r,h),On=p,yr=v,On!==null&&(yr?(i=On,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):On.removeChild(h.stateNode));break;case 18:On!==null&&(yr?(i=On,h=h.stateNode,i.nodeType===8?Wy(i.parentNode,h):i.nodeType===1&&Wy(i,h),Do(i)):Wy(On,h.stateNode));break;case 4:p=On,v=yr,On=h.stateNode.containerInfo,yr=!0,Va(i,r,h),On=p,yr=v;break;case 0:case 11:case 14:case 15:if(!Kn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,C=w.destroy;w=w.tag,C!==void 0&&((w&2)!==0||(w&4)!==0)&&Rv(h,r,C),v=v.next}while(v!==p)}Va(i,r,h);break;case 1:if(!Kn&&(nh(h,r),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(F){Ke(h,r,F)}Va(i,r,h);break;case 21:Va(i,r,h);break;case 22:h.mode&1?(Kn=(p=Kn)||h.memoizedState!==null,Va(i,r,h),Kn=p):Va(i,r,h);break;default:Va(i,r,h)}}function I_(i){var r=i.updateQueue;if(r!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new dN),r.forEach(function(p){var v=_N.bind(null,i,p);h.has(p)||(h.add(p),p.then(v,v))})}}function vr(i,r){var h=r.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p];try{var w=i,C=r,F=C;t:for(;F!==null;){switch(F.tag){case 5:On=F.stateNode,yr=!1;break t;case 3:On=F.stateNode.containerInfo,yr=!0;break t;case 4:On=F.stateNode.containerInfo,yr=!0;break t}F=F.return}if(On===null)throw Error(e(160));P_(w,C,v),On=null,yr=!1;var z=v.alternate;z!==null&&(z.return=null),v.return=null}catch(tt){Ke(v,r,tt)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)O_(r,i),r=r.sibling}function O_(i,r){var h=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(vr(r,i),to(i),p&4){try{ff(3,i,i.return),_m(3,i)}catch(Lt){Ke(i,i.return,Lt)}try{ff(5,i,i.return)}catch(Lt){Ke(i,i.return,Lt)}}break;case 1:vr(r,i),to(i),p&512&&h!==null&&nh(h,h.return);break;case 5:if(vr(r,i),to(i),p&512&&h!==null&&nh(h,h.return),i.flags&32){var v=i.stateNode;try{Ve(v,"")}catch(Lt){Ke(i,i.return,Lt)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,C=h!==null?h.memoizedProps:w,F=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{F==="input"&&w.type==="radio"&&w.name!=null&&Ss(v,w),Ii(F,C);var tt=Ii(F,w);for(C=0;C<z.length;C+=2){var ct=z[C],dt=z[C+1];ct==="style"?wn(v,dt):ct==="dangerouslySetInnerHTML"?rr(v,dt):ct==="children"?Ve(v,dt):B(v,ct,dt,tt)}switch(F){case"input":ai(v,w);break;case"textarea":dn(v,w);break;case"select":var ut=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var _t=w.value;_t!=null?ui(v,!!w.multiple,_t,!1):ut!==!!w.multiple&&(w.defaultValue!=null?ui(v,!!w.multiple,w.defaultValue,!0):ui(v,!!w.multiple,w.multiple?[]:"",!1))}v[ef]=w}catch(Lt){Ke(i,i.return,Lt)}}break;case 6:if(vr(r,i),to(i),p&4){if(i.stateNode===null)throw Error(e(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(Lt){Ke(i,i.return,Lt)}}break;case 3:if(vr(r,i),to(i),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Do(r.containerInfo)}catch(Lt){Ke(i,i.return,Lt)}break;case 4:vr(r,i),to(i);break;case 13:vr(r,i),to(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(Fv=Gt())),p&4&&I_(i);break;case 22:if(ct=h!==null&&h.memoizedState!==null,i.mode&1?(Kn=(tt=Kn)||ct,vr(r,i),Kn=tt):vr(r,i),to(i),p&8192){if(tt=i.memoizedState!==null,(i.stateNode.isHidden=tt)&&!ct&&(i.mode&1)!==0)for(St=i,ct=i.child;ct!==null;){for(dt=St=ct;St!==null;){switch(ut=St,_t=ut.child,ut.tag){case 0:case 11:case 14:case 15:ff(4,ut,ut.return);break;case 1:nh(ut,ut.return);var Ct=ut.stateNode;if(typeof Ct.componentWillUnmount=="function"){p=ut,h=ut.return;try{r=p,Ct.props=r.memoizedProps,Ct.state=r.memoizedState,Ct.componentWillUnmount()}catch(Lt){Ke(p,h,Lt)}}break;case 5:nh(ut,ut.return);break;case 22:if(ut.memoizedState!==null){F_(dt);continue}}_t!==null?(_t.return=ut,St=_t):F_(dt)}ct=ct.sibling}t:for(ct=null,dt=i;;){if(dt.tag===5){if(ct===null){ct=dt;try{v=dt.stateNode,tt?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(F=dt.stateNode,z=dt.memoizedProps.style,C=z!=null&&z.hasOwnProperty("display")?z.display:null,F.style.display=ar("display",C))}catch(Lt){Ke(i,i.return,Lt)}}}else if(dt.tag===6){if(ct===null)try{dt.stateNode.nodeValue=tt?"":dt.memoizedProps}catch(Lt){Ke(i,i.return,Lt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===i)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===i)break t;for(;dt.sibling===null;){if(dt.return===null||dt.return===i)break t;ct===dt&&(ct=null),dt=dt.return}ct===dt&&(ct=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:vr(r,i),to(i),p&4&&I_(i);break;case 21:break;default:vr(r,i),to(i)}}function to(i){var r=i.flags;if(r&2){try{t:{for(var h=i.return;h!==null;){if(L_(h)){var p=h;break t}h=h.return}throw Error(e(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Ve(v,""),p.flags&=-33);var w=R_(i);Ov(i,w,v);break;case 3:case 4:var C=p.stateNode.containerInfo,F=R_(i);Iv(i,F,C);break;default:throw Error(e(161))}}catch(z){Ke(i,i.return,z)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function pN(i,r,h){St=i,M_(i)}function M_(i,r,h){for(var p=(i.mode&1)!==0;St!==null;){var v=St,w=v.child;if(v.tag===22&&p){var C=v.memoizedState!==null||Am;if(!C){var F=v.alternate,z=F!==null&&F.memoizedState!==null||Kn;F=Am;var tt=Kn;if(Am=C,(Kn=z)&&!tt)for(St=v;St!==null;)C=St,z=C.child,C.tag===22&&C.memoizedState!==null?B_(v):z!==null?(z.return=C,St=z):B_(v);for(;w!==null;)St=w,M_(w),w=w.sibling;St=v,Am=F,Kn=tt}D_(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,St=w):D_(i)}}function D_(i){for(;St!==null;){var r=St;if((r.flags&8772)!==0){var h=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Kn||_m(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!Kn)if(h===null)p.componentDidMount();else{var v=r.elementType===r.type?h.memoizedProps:mr(r.type,h.memoizedProps);p.componentDidUpdate(v,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=r.updateQueue;w!==null&&FA(r,w,p);break;case 3:var C=r.updateQueue;if(C!==null){if(h=null,r.child!==null)switch(r.child.tag){case 5:h=r.child.stateNode;break;case 1:h=r.child.stateNode}FA(r,C,h)}break;case 5:var F=r.stateNode;if(h===null&&r.flags&4){h=F;var z=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&h.focus();break;case"img":z.src&&(h.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var tt=r.alternate;if(tt!==null){var ct=tt.memoizedState;if(ct!==null){var dt=ct.dehydrated;dt!==null&&Do(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Kn||r.flags&512&&Pv(r)}catch(ut){Ke(r,r.return,ut)}}if(r===i){St=null;break}if(h=r.sibling,h!==null){h.return=r.return,St=h;break}St=r.return}}function F_(i){for(;St!==null;){var r=St;if(r===i){St=null;break}var h=r.sibling;if(h!==null){h.return=r.return,St=h;break}St=r.return}}function B_(i){for(;St!==null;){var r=St;try{switch(r.tag){case 0:case 11:case 15:var h=r.return;try{_m(4,r)}catch(z){Ke(r,h,z)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var v=r.return;try{p.componentDidMount()}catch(z){Ke(r,v,z)}}var w=r.return;try{Pv(r)}catch(z){Ke(r,w,z)}break;case 5:var C=r.return;try{Pv(r)}catch(z){Ke(r,C,z)}}}catch(z){Ke(r,r.return,z)}if(r===i){St=null;break}var F=r.sibling;if(F!==null){F.return=r.return,St=F;break}St=r.return}}var gN=Math.ceil,Em=j.ReactCurrentDispatcher,Mv=j.ReactCurrentOwner,Bs=j.ReactCurrentBatchConfig,de=0,Sn=null,ln=null,Mn=0,os=0,ih=Ha(0),pn=0,pf=null,iu=0,Sm=0,Dv=0,gf=null,Hi=null,Fv=0,sh=1/0,$o=null,Tm=!1,Bv=null,Wa=null,xm=!1,Xa=null,Cm=0,mf=0,jv=null,km=-1,Nm=0;function bi(){return(de&6)!==0?Gt():km!==-1?km:km=Gt()}function Ya(i){return(i.mode&1)===0?1:(de&2)!==0&&Mn!==0?Mn&-Mn:Zk.transition!==null?(Nm===0&&(Nm=Mc()),Nm):(i=Wt,i!==0||(i=window.event,i=i===void 0?16:le(i.type)),i)}function br(i,r,h,p){if(50<mf)throw mf=0,jv=null,Error(e(185));Oo(i,h,p),((de&2)===0||i!==Sn)&&(i===Sn&&((de&2)===0&&(Sm|=h),pn===4&&Ka(i,Mn)),zi(i,p),h===1&&de===0&&(r.mode&1)===0&&(sh=Gt()+500,im&&Ua()))}function zi(i,r){var h=i.callbackNode;$d(i,r);var p=Po(i,i===Sn?Mn:0);if(p===0)h!==null&&wt(h),i.callbackNode=null,i.callbackPriority=0;else if(r=p&-p,i.callbackPriority!==r){if(h!=null&&wt(h),r===1)i.tag===0?Qk(q_.bind(null,i)):TA(q_.bind(null,i)),Wk(function(){(de&6)===0&&Ua()}),h=null;else{switch(Rs(p)){case 1:h=_n;break;case 4:h=gi;break;case 16:h=Ne;break;case 536870912:h=Gn;break;default:h=Ne}h=X_(h,j_.bind(null,i))}i.callbackPriority=r,i.callbackNode=h}}function j_(i,r){if(km=-1,Nm=0,(de&6)!==0)throw Error(e(327));var h=i.callbackNode;if(rh()&&i.callbackNode!==h)return null;var p=Po(i,i===Sn?Mn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||r)r=Lm(i,p);else{r=p;var v=de;de|=2;var w=z_();(Sn!==i||Mn!==r)&&($o=null,sh=Gt()+500,ru(i,r));do try{vN();break}catch(F){H_(i,F)}while(!0);iv(),Em.current=w,de=v,ln!==null?r=0:(Sn=null,Mn=0,r=pn)}if(r!==0){if(r===2&&(v=Ul(i),v!==0&&(p=v,r=qv(i,v))),r===1)throw h=pf,ru(i,0),Ka(i,p),zi(i,Gt()),h;if(r===6)Ka(i,p);else{if(v=i.current.alternate,(p&30)===0&&!mN(v)&&(r=Lm(i,p),r===2&&(w=Ul(i),w!==0&&(p=w,r=qv(i,w))),r===1))throw h=pf,ru(i,0),Ka(i,p),zi(i,Gt()),h;switch(i.finishedWork=v,i.finishedLanes=p,r){case 0:case 1:throw Error(e(345));case 2:ou(i,Hi,$o);break;case 3:if(Ka(i,p),(p&130023424)===p&&(r=Fv+500-Gt(),10<r)){if(Po(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){bi(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=Vy(ou.bind(null,i,Hi,$o),r);break}ou(i,Hi,$o);break;case 4:if(Ka(i,p),(p&4194240)===p)break;for(r=i.eventTimes,v=-1;0<p;){var C=31-mi(p);w=1<<C,C=r[C],C>v&&(v=C),p&=~w}if(p=v,p=Gt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*gN(p/1960))-p,10<p){i.timeoutHandle=Vy(ou.bind(null,i,Hi,$o),p);break}ou(i,Hi,$o);break;case 5:ou(i,Hi,$o);break;default:throw Error(e(329))}}}return zi(i,Gt()),i.callbackNode===h?j_.bind(null,i):null}function qv(i,r){var h=gf;return i.current.memoizedState.isDehydrated&&(ru(i,r).flags|=256),i=Lm(i,r),i!==2&&(r=Hi,Hi=h,r!==null&&Hv(r)),i}function Hv(i){Hi===null?Hi=i:Hi.push.apply(Hi,i)}function mN(i){for(var r=i;;){if(r.flags&16384){var h=r.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var v=h[p],w=v.getSnapshot;v=v.value;try{if(!pr(w(),v))return!1}catch{return!1}}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ka(i,r){for(r&=~Dv,r&=~Sm,i.suspendedLanes|=r,i.pingedLanes&=~r,i=i.expirationTimes;0<r;){var h=31-mi(r),p=1<<h;i[h]=-1,r&=~p}}function q_(i){if((de&6)!==0)throw Error(e(327));rh();var r=Po(i,0);if((r&1)===0)return zi(i,Gt()),null;var h=Lm(i,r);if(i.tag!==0&&h===2){var p=Ul(i);p!==0&&(r=p,h=qv(i,p))}if(h===1)throw h=pf,ru(i,0),Ka(i,r),zi(i,Gt()),h;if(h===6)throw Error(e(345));return i.finishedWork=i.current.alternate,i.finishedLanes=r,ou(i,Hi,$o),zi(i,Gt()),null}function zv(i,r){var h=de;de|=1;try{return i(r)}finally{de=h,de===0&&(sh=Gt()+500,im&&Ua())}}function su(i){Xa!==null&&Xa.tag===0&&(de&6)===0&&rh();var r=de;de|=1;var h=Bs.transition,p=Wt;try{if(Bs.transition=null,Wt=1,i)return i()}finally{Wt=p,Bs.transition=h,de=r,(de&6)===0&&Ua()}}function Uv(){os=ih.current,Re(ih)}function ru(i,r){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,Vk(h)),ln!==null)for(h=ln.return;h!==null;){var p=h;switch(Zy(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&em();break;case 3:th(),Re(Bi),Re(Wn),hv();break;case 5:uv(p);break;case 4:th();break;case 13:Re(He);break;case 19:Re(He);break;case 10:sv(p.type._context);break;case 22:case 23:Uv()}h=h.return}if(Sn=i,ln=i=Qa(i.current,null),Mn=os=r,pn=0,pf=null,Dv=Sm=iu=0,Hi=gf=null,tu!==null){for(r=0;r<tu.length;r++)if(h=tu[r],p=h.interleaved,p!==null){h.interleaved=null;var v=p.next,w=h.pending;if(w!==null){var C=w.next;w.next=v,p.next=C}h.pending=p}tu=null}return i}function H_(i,r){do{var h=ln;try{if(iv(),fm.current=ym,pm){for(var p=ze.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}pm=!1}if(nu=0,En=fn=ze=null,lf=!1,uf=0,Mv.current=null,h===null||h.return===null){pn=1,pf=r,ln=null;break}t:{var w=i,C=h.return,F=h,z=r;if(r=Mn,F.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var tt=z,ct=F,dt=ct.tag;if((ct.mode&1)===0&&(dt===0||dt===11||dt===15)){var ut=ct.alternate;ut?(ct.updateQueue=ut.updateQueue,ct.memoizedState=ut.memoizedState,ct.lanes=ut.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var _t=d_(C);if(_t!==null){_t.flags&=-257,f_(_t,C,F,w,r),_t.mode&1&&h_(w,tt,r),r=_t,z=tt;var Ct=r.updateQueue;if(Ct===null){var Lt=new Set;Lt.add(z),r.updateQueue=Lt}else Ct.add(z);break t}else{if((r&1)===0){h_(w,tt,r),$v();break t}z=Error(e(426))}}else if(De&&F.mode&1){var en=d_(C);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),f_(en,C,F,w,r),ev(eh(z,F));break t}}w=z=eh(z,F),pn!==4&&(pn=2),gf===null?gf=[w]:gf.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,r&=-r,w.lanes|=r;var Y=u_(w,z,r);DA(w,Y);break t;case 1:F=z;var G=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Wa===null||!Wa.has(Q)))){w.flags|=65536,r&=-r,w.lanes|=r;var pt=c_(w,F,r);DA(w,pt);break t}}w=w.return}while(w!==null)}$_(h)}catch(It){r=It,ln===h&&h!==null&&(ln=h=h.return);continue}break}while(!0)}function z_(){var i=Em.current;return Em.current=ym,i===null?ym:i}function $v(){(pn===0||pn===3||pn===2)&&(pn=4),Sn===null||(iu&268435455)===0&&(Sm&268435455)===0||Ka(Sn,Mn)}function Lm(i,r){var h=de;de|=2;var p=z_();(Sn!==i||Mn!==r)&&($o=null,ru(i,r));do try{yN();break}catch(v){H_(i,v)}while(!0);if(iv(),de=h,Em.current=p,ln!==null)throw Error(e(261));return Sn=null,Mn=0,pn}function yN(){for(;ln!==null;)U_(ln)}function vN(){for(;ln!==null&&!ge();)U_(ln)}function U_(i){var r=W_(i.alternate,i,os);i.memoizedProps=i.pendingProps,r===null?$_(i):ln=r,Mv.current=null}function $_(i){var r=i;do{var h=r.alternate;if(i=r.return,(r.flags&32768)===0){if(h=cN(h,r,os),h!==null){ln=h;return}}else{if(h=hN(h,r),h!==null){h.flags&=32767,ln=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{pn=6,ln=null;return}}if(r=r.sibling,r!==null){ln=r;return}ln=r=i}while(r!==null);pn===0&&(pn=5)}function ou(i,r,h){var p=Wt,v=Bs.transition;try{Bs.transition=null,Wt=1,bN(i,r,h,p)}finally{Bs.transition=v,Wt=p}return null}function bN(i,r,h,p){do rh();while(Xa!==null);if((de&6)!==0)throw Error(e(327));h=i.finishedWork;var v=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(e(177));i.callbackNode=null,i.callbackPriority=0;var w=h.lanes|h.childLanes;if(Gd(i,w),i===Sn&&(ln=Sn=null,Mn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||xm||(xm=!0,X_(Ne,function(){return rh(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=Bs.transition,Bs.transition=null;var C=Wt;Wt=1;var F=de;de|=4,Mv.current=null,fN(i,h),O_(h,i),jk($y),R=!!Uy,$y=Uy=null,i.current=h,pN(h),Xe(),de=F,Wt=C,Bs.transition=w}else i.current=h;if(xm&&(xm=!1,Xa=i,Cm=v),w=i.pendingLanes,w===0&&(Wa=null),qd(h.stateNode),zi(i,Gt()),r!==null)for(p=i.onRecoverableError,h=0;h<r.length;h++)v=r[h],p(v.value,{componentStack:v.stack,digest:v.digest});if(Tm)throw Tm=!1,i=Bv,Bv=null,i;return(Cm&1)!==0&&i.tag!==0&&rh(),w=i.pendingLanes,(w&1)!==0?i===jv?mf++:(mf=0,jv=i):mf=0,Ua(),null}function rh(){if(Xa!==null){var i=Rs(Cm),r=Bs.transition,h=Wt;try{if(Bs.transition=null,Wt=16>i?16:i,Xa===null)var p=!1;else{if(i=Xa,Xa=null,Cm=0,(de&6)!==0)throw Error(e(331));var v=de;for(de|=4,St=i.current;St!==null;){var w=St,C=w.child;if((St.flags&16)!==0){var F=w.deletions;if(F!==null){for(var z=0;z<F.length;z++){var tt=F[z];for(St=tt;St!==null;){var ct=St;switch(ct.tag){case 0:case 11:case 15:ff(8,ct,w)}var dt=ct.child;if(dt!==null)dt.return=ct,St=dt;else for(;St!==null;){ct=St;var ut=ct.sibling,_t=ct.return;if(N_(ct),ct===tt){St=null;break}if(ut!==null){ut.return=_t,St=ut;break}St=_t}}}var Ct=w.alternate;if(Ct!==null){var Lt=Ct.child;if(Lt!==null){Ct.child=null;do{var en=Lt.sibling;Lt.sibling=null,Lt=en}while(Lt!==null)}}St=w}}if((w.subtreeFlags&2064)!==0&&C!==null)C.return=w,St=C;else t:for(;St!==null;){if(w=St,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:ff(9,w,w.return)}var Y=w.sibling;if(Y!==null){Y.return=w.return,St=Y;break t}St=w.return}}var G=i.current;for(St=G;St!==null;){C=St;var Q=C.child;if((C.subtreeFlags&2064)!==0&&Q!==null)Q.return=C,St=Q;else t:for(C=G;St!==null;){if(F=St,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:_m(9,F)}}catch(It){Ke(F,F.return,It)}if(F===C){St=null;break t}var pt=F.sibling;if(pt!==null){pt.return=F.return,St=pt;break t}St=F.return}}if(de=v,Ua(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(Vr,i)}catch{}p=!0}return p}finally{Wt=h,Bs.transition=r}}return!1}function G_(i,r,h){r=eh(h,r),r=u_(i,r,1),i=Ga(i,r,1),r=bi(),i!==null&&(Oo(i,1,r),zi(i,r))}function Ke(i,r,h){if(i.tag===3)G_(i,i,h);else for(;r!==null;){if(r.tag===3){G_(r,i,h);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Wa===null||!Wa.has(p))){i=eh(h,i),i=c_(r,i,1),r=Ga(r,i,1),i=bi(),r!==null&&(Oo(r,1,i),zi(r,i));break}}r=r.return}}function wN(i,r,h){var p=i.pingCache;p!==null&&p.delete(r),r=bi(),i.pingedLanes|=i.suspendedLanes&h,Sn===i&&(Mn&h)===h&&(pn===4||pn===3&&(Mn&130023424)===Mn&&500>Gt()-Fv?ru(i,0):Dv|=h),zi(i,r)}function V_(i,r){r===0&&((i.mode&1)===0?r=1:(r=Ls,Ls<<=1,(Ls&130023424)===0&&(Ls=4194304)));var h=bi();i=Ho(i,r),i!==null&&(Oo(i,r,h),zi(i,h))}function AN(i){var r=i.memoizedState,h=0;r!==null&&(h=r.retryLane),V_(i,h)}function _N(i,r){var h=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(e(314))}p!==null&&p.delete(r),V_(i,h)}var W_;W_=function(i,r,h){if(i!==null)if(i.memoizedProps!==r.pendingProps||Bi.current)qi=!0;else{if((i.lanes&h)===0&&(r.flags&128)===0)return qi=!1,uN(i,r,h);qi=(i.flags&131072)!==0}else qi=!1,De&&(r.flags&1048576)!==0&&xA(r,rm,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;wm(i,r),i=r.pendingProps;var v=Wc(r,Wn.current);Jc(r,h),v=pv(null,r,p,i,v,h);var w=gv();return r.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ji(p)?(w=!0,nm(r)):w=!1,r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,av(r),v.updater=vm,r.stateNode=v,v._reactInternals=r,Av(r,p,i,h),r=Tv(null,r,p,!0,w,h)):(r.tag=0,De&&w&&Qy(r),vi(null,r,v,h),r=r.child),r;case 16:p=r.elementType;t:{switch(wm(i,r),i=r.pendingProps,v=p._init,p=v(p._payload),r.type=p,v=r.tag=SN(p),i=mr(p,i),v){case 0:r=Sv(null,r,p,i,h);break t;case 1:r=b_(null,r,p,i,h);break t;case 11:r=p_(null,r,p,i,h);break t;case 14:r=g_(null,r,p,mr(p.type,i),h);break t}throw Error(e(306,p,""))}return r;case 0:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:mr(p,v),Sv(i,r,p,v,h);case 1:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:mr(p,v),b_(i,r,p,v,h);case 3:t:{if(w_(r),i===null)throw Error(e(387));p=r.pendingProps,w=r.memoizedState,v=w.element,MA(i,r),hm(r,p,null,h);var C=r.memoizedState;if(p=C.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){v=eh(Error(e(423)),r),r=A_(i,r,p,h,v);break t}else if(p!==v){v=eh(Error(e(424)),r),r=A_(i,r,p,h,v);break t}else for(rs=qa(r.stateNode.containerInfo.firstChild),ss=r,De=!0,gr=null,h=IA(r,null,p,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Kc(),p===v){r=Uo(i,r,h);break t}vi(i,r,p,h)}r=r.child}return r;case 5:return BA(r),i===null&&tv(r),p=r.type,v=r.pendingProps,w=i!==null?i.memoizedProps:null,C=v.children,Gy(p,v)?C=null:w!==null&&Gy(p,w)&&(r.flags|=32),v_(i,r),vi(i,r,C,h),r.child;case 6:return i===null&&tv(r),null;case 13:return __(i,r,h);case 4:return lv(r,r.stateNode.containerInfo),p=r.pendingProps,i===null?r.child=Qc(r,null,p,h):vi(i,r,p,h),r.child;case 11:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:mr(p,v),p_(i,r,p,v,h);case 7:return vi(i,r,r.pendingProps,h),r.child;case 8:return vi(i,r,r.pendingProps.children,h),r.child;case 12:return vi(i,r,r.pendingProps.children,h),r.child;case 10:t:{if(p=r.type._context,v=r.pendingProps,w=r.memoizedProps,C=v.value,Te(lm,p._currentValue),p._currentValue=C,w!==null)if(pr(w.value,C)){if(w.children===v.children&&!Bi.current){r=Uo(i,r,h);break t}}else for(w=r.child,w!==null&&(w.return=r);w!==null;){var F=w.dependencies;if(F!==null){C=w.child;for(var z=F.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=zo(-1,h&-h),z.tag=2;var tt=w.updateQueue;if(tt!==null){tt=tt.shared;var ct=tt.pending;ct===null?z.next=z:(z.next=ct.next,ct.next=z),tt.pending=z}}w.lanes|=h,z=w.alternate,z!==null&&(z.lanes|=h),rv(w.return,h,r),F.lanes|=h;break}z=z.next}}else if(w.tag===10)C=w.type===r.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(e(341));C.lanes|=h,F=C.alternate,F!==null&&(F.lanes|=h),rv(C,h,r),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===r){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}vi(i,r,v.children,h),r=r.child}return r;case 9:return v=r.type,p=r.pendingProps.children,Jc(r,h),v=Ds(v),p=p(v),r.flags|=1,vi(i,r,p,h),r.child;case 14:return p=r.type,v=mr(p,r.pendingProps),v=mr(p.type,v),g_(i,r,p,v,h);case 15:return m_(i,r,r.type,r.pendingProps,h);case 17:return p=r.type,v=r.pendingProps,v=r.elementType===p?v:mr(p,v),wm(i,r),r.tag=1,ji(p)?(i=!0,nm(r)):i=!1,Jc(r,h),a_(r,p,v),Av(r,p,v,h),Tv(null,r,p,!0,i,h);case 19:return S_(i,r,h);case 22:return y_(i,r,h)}throw Error(e(156,r.tag))};function X_(i,r){return ft(i,r)}function EN(i,r,h,p){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(i,r,h,p){return new EN(i,r,h,p)}function Gv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function SN(i){if(typeof i=="function")return Gv(i)?1:0;if(i!=null){if(i=i.$$typeof,i===et)return 11;if(i===rt)return 14}return 2}function Qa(i,r){var h=i.alternate;return h===null?(h=js(i.tag,r,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=r,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,r=i.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function Rm(i,r,h,p,v,w){var C=2;if(p=i,typeof i=="function")Gv(i)&&(C=1);else if(typeof i=="string")C=5;else t:switch(i){case M:return au(h.children,v,w,r);case W:C=8,v|=8;break;case nt:return i=js(12,h,r,v|2),i.elementType=nt,i.lanes=w,i;case q:return i=js(13,h,r,v),i.elementType=q,i.lanes=w,i;case X:return i=js(19,h,r,v),i.elementType=X,i.lanes=w,i;case K:return Pm(h,v,w,r);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ht:C=10;break t;case O:C=9;break t;case et:C=11;break t;case rt:C=14;break t;case V:C=16,p=null;break t}throw Error(e(130,i==null?i:typeof i,""))}return r=js(C,h,r,v),r.elementType=i,r.type=p,r.lanes=w,r}function au(i,r,h,p){return i=js(7,i,p,r),i.lanes=h,i}function Pm(i,r,h,p){return i=js(22,i,p,r),i.elementType=K,i.lanes=h,i.stateNode={isHidden:!1},i}function Vv(i,r,h){return i=js(6,i,null,r),i.lanes=h,i}function Wv(i,r,h){return r=js(4,i.children!==null?i.children:[],i.key,r),r.lanes=h,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}function TN(i,r,h,p,v){this.tag=r,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Io(0),this.expirationTimes=Io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Io(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Xv(i,r,h,p,v,w,C,F,z){return i=new TN(i,r,h,F,z),r===1?(r=1,w===!0&&(r|=8)):r=0,w=js(3,null,null,r),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},av(w),i}function xN(i,r,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:p==null?null:""+p,children:i,containerInfo:r,implementation:h}}function Y_(i){if(!i)return za;i=i._reactInternals;t:{if(Mi(i)!==i||i.tag!==1)throw Error(e(170));var r=i;do{switch(r.tag){case 3:r=r.stateNode.context;break t;case 1:if(ji(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break t}}r=r.return}while(r!==null);throw Error(e(171))}if(i.tag===1){var h=i.type;if(ji(h))return EA(i,h,r)}return r}function K_(i,r,h,p,v,w,C,F,z){return i=Xv(h,p,!0,i,v,w,C,F,z),i.context=Y_(null),h=i.current,p=bi(),v=Ya(h),w=zo(p,v),w.callback=r??null,Ga(h,w,v),i.current.lanes=v,Oo(i,v,p),zi(i,p),i}function Im(i,r,h,p){var v=r.current,w=bi(),C=Ya(v);return h=Y_(h),r.context===null?r.context=h:r.pendingContext=h,r=zo(w,C),r.payload={element:i},p=p===void 0?null:p,p!==null&&(r.callback=p),i=Ga(v,r,C),i!==null&&(br(i,v,C,w),cm(i,v,C)),C}function Om(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Q_(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<r?h:r}}function Yv(i,r){Q_(i,r),(i=i.alternate)&&Q_(i,r)}function CN(){return null}var Z_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Kv(i){this._internalRoot=i}Mm.prototype.render=Kv.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(e(409));Im(i,r,null,null)},Mm.prototype.unmount=Kv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;su(function(){Im(null,i,null,null)}),r[Fo]=null}};function Mm(i){this._internalRoot=i}Mm.prototype.unstable_scheduleHydration=function(i){if(i){var r=Dc();i={blockedOn:null,target:i,priority:r};for(var h=0;h<Fi.length&&r!==0&&r<Fi[h].priority;h++);Fi.splice(h,0,i),h===0&&Wl(i)}};function Qv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Dm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function J_(){}function kN(i,r,h,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var tt=Om(C);w.call(tt)}}var C=K_(r,p,i,0,null,!1,!1,"",J_);return i._reactRootContainer=C,i[Fo]=C.current,Jd(i.nodeType===8?i.parentNode:i),su(),C}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var F=p;p=function(){var tt=Om(z);F.call(tt)}}var z=Xv(i,0,!1,null,null,!1,!1,"",J_);return i._reactRootContainer=z,i[Fo]=z.current,Jd(i.nodeType===8?i.parentNode:i),su(function(){Im(r,z,h,p)}),z}function Fm(i,r,h,p,v){var w=h._reactRootContainer;if(w){var C=w;if(typeof v=="function"){var F=v;v=function(){var z=Om(C);F.call(z)}}Im(r,C,i,v)}else C=kN(h,r,i,v,p);return Om(C)}Ps=function(i){switch(i.tag){case 3:var r=i.stateNode;if(r.current.memoizedState.isDehydrated){var h=Xr(r.pendingLanes);h!==0&&(dr(r,h|1),zi(r,Gt()),(de&6)===0&&(sh=Gt()+500,Ua()))}break;case 13:su(function(){var p=Ho(i,1);if(p!==null){var v=bi();br(p,i,1,v)}}),Yv(i,1)}},$l=function(i){if(i.tag===13){var r=Ho(i,134217728);if(r!==null){var h=bi();br(r,i,134217728,h)}Yv(i,134217728)}},es=function(i){if(i.tag===13){var r=Ya(i),h=Ho(i,r);if(h!==null){var p=bi();br(h,i,r,p)}Yv(i,r)}},Dc=function(){return Wt},Fc=function(i,r){var h=Wt;try{return Wt=i,r()}finally{Wt=h}},Cs=function(i,r,h){switch(r){case"input":if(ai(i,h),r=h.name,h.type==="radio"&&r!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<h.length;r++){var p=h[r];if(p!==i&&p.form===i.form){var v=tm(p);if(!v)throw Error(e(90));Jt(p),ai(p,v)}}}break;case"textarea":dn(i,h);break;case"select":r=h.value,r!=null&&ui(i,!!h.multiple,r,!1)}},Ns=zv,ur=su;var NN={usingClientEntryPoint:!1,Events:[nf,Gc,tm,ks,lr,zv]},yf={findFiberByHostInstance:Kl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LN={bundleType:yf.bundleType,version:yf.version,rendererPackageName:yf.rendererPackageName,rendererConfig:yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kt(i),i===null?null:i.stateNode},findFiberByHostInstance:yf.findFiberByHostInstance||CN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{Vr=Bm.inject(LN),Di=Bm}catch{}}return Ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN,Ui.createPortal=function(i,r){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qv(r))throw Error(e(200));return xN(i,r,null,h)},Ui.createRoot=function(i,r){if(!Qv(i))throw Error(e(299));var h=!1,p="",v=Z_;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=Xv(i,1,!1,null,null,h,!1,p,v),i[Fo]=r.current,Jd(i.nodeType===8?i.parentNode:i),new Kv(r)},Ui.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(e(188)):(i=Object.keys(i).join(","),Error(e(268,i)));return i=kt(r),i=i===null?null:i.stateNode,i},Ui.flushSync=function(i){return su(i)},Ui.hydrate=function(i,r,h){if(!Dm(r))throw Error(e(200));return Fm(null,i,r,!0,h)},Ui.hydrateRoot=function(i,r,h){if(!Qv(i))throw Error(e(405));var p=h!=null&&h.hydratedSources||null,v=!1,w="",C=Z_;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(C=h.onRecoverableError)),r=K_(r,null,i,1,h??null,v,!1,w,C),i[Fo]=r.current,Jd(i),p)for(i=0;i<p.length;i++)h=p[i],v=h._getVersion,v=v(h._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[h,v]:r.mutableSourceEagerHydrationData.push(h,v);return new Mm(r)},Ui.render=function(i,r,h){if(!Dm(r))throw Error(e(200));return Fm(null,i,r,!1,h)},Ui.unmountComponentAtNode=function(i){if(!Dm(i))throw Error(e(40));return i._reactRootContainer?(su(function(){Fm(null,null,i,!1,function(){i._reactRootContainer=null,i[Fo]=null})}),!0):!1},Ui.unstable_batchedUpdates=zv,Ui.unstable_renderSubtreeIntoContainer=function(i,r,h,p){if(!Dm(h))throw Error(e(200));if(i==null||i._reactInternals===void 0)throw Error(e(38));return Fm(i,r,h,!1,p)},Ui.version="18.3.1-next-f1338f8080-20240426",Ui}var lE;function HN(){if(lE)return e1.exports;lE=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),e1.exports=qN(),e1.exports}var uE;function zN(){if(uE)return jm;uE=1;var a=HN();return jm.createRoot=a.createRoot,jm.hydrateRoot=a.hydrateRoot,jm}var UN=zN();const $N=Fg(UN);var Jf={};Jf.d=(a,t)=>{for(var e in t)Jf.o(t,e)&&!Jf.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:t[e]})};Jf.o=(a,t)=>Object.prototype.hasOwnProperty.call(a,t);var $t=globalThis.pdfjsLib={};Jf.d($t,{AbortException:()=>Ml,AnnotationEditorLayer:()=>Hb,AnnotationEditorParamsType:()=>ue,AnnotationEditorType:()=>Kt,AnnotationEditorUIManager:()=>Sc,AnnotationLayer:()=>jR,AnnotationMode:()=>el,ColorPicker:()=>Hx,DOMSVGFactory:()=>ww,DrawLayer:()=>$b,FeatureTest:()=>Ci,GlobalWorkerOptions:()=>_a,ImageKind:()=>s0,InvalidPDFException:()=>O1,MissingPDFException:()=>ip,OPS:()=>Sr,OutputScale:()=>D1,PDFDataRangeTransport:()=>ux,PDFDateString:()=>mw,PDFWorker:()=>Th,PasswordResponses:()=>XN,PermissionFlag:()=>WN,PixelsPerInch:()=>Dl,RenderingCancelledException:()=>pw,TextLayer:()=>sp,TouchManager:()=>j0,UnexpectedResponseException:()=>D0,Util:()=>Mt,VerbosityLevel:()=>fy,XfaLayer:()=>hx,build:()=>bR,createValidAbsoluteUrl:()=>ZN,fetchData:()=>yy,getDocument:()=>cR,getFilenameFromUrl:()=>aL,getPdfFilenameFromUrl:()=>lL,getXfaPageViewport:()=>uL,isDataScheme:()=>vy,isPdfFile:()=>gw,noContextMenu:()=>Hr,normalizeUnicode:()=>sL,setLayerDimensions:()=>Ec,shadow:()=>se,stopEvent:()=>As,version:()=>vR});const ri=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),lT=[1,0,0,1,0,0],I1=[.001,0,0,.001,0,0],GN=1e7,s1=1.35,bs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},el={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},VN="pdfjs_internal_editor_",Kt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},WN={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Qn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},s0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},bf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},fy={ERRORS:0,WARNINGS:1,INFOS:5},Sr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},XN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let py=fy.WARNINGS;function YN(a){Number.isInteger(a)&&(py=a)}function KN(){return py}function gy(a){py>=fy.INFOS&&console.log(`Info: ${a}`)}function Qt(a){py>=fy.WARNINGS&&console.log(`Warning: ${a}`)}function Se(a){throw new Error(a)}function cn(a,t){a||Se(t)}function QN(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ZN(a,t=null,e=null){if(!a)return null;try{if(e&&typeof a=="string"){if(e.addDefaultProtocol&&a.startsWith("www.")){const s=a.match(/\./g);(s==null?void 0:s.length)>=2&&(a=`http://${a}`)}if(e.tryConvertEncoding)try{a=iL(a)}catch{}}const n=t?new URL(a,t):new URL(a);if(QN(n))return n}catch{}return null}function se(a,t,e,n=!1){return Object.defineProperty(a,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const jl=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class cE extends jl{constructor(t,e){super(t,"PasswordException"),this.code=e}}class r1 extends jl{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class O1 extends jl{constructor(t){super(t,"InvalidPDFException")}}class ip extends jl{constructor(t){super(t,"MissingPDFException")}}class D0 extends jl{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class JN extends jl{constructor(t){super(t,"FormatError")}}class Ml extends jl{constructor(t){super(t,"AbortException")}}function uT(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&Se("Invalid argument for bytesToString");const t=a.length,e=8192;if(t<e)return String.fromCharCode.apply(null,a);const n=[];for(let s=0;s<t;s+=e){const o=Math.min(s+e,t),l=a.subarray(s,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function my(a){typeof a!="string"&&Se("Invalid argument for stringToBytes");const t=a.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=a.charCodeAt(n)&255;return e}function tL(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function dw(a){const t=Object.create(null);for(const[e,n]of a)t[e]=n;return t}function eL(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function nL(){try{return new Function(""),!0}catch{return!1}}class Ci{static get isLittleEndian(){return se(this,"isLittleEndian",eL())}static get isEvalSupported(){return se(this,"isEvalSupported",nL())}static get isOffscreenCanvasSupported(){return se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return se(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?se(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):se(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return se(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const o1=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var Ea,r0,M1;class Mt{static makeHexColor(t,e,n){return`#${o1[t]}${o1[e]}${o1[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,o]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),l=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],o[0],l[0]),Math.min(n[1],s[1],o[1],l[1]),Math.max(n[0],s[0],o[0],l[0]),Math.max(n[1],s[1],o[1],l[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],l=t[2]*e[1]+t[3]*e[3],u=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-o*s))/2,f=u+d||1,g=u-d||1;return[Math.sqrt(f),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,s,l]}static bezierBoundingBox(t,e,n,s,o,l,u,d,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d)):f=[Math.min(t,u),Math.min(e,d),Math.max(t,u),Math.max(e,d)],L(this,Ea,M1).call(this,t,n,o,u,e,s,l,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),L(this,Ea,M1).call(this,t,n,o,u,e,s,l,d,3*(-e+3*(s-l)+d),6*(e-2*s+l),3*(s-e),f),f}}Ea=new WeakSet,r0=function(t,e,n,s,o,l,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,m=f*f,b=m*f,_=y*(y*(y*t+3*f*e)+3*m*n)+b*s,E=y*(y*(y*o+3*f*l)+3*m*u)+b*d;g[0]=Math.min(g[0],_),g[1]=Math.min(g[1],E),g[2]=Math.max(g[2],_),g[3]=Math.max(g[3],E)},M1=function(t,e,n,s,o,l,u,d,f,g,y,m){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&L(this,Ea,r0).call(this,t,e,n,s,o,l,u,d,-y/g,m);return}const b=g**2-4*y*f;if(b<0)return;const _=Math.sqrt(b),E=2*f;L(this,Ea,r0).call(this,t,e,n,s,o,l,u,d,(-g+_)/E,m),L(this,Ea,r0).call(this,t,e,n,s,o,l,u,d,(-g-_)/E,m)},k(Mt,Ea);function iL(a){return decodeURIComponent(escape(a))}let a1=null,hE=null;function sL(a){return a1||(a1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,hE=new Map([["ﬅ","ſt"]])),a.replaceAll(a1,(t,e,n)=>e?e.normalize("NFKC"):hE.get(n))}function rL(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),uT(a)}const fw="pdfjs_internal_id_";function oL(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(uT(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...t){return new Promise(e=>{e(a(...t))})});const Vo="http://www.w3.org/2000/svg",gu=class gu{};lt(gu,"CSS",96),lt(gu,"PDF",72),lt(gu,"PDF_TO_CSS_UNITS",gu.CSS/gu.PDF);let Dl=gu;async function yy(a,t="text"){if(Mf(a,document.baseURI)){const e=await fetch(a);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",a,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class jg{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=o,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,m,b;switch(s%=360,s<0&&(s+=360),s){case 180:g=-1,y=0,m=0,b=1;break;case 90:g=0,y=1,m=1,b=0;break;case 270:g=0,y=-1,m=-1,b=0;break;case 0:g=1,y=0,m=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(m=-m,b=-b);let _,E,x,N;g===0?(_=Math.abs(f-t[1])*n+o,E=Math.abs(d-t[0])*n+l,x=(t[3]-t[1])*n,N=(t[2]-t[0])*n):(_=Math.abs(d-t[0])*n+o,E=Math.abs(f-t[1])*n+l,x=(t[2]-t[0])*n,N=(t[3]-t[1])*n),this.transform=[g*n,y*n,m*n,b*n,_-g*n*d-m*n*f,E-y*n*d-b*n*f],this.width=x,this.height=N}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(s=>s*t);return se(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new jg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:o})}convertToViewportPoint(t,e){return Mt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Mt.applyTransform([t[0],t[1]],this.transform),n=Mt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Mt.applyInverseTransform([t,e],this.transform)}}class pw extends jl{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function vy(a){const t=a.length;let e=0;for(;e<t&&a[e].trim()==="";)e++;return a.substring(e,e+5).toLowerCase()==="data:"}function gw(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function aL(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function lL(a,t="document.pdf"){if(typeof a!="string")return t;if(vy(a))return Qt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(a);let o=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class dE{constructor(){lt(this,"started",Object.create(null));lt(this,"times",[])}time(t){t in this.started&&Qt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Qt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-s}ms
`);return t.join("")}}function Mf(a,t){try{const{protocol:e}=t?new URL(a,t):new URL(a);return e==="http:"||e==="https:"}catch{return!1}}function Hr(a){a.preventDefault()}function As(a){a.preventDefault(),a.stopPropagation()}var dp;class mw{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,dp)||S(this,dp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,dp).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=g,u+=y):f==="+"&&(l-=g,u-=y),new Date(Date.UTC(n,s,o,l,u,d))}}dp=new WeakMap,k(mw,dp);function uL(a,{scale:t=1,rotation:e=0}){const{width:n,height:s}=a.attributes.style,o=[0,0,parseInt(n),parseInt(s)];return new jg({viewBox:o,userUnit:1,scale:t,rotation:e})}function yw(a){if(a.startsWith("#")){const t=parseInt(a.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(t=>parseInt(t)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Qt(`Not a valid color format: "${a}"`),[0,0,0])}function cL(a){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of a.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;a.set(e,yw(n))}t.remove()}function Be(a){const{a:t,b:e,c:n,d:s,e:o,f:l}=a.getTransform();return[t,e,n,s,o,l]}function eo(a){const{a:t,b:e,c:n,d:s,e:o,f:l}=a.getTransform().invertSelf();return[t,e,n,s,o,l]}function Ec(a,t,e=!1,n=!0){if(t instanceof jg){const{pageWidth:s,pageHeight:o}=t.rawDims,{style:l}=a,u=Ci.isCSSRoundSupported,d=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}n&&a.setAttribute("data-main-rotation",t.rotation)}class D1{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var nl,vu,Tr,bu,fp,pp,X0,cT,ki,hT,dT,o0,fT,B1;const Yo=class Yo{constructor(t){k(this,ki);k(this,nl,null);k(this,vu,null);k(this,Tr);k(this,bu,null);k(this,fp,null);S(this,Tr,t),c(Yo,pp)||S(Yo,pp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=S(this,nl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Tr)._uiManager._signal;t.addEventListener("contextmenu",Hr,{signal:e}),t.addEventListener("pointerdown",L(Yo,X0,cT),{signal:e});const n=S(this,bu,document.createElement("div"));n.className="buttons",t.append(n);const s=c(this,Tr).toolbarPosition;if(s){const{style:o}=t,l=c(this,Tr)._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return L(this,ki,fT).call(this),t}get div(){return c(this,nl)}hide(){var t;c(this,nl).classList.add("hidden"),(t=c(this,vu))==null||t.hideDropdown()}show(){var t;c(this,nl).classList.remove("hidden"),(t=c(this,fp))==null||t.shown()}async addAltText(t){const e=await t.render();L(this,ki,o0).call(this,e),c(this,bu).prepend(e,c(this,ki,B1)),S(this,fp,t)}addColorPicker(t){S(this,vu,t);const e=t.renderButton();L(this,ki,o0).call(this,e),c(this,bu).prepend(e,c(this,ki,B1))}remove(){var t;c(this,nl).remove(),(t=c(this,vu))==null||t.destroy(),S(this,vu,null)}};nl=new WeakMap,vu=new WeakMap,Tr=new WeakMap,bu=new WeakMap,fp=new WeakMap,pp=new WeakMap,X0=new WeakSet,cT=function(t){t.stopPropagation()},ki=new WeakSet,hT=function(t){c(this,Tr)._focusEventsAllowed=!1,As(t)},dT=function(t){c(this,Tr)._focusEventsAllowed=!0,As(t)},o0=function(t){const e=c(this,Tr)._uiManager._signal;t.addEventListener("focusin",L(this,ki,hT).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",L(this,ki,dT).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Hr,{signal:e})},fT=function(){const{editorType:t,_uiManager:e}=c(this,Tr),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(Yo,pp)[t]),L(this,ki,o0).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),c(this,bu).append(n)},B1=function(){const t=document.createElement("div");return t.className="divider",t},k(Yo,X0),k(Yo,pp,null);let F1=Yo;var gp,wu,Au,Bl,pT,gT,mT;class hL{constructor(t){k(this,Bl);k(this,gp,null);k(this,wu,null);k(this,Au);S(this,Au,t)}show(t,e,n){const[s,o]=L(this,Bl,gT).call(this,e,n),{style:l}=c(this,wu)||S(this,wu,L(this,Bl,pT).call(this));t.append(c(this,wu)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,wu).remove()}}gp=new WeakMap,wu=new WeakMap,Au=new WeakMap,Bl=new WeakSet,pT=function(){const t=S(this,wu,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Hr,{signal:c(this,Au)._signal});const e=S(this,gp,document.createElement("div"));return e.className="buttons",t.append(e),L(this,Bl,mT).call(this),t},gT=function(t,e){let n=0,s=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){s=u,n=l;continue}e?u>s&&(s=u):u<s&&(s=u)}return[e?1-s:s,n]},mT=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,Au)._signal;t.addEventListener("contextmenu",Hr,{signal:n}),t.addEventListener("click",()=>{c(this,Au).highlightSelection("floating_button")},{signal:n}),c(this,gp).append(t)};function F0(a,t,e){for(const n of e)t.addEventListener(n,a[n].bind(a))}var Y0;class dL{constructor(){k(this,Y0,0)}get id(){return`${VN}${wi(this,Y0)._++}`}}Y0=new WeakMap;var Nh,mp,ti,Lh,a0;const Fw=class Fw{constructor(){k(this,Lh);k(this,Nh,rL());k(this,mp,0);k(this,ti,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const o=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return se(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:o}=t;return L(this,Lh,a0).call(this,`${e}_${n}_${s}_${o}`,t)}async getFromUrl(t){return L(this,Lh,a0).call(this,t,t)}async getFromBlob(t,e){const n=await e;return L(this,Lh,a0).call(this,t,n)}async getFromId(t){c(this,ti)||S(this,ti,new Map);const e=c(this,ti).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,ti)||S(this,ti,new Map);let n=c(this,ti).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${c(this,Nh)}_${wi(this,mp)._++}`,refCounter:1,isSvg:!1},c(this,ti).set(t,n),c(this,ti).set(n.id,n),n}getSvgUrl(t){const e=c(this,ti).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;c(this,ti)||S(this,ti,new Map);const e=c(this,ti).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Nh)}_`)}};Nh=new WeakMap,mp=new WeakMap,ti=new WeakMap,Lh=new WeakSet,a0=async function(t,e){c(this,ti)||S(this,ti,new Map);let n=c(this,ti).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Nh)}_${wi(this,mp)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await yy(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const o=Fw._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const y=n.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(s),await d}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Qt(s),n=null}return c(this,ti).set(t,n),n&&c(this,ti).set(n.id,n),n};let j1=Fw;var nn,il,yp,Ue;class fL{constructor(t=128){k(this,nn,[]);k(this,il,!1);k(this,yp);k(this,Ue,-1);S(this,yp,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(s&&t(),c(this,il))return;const d={cmd:t,undo:e,post:n,type:o};if(c(this,Ue)===-1){c(this,nn).length>0&&(c(this,nn).length=0),S(this,Ue,0),c(this,nn).push(d);return}if(l&&c(this,nn)[c(this,Ue)].type===o){u&&(d.undo=c(this,nn)[c(this,Ue)].undo),c(this,nn)[c(this,Ue)]=d;return}const f=c(this,Ue)+1;f===c(this,yp)?c(this,nn).splice(0,1):(S(this,Ue,f),f<c(this,nn).length&&c(this,nn).splice(f)),c(this,nn).push(d)}undo(){if(c(this,Ue)===-1)return;S(this,il,!0);const{undo:t,post:e}=c(this,nn)[c(this,Ue)];t(),e==null||e(),S(this,il,!1),S(this,Ue,c(this,Ue)-1)}redo(){if(c(this,Ue)<c(this,nn).length-1){S(this,Ue,c(this,Ue)+1),S(this,il,!0);const{cmd:t,post:e}=c(this,nn)[c(this,Ue)];t(),e==null||e(),S(this,il,!1)}}hasSomethingToUndo(){return c(this,Ue)!==-1}hasSomethingToRedo(){return c(this,Ue)<c(this,nn).length-1}cleanType(t){if(c(this,Ue)!==-1){for(let e=c(this,Ue);e>=0;e--)if(c(this,nn)[e].type!==t){c(this,nn).splice(e+1,c(this,Ue)-e),S(this,Ue,e);return}c(this,nn).length=0,S(this,Ue,-1)}}destroy(){S(this,nn,null)}}nn=new WeakMap,il=new WeakMap,yp=new WeakMap,Ue=new WeakMap;var K0,yT;class qg{constructor(t){k(this,K0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ci.platform;for(const[n,s,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(L(this,K0,yT).call(this,e));if(!n)return;const{callback:s,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(s.bind(t,...l,e)(),o||As(e))}}K0=new WeakSet,yT=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Q0=class Q0{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return cL(t),se(this,"_colors",t)}convert(t){const e=yw(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((o,l)=>o===e[l]))return Q0._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Mt.makeHexColor(...e):t}};lt(Q0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let q1=Q0;var Rh,as,yn,Dn,Ph,Qo,Ih,Us,sl,_u,Oh,Eu,ro,xr,Su,vp,bp,Mh,wp,oo,rl,Dh,ol,ao,Z0,al,Ap,ll,Tu,_p,Ep,Cn,we,Zo,xu,Sp,Tp,ul,lo,Jo,xp,$s,At,l0,H1,vT,bT,u0,wT,AT,_T,z1,ET,U1,$1,ST,_i,Wo,TT,xT,G1,CT,Df,V1;const _h=class _h{constructor(t,e,n,s,o,l,u,d,f,g,y,m,b){k(this,At);k(this,Rh,new AbortController);k(this,as,null);k(this,yn,new Map);k(this,Dn,new Map);k(this,Ph,null);k(this,Qo,null);k(this,Ih,null);k(this,Us,new fL);k(this,sl,null);k(this,_u,null);k(this,Oh,0);k(this,Eu,new Set);k(this,ro,null);k(this,xr,null);k(this,Su,new Set);lt(this,"_editorUndoBar",null);k(this,vp,!1);k(this,bp,!1);k(this,Mh,!1);k(this,wp,null);k(this,oo,null);k(this,rl,null);k(this,Dh,null);k(this,ol,!1);k(this,ao,null);k(this,Z0,new dL);k(this,al,!1);k(this,Ap,!1);k(this,ll,null);k(this,Tu,null);k(this,_p,null);k(this,Ep,null);k(this,Cn,Kt.NONE);k(this,we,new Set);k(this,Zo,null);k(this,xu,null);k(this,Sp,null);k(this,Tp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,ul,[0,0]);k(this,lo,null);k(this,Jo,null);k(this,xp,null);k(this,$s,null);const _=this._signal=c(this,Rh).signal;S(this,Jo,t),S(this,xp,e),S(this,Ph,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:_}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),s._on("setpreference",this.onSetPreference.bind(this),{signal:_}),s._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:_}),L(this,At,wT).call(this),L(this,At,ST).call(this),L(this,At,z1).call(this),S(this,Qo,o.annotationStorage),S(this,wp,o.filterFactory),S(this,xu,l),S(this,Dh,u||null),S(this,vp,d),S(this,bp,f),S(this,Mh,g),S(this,Ep,y||null),this.viewParameters={realScale:Dl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=b!==!1}static get _keyboardManager(){const t=_h.prototype,e=l=>c(l,Jo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return se(this,"_keyboardManager",new qg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&c(l,Jo).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&c(l,Jo).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,s,o;(t=c(this,$s))==null||t.resolve(),S(this,$s,null),(e=c(this,Rh))==null||e.abort(),S(this,Rh,null),this._signal=null;for(const l of c(this,Dn).values())l.destroy();c(this,Dn).clear(),c(this,yn).clear(),c(this,Su).clear(),S(this,as,null),c(this,we).clear(),c(this,Us).destroy(),(n=c(this,Ph))==null||n.destroy(),(s=c(this,ao))==null||s.hide(),S(this,ao,null),c(this,oo)&&(clearTimeout(c(this,oo)),S(this,oo,null)),c(this,lo)&&(clearTimeout(c(this,lo)),S(this,lo,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,Ep)}get useNewAltTextFlow(){return c(this,bp)}get useNewAltTextWhenAddingImage(){return c(this,Mh)}get hcmFilter(){return se(this,"hcmFilter",c(this,xu)?c(this,wp).addHCMFilter(c(this,xu).foreground,c(this,xu).background):"none")}get direction(){return se(this,"direction",getComputedStyle(c(this,Jo)).direction)}get highlightColors(){return se(this,"highlightColors",c(this,Dh)?new Map(c(this,Dh).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,_u,t)}setMainHighlightColorPicker(t){S(this,_p,t)}editAltText(t,e=!1){var n;(n=c(this,Ph))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":S(this,Mh,e);break}}onPageChanging({pageNumber:t}){S(this,Oh,t-1)}focusMainContainer(){c(this,Jo).focus()}findParent(t,e){for(const n of c(this,Dn).values()){const{x:s,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){c(this,xp).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Su).add(t)}removeShouldRescale(t){c(this,Su).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Dl.PDF_TO_CSS_UNITS;for(const n of c(this,Su))n.onScaleChanging();(e=c(this,_u))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l}=e,u=e.toString(),f=L(this,At,l0).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;e.empty();const y=L(this,At,H1).call(this,f),m=c(this,Cn)===Kt.NONE,b=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l,text:u}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Kt.HIGHLIGHT,b);return}b()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Qo)&&!c(this,Qo).has(t.id)&&c(this,Qo).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,ol)&&(S(this,ol,!1),L(this,At,u0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,we))if(e.div.contains(t)){S(this,Tu,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,Tu))return;const[t,e]=c(this,Tu);S(this,Tu,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){L(this,At,z1).call(this),L(this,At,U1).call(this)}removeEditListeners(){L(this,At,ET).call(this),L(this,At,$1).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(this,xr))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of c(this,xr))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,as))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of c(this,we)){const o=s.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of c(this,xr))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Qt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const d of n){const f=await s.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)L(this,At,G1).call(this,d);L(this,At,V1).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Qt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Cn)!==Kt.NONE&&!this.isEditorHandlingKeyboard&&_h._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,ol)&&(S(this,ol,!1),L(this,At,u0).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(L(this,At,AT).call(this),L(this,At,U1).call(this),L(this,At,_i).call(this,{isEditing:c(this,Cn)!==Kt.NONE,isEmpty:L(this,At,Df).call(this),hasSomethingToUndo:c(this,Us).hasSomethingToUndo(),hasSomethingToRedo:c(this,Us).hasSomethingToRedo(),hasSelectedEditor:!1})):(L(this,At,_T).call(this),L(this,At,$1).call(this),L(this,At,_i).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,xr)){S(this,xr,t);for(const e of c(this,xr))L(this,At,Wo).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,Z0).id}get currentLayer(){return c(this,Dn).get(c(this,Oh))}getLayer(t){return c(this,Dn).get(t)}get currentPageIndex(){return c(this,Oh)}addLayer(t){c(this,Dn).set(t.pageIndex,t),c(this,al)?t.enable():t.disable()}removeLayer(t){c(this,Dn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var s;if(c(this,Cn)!==t&&!(c(this,$s)&&(await c(this,$s).promise,!c(this,$s)))){if(S(this,$s,Promise.withResolvers()),S(this,Cn,t),t===Kt.NONE){this.setEditingState(!1),L(this,At,xT).call(this),(s=this._editorUndoBar)==null||s.hide(),c(this,$s).resolve();return}this.setEditingState(!0),await L(this,At,TT).call(this),this.unselectAll();for(const o of c(this,Dn).values())o.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),c(this,$s).resolve();return}for(const o of c(this,yn).values())o.annotationElementId===e?(this.setSelected(o),o.enterInEditMode()):o.unselect();c(this,$s).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,Cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(c(this,xr)){switch(t){case ue.CREATE:this.currentLayer.addNewEditor();return;case ue.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,_p))==null||n.updateColor(e);break;case ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Sp)||S(this,Sp,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of c(this,we))s.updateParams(t,e);for(const s of c(this,xr))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const l of c(this,yn).values())l.editorType===t&&l.show(e);(((o=c(this,Sp))==null?void 0:o.get(ue.HIGHLIGHT_SHOW_ALL))??!0)!==e&&L(this,At,Wo).call(this,[[ue.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Ap)!==t){S(this,Ap,t);for(const e of c(this,Dn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of c(this,yn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return c(this,yn).get(t)}addEditor(t){c(this,yn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(c(this,oo)&&clearTimeout(c(this,oo)),S(this,oo,setTimeout(()=>{this.focusMainContainer(),S(this,oo,null)},0))),c(this,yn).delete(t.id),this.unselect(t),(!t.annotationElementId||!c(this,Eu).has(t.annotationElementId))&&((e=c(this,Qo))==null||e.remove(t.id))}addDeletedAnnotationElement(t){c(this,Eu).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,Eu).has(t)}removeDeletedAnnotationElement(t){c(this,Eu).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,as)!==t&&(S(this,as,t),t&&L(this,At,Wo).call(this,t.propertiesToUpdate))}updateUI(t){c(this,At,CT)===t&&L(this,At,Wo).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){L(this,At,Wo).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,we).has(t)){c(this,we).delete(t),t.unselect(),L(this,At,_i).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,we).add(t),t.select(),L(this,At,Wo).call(this,t.propertiesToUpdate),L(this,At,_i).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=c(this,_u))==null||e.commitOrRemove();for(const n of c(this,we))n!==t&&n.unselect();c(this,we).clear(),c(this,we).add(t),t.select(),L(this,At,Wo).call(this,t.propertiesToUpdate),L(this,At,_i).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,we).has(t)}get firstSelectedEditor(){return c(this,we).values().next().value}unselect(t){t.unselect(),c(this,we).delete(t),L(this,At,_i).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,we).size!==0}get isEnterHandled(){return c(this,we).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,Us).undo(),L(this,At,_i).call(this,{hasSomethingToUndo:c(this,Us).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:L(this,At,Df).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,Us).redo(),L(this,At,_i).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Us).hasSomethingToRedo(),isEmpty:L(this,At,Df).call(this)})}addCommands(t){c(this,Us).add(t),L(this,At,_i).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:L(this,At,Df).call(this)})}cleanUndoStack(t){c(this,Us).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,we)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(s,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},s=()=>{for(const l of e)L(this,At,G1).call(this,l)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=c(this,as))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,as)||this.hasSelection}selectAll(){for(const t of c(this,we))t.commit();L(this,At,V1).call(this,c(this,yn).values())}unselectAll(){var t;if(!(c(this,as)&&(c(this,as).commitOrRemove(),c(this,Cn)!==Kt.NONE))&&!((t=c(this,_u))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,we))e.unselect();c(this,we).clear(),L(this,At,_i).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,ul)[0]+=t,c(this,ul)[1]+=e;const[s,o]=c(this,ul),l=[...c(this,we)],u=1e3;c(this,lo)&&clearTimeout(c(this,lo)),S(this,lo,setTimeout(()=>{S(this,lo,null),c(this,ul)[0]=c(this,ul)[1]=0,this.addCommands({cmd:()=>{for(const d of l)c(this,yn).has(d.id)&&d.translateInPage(s,o)},undo:()=>{for(const d of l)c(this,yn).has(d.id)&&d.translateInPage(-s,-o)},mustExec:!1})},u));for(const d of l)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,ro,new Map);for(const t of c(this,we))c(this,ro).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,ro))return!1;this.disableUserSelect(!1);const t=c(this,ro);S(this,ro,null);let e=!1;for(const[{x:s,y:o,pageIndex:l},u]of t)u.newX=s,u.newY=o,u.newPageIndex=l,e||(e=s!==u.savedX||o!==u.savedY||l!==u.savedPageIndex);if(!e)return!1;const n=(s,o,l,u)=>{if(c(this,yn).has(s.id)){const d=c(this,Dn).get(u);d?s._setParentAndPosition(d,o,l):(s.pageIndex=u,s.x=o,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:l,newPageIndex:u}]of t)n(s,o,l,u)},undo:()=>{for(const[s,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(s,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,ro))for(const n of c(this,ro).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,we).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,as)===t}getActive(){return c(this,as)}getMode(){return c(this,Cn)}get imageManager(){return se(this,"imageManager",new j1)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,m)=>({x:(g-s)/l,y:1-(f+y-n)/o,width:m/l,height:y/o});break;case"180":u=(f,g,y,m)=>({x:1-(f+y-n)/o,y:1-(g+m-s)/l,width:y/o,height:m/l});break;case"270":u=(f,g,y,m)=>({x:1-(g+m-s)/l,y:(f-n)/o,width:m/l,height:y/o});break;default:u=(f,g,y,m)=>({x:(f-n)/o,y:(g-s)/l,width:y/o,height:m/l});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:m,y:b,width:_,height:E}of y.getClientRects())_===0||E===0||d.push(u(m,b,_,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,Ih)||S(this,Ih,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,Ih))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=c(this,Ih))==null?void 0:s.get(t.data.id);if(!e)return;const n=c(this,Qo).getRawValue(e);n&&(c(this,Cn)===Kt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};Rh=new WeakMap,as=new WeakMap,yn=new WeakMap,Dn=new WeakMap,Ph=new WeakMap,Qo=new WeakMap,Ih=new WeakMap,Us=new WeakMap,sl=new WeakMap,_u=new WeakMap,Oh=new WeakMap,Eu=new WeakMap,ro=new WeakMap,xr=new WeakMap,Su=new WeakMap,vp=new WeakMap,bp=new WeakMap,Mh=new WeakMap,wp=new WeakMap,oo=new WeakMap,rl=new WeakMap,Dh=new WeakMap,ol=new WeakMap,ao=new WeakMap,Z0=new WeakMap,al=new WeakMap,Ap=new WeakMap,ll=new WeakMap,Tu=new WeakMap,_p=new WeakMap,Ep=new WeakMap,Cn=new WeakMap,we=new WeakMap,Zo=new WeakMap,xu=new WeakMap,Sp=new WeakMap,Tp=new WeakMap,ul=new WeakMap,lo=new WeakMap,Jo=new WeakMap,xp=new WeakMap,$s=new WeakMap,At=new WeakSet,l0=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},H1=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(this,Dn).values())if(n.hasTextLayer(t))return n;return null},vT=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=L(this,At,l0).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(c(this,ao)||S(this,ao,new hL(this)),c(this,ao).show(n,s,this.direction==="ltr"))},bT=function(){var o,l,u;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Zo)&&((o=c(this,ao))==null||o.hide(),S(this,Zo,null),L(this,At,_i).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Zo))return;const s=L(this,At,l0).call(this,t).closest(".textLayer");if(!s){c(this,Zo)&&((l=c(this,ao))==null||l.hide(),S(this,Zo,null),L(this,At,_i).call(this,{hasSelectedText:!1}));return}if((u=c(this,ao))==null||u.hide(),S(this,Zo,e),L(this,At,_i).call(this,{hasSelectedText:!0}),!(c(this,Cn)!==Kt.HIGHLIGHT&&c(this,Cn)!==Kt.NONE)&&(c(this,Cn)===Kt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,ol,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,Cn)===Kt.HIGHLIGHT?L(this,At,H1).call(this,s):null;d==null||d.toggleDrawing();const f=new AbortController,g=this.combinedSignal(f),y=m=>{m.type==="pointerup"&&m.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),m.type==="pointerup"&&L(this,At,u0).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},u0=function(t=""){c(this,Cn)===Kt.HIGHLIGHT?this.highlightSelection(t):c(this,vp)&&L(this,At,vT).call(this)},wT=function(){document.addEventListener("selectionchange",L(this,At,bT).bind(this),{signal:this._signal})},AT=function(){if(c(this,rl))return;S(this,rl,new AbortController);const t=this.combinedSignal(c(this,rl));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},_T=function(){var t;(t=c(this,rl))==null||t.abort(),S(this,rl,null)},z1=function(){if(c(this,ll))return;S(this,ll,new AbortController);const t=this.combinedSignal(c(this,ll));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},ET=function(){var t;(t=c(this,ll))==null||t.abort(),S(this,ll,null)},U1=function(){if(c(this,sl))return;S(this,sl,new AbortController);const t=this.combinedSignal(c(this,sl));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},$1=function(){var t;(t=c(this,sl))==null||t.abort(),S(this,sl,null)},ST=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},_i=function(t){Object.entries(t).some(([n,s])=>c(this,Tp)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Tp),t)}),c(this,Cn)===Kt.HIGHLIGHT&&t.hasSelectedEditor===!1&&L(this,At,Wo).call(this,[[ue.HIGHLIGHT_FREE,!0]]))},Wo=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},TT=async function(){if(!c(this,al)){S(this,al,!0);const t=[];for(const e of c(this,Dn).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,yn).values())e.enable()}},xT=function(){if(this.unselectAll(),c(this,al)){S(this,al,!1);for(const t of c(this,Dn).values())t.disable();for(const t of c(this,yn).values())t.disable()}},G1=function(t){const e=c(this,Dn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},CT=function(){let t=null;for(t of c(this,we));return t},Df=function(){if(c(this,yn).size===0)return!0;if(c(this,yn).size===1)for(const t of c(this,yn).values())return t.isEmpty();return!1},V1=function(t){for(const e of c(this,we))e.unselect();c(this,we).clear();for(const e of t)e.isEmpty()||(c(this,we).add(e),e.select());L(this,At,_i).call(this,{hasSelectedEditor:this.hasSelection})},lt(_h,"TRANSLATE_SMALL",1),lt(_h,"TRANSLATE_BIG",10);let Sc=_h;var kn,uo,Cr,Fh,co,ls,Bh,ho,Vi,ta,Cu,fo,cl,jr,Ff,c0;const Ei=class Ei{constructor(t){k(this,jr);k(this,kn,null);k(this,uo,!1);k(this,Cr,null);k(this,Fh,null);k(this,co,null);k(this,ls,null);k(this,Bh,!1);k(this,ho,null);k(this,Vi,null);k(this,ta,null);k(this,Cu,null);k(this,fo,!1);S(this,Vi,t),S(this,fo,t._uiManager.useNewAltTextFlow),c(Ei,cl)||S(Ei,cl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ei._l10n??(Ei._l10n=t)}async render(){const t=S(this,Cr,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=S(this,Fh,document.createElement("span"));t.append(e),c(this,fo)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(Ei,cl).missing),e.setAttribute("data-l10n-id",c(Ei,cl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Vi)._uiManager._signal;t.addEventListener("contextmenu",Hr,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const s=o=>{o.preventDefault(),c(this,Vi)._uiManager.editAltText(c(this,Vi)),c(this,fo)&&c(this,Vi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,jr,Ff)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(S(this,Bh,!0),s(o))},{signal:n}),await L(this,jr,c0).call(this),t}finish(){c(this,Cr)&&(c(this,Cr).focus({focusVisible:c(this,Bh)}),S(this,Bh,!1))}isEmpty(){return c(this,fo)?c(this,kn)===null:!c(this,kn)&&!c(this,uo)}hasData(){return c(this,fo)?c(this,kn)!==null||!!c(this,ta):this.isEmpty()}get guessedText(){return c(this,ta)}async setGuessedText(t){c(this,kn)===null&&(S(this,ta,t),S(this,Cu,await Ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),L(this,jr,c0).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,fo)||c(this,kn)){(e=c(this,ho))==null||e.remove(),S(this,ho,null);return}if(!c(this,ho)){const n=S(this,ho,document.createElement("div"));n.className="noAltTextBadge",c(this,Vi).div.append(n)}c(this,ho).classList.toggle("hidden",!t)}serialize(t){let e=c(this,kn);return!t&&c(this,ta)===e&&(e=c(this,Cu)),{altText:e,decorative:c(this,uo),guessedText:c(this,ta),textWithDisclaimer:c(this,Cu)}}get data(){return{altText:c(this,kn),decorative:c(this,uo)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:o=!1}){n&&(S(this,ta,n),S(this,Cu,s)),!(c(this,kn)===t&&c(this,uo)===e)&&(o||(S(this,kn,t),S(this,uo,e)),L(this,jr,c0).call(this))}toggle(t=!1){c(this,Cr)&&(!t&&c(this,ls)&&(clearTimeout(c(this,ls)),S(this,ls,null)),c(this,Cr).disabled=!t)}shown(){c(this,Vi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,jr,Ff)}})}destroy(){var t,e;(t=c(this,Cr))==null||t.remove(),S(this,Cr,null),S(this,Fh,null),S(this,co,null),(e=c(this,ho))==null||e.remove(),S(this,ho,null)}};kn=new WeakMap,uo=new WeakMap,Cr=new WeakMap,Fh=new WeakMap,co=new WeakMap,ls=new WeakMap,Bh=new WeakMap,ho=new WeakMap,Vi=new WeakMap,ta=new WeakMap,Cu=new WeakMap,fo=new WeakMap,cl=new WeakMap,jr=new WeakSet,Ff=function(){return c(this,kn)&&"added"||c(this,kn)===null&&this.guessedText&&"review"||"missing"},c0=async function(){var s,o,l;const t=c(this,Cr);if(!t)return;if(c(this,fo)){if(t.classList.toggle("done",!!c(this,kn)),t.setAttribute("data-l10n-id",c(Ei,cl)[c(this,jr,Ff)]),(s=c(this,Fh))==null||s.setAttribute("data-l10n-id",c(Ei,cl)[`${c(this,jr,Ff)}-label`]),!c(this,kn)){(o=c(this,co))==null||o.remove();return}}else{if(!c(this,kn)&&!c(this,uo)){t.classList.remove("done"),(l=c(this,co))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,co);if(!e){S(this,co,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Vi).id}`;const u=100,d=c(this,Vi)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,ls)),S(this,ls,null)},{once:!0}),t.addEventListener("mouseenter",()=>{S(this,ls,setTimeout(()=>{S(this,ls,null),c(this,co).classList.add("show"),c(this,Vi)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),t.addEventListener("mouseleave",()=>{var f;c(this,ls)&&(clearTimeout(c(this,ls)),S(this,ls,null)),(f=c(this,co))==null||f.classList.remove("show")},{signal:d})}c(this,uo)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,kn)),e.parentNode||t.append(e);const n=c(this,Vi).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},k(Ei,cl,null),lt(Ei,"_l10n",null);let B0=Ei;var Cp,ku,kp,Np,Lp,Rp,Pp,jh,ea,Nu,hl,xa,kT,NT,W1;const Bw=class Bw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){k(this,xa);k(this,Cp);k(this,ku,!1);k(this,kp,null);k(this,Np);k(this,Lp);k(this,Rp);k(this,Pp);k(this,jh);k(this,ea,null);k(this,Nu);k(this,hl,null);S(this,Cp,t),S(this,kp,n),S(this,Np,e),S(this,Lp,s),S(this,Rp,o),S(this,Pp,l),S(this,Nu,new AbortController),S(this,jh,AbortSignal.any([u,c(this,Nu).signal])),t.addEventListener("touchstart",L(this,xa,kT).bind(this),{passive:!1,signal:c(this,jh)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return se(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=c(this,Nu))==null||t.abort(),S(this,Nu,null)}};Cp=new WeakMap,ku=new WeakMap,kp=new WeakMap,Np=new WeakMap,Lp=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,jh=new WeakMap,ea=new WeakMap,Nu=new WeakMap,hl=new WeakMap,xa=new WeakSet,kT=function(t){var s,o,l;if((s=c(this,Np))!=null&&s.call(this)||t.touches.length<2)return;if(!c(this,hl)){S(this,hl,new AbortController);const u=AbortSignal.any([c(this,jh),c(this,hl).signal]),d=c(this,Cp),f={signal:u,passive:!1};d.addEventListener("touchmove",L(this,xa,NT).bind(this),f),d.addEventListener("touchend",L(this,xa,W1).bind(this),f),d.addEventListener("touchcancel",L(this,xa,W1).bind(this),f),(o=c(this,Lp))==null||o.call(this)}if(As(t),t.touches.length!==2||(l=c(this,kp))!=null&&l.call(this)){S(this,ea,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),S(this,ea,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},NT=function(t){var j;if(!c(this,ea)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:o}=e,{screenX:l,screenY:u}=n,d=c(this,ea),{touch0X:f,touch0Y:g,touch1X:y,touch1Y:m}=d,b=y-f,_=m-g,E=l-s,x=u-o,N=Math.hypot(E,x)||1,I=Math.hypot(b,_)||1;if(!c(this,ku)&&Math.abs(I-N)<=Bw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=s,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,t.preventDefault(),!c(this,ku)){S(this,ku,!0);return}const B=[(s+l)/2,(o+u)/2];(j=c(this,Rp))==null||j.call(this,B,I,N)},W1=function(t){var e;c(this,hl).abort(),S(this,hl,null),(e=c(this,Pp))==null||e.call(this),c(this,ea)&&(t.preventDefault(),S(this,ea,null),S(this,ku,!1))};let j0=Bw;var Lu,kr,Pe,qh,dl,Ip,Ru,Fn,Pu,na,fl,Op,Iu,us,Mp,Ou,ia,po,Hh,zh,Gs,Mu,Dp,J0,qt,X1,Fp,Y1,h0,LT,RT,K1,d0,Q1,PT,IT,OT,Z1,MT,J1,DT,FT,BT,tb,Bf;const Zt=class Zt{constructor(t){k(this,qt);k(this,Lu,null);k(this,kr,null);k(this,Pe,null);k(this,qh,!1);k(this,dl,null);k(this,Ip,"");k(this,Ru,!1);k(this,Fn,null);k(this,Pu,null);k(this,na,null);k(this,fl,null);k(this,Op,"");k(this,Iu,!1);k(this,us,null);k(this,Mp,!1);k(this,Ou,!1);k(this,ia,!1);k(this,po,null);k(this,Hh,0);k(this,zh,0);k(this,Gs,null);k(this,Mu,null);lt(this,"_editToolbar",null);lt(this,"_initialOptions",Object.create(null));lt(this,"_initialData",null);lt(this,"_isVisible",!0);lt(this,"_uiManager",null);lt(this,"_focusEventsAllowed",!0);k(this,Dp,!1);k(this,J0,Zt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Zt.prototype._resizeWithKeyboard,e=Sc.TRANSLATE_SMALL,n=Sc.TRANSLATE_BIG;return se(this,"_resizerKeyboardManager",new qg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Zt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new pL({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Zt._l10n??(Zt._l10n=t),Zt._l10nResizer||(Zt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Zt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Zt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Se("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Dp)}set _isDraggable(t){var e;S(this,Dp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,J0)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):L(this,qt,Bf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Iu)?S(this,Iu,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[o,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/o,this.y=(e+s)/l,this.fixAndSetPosition()}translate(t,e){L(this,qt,X1).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,us)||S(this,us,[this.x,this.y,this.width,this.height]),L(this,qt,X1).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){c(this,us)||S(this,us,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,o]}=this;if(this.x+=t/s,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:g}=n;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,us)&&(c(this,us)[0]!==this.x||c(this,us)[1]!==this.y)}get _hasBeenResized(){return!!c(this,us)&&(c(this,us)[2]!==this.width||c(this,us)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Zt,s=n/t,o=n/e;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=n,d*=s,o*=n,l*=s,this._mustFixPosition)switch(t){case 0:o=Math.max(0,Math.min(n-u,o)),l=Math.max(0,Math.min(s-d,l));break;case 90:o=Math.max(0,Math.min(n-d,o)),l=Math.min(s,Math.max(u,l));break;case 180:o=Math.min(n,Math.max(u,o)),l=Math.min(s,Math.max(d,l));break;case 270:o=Math.min(n,Math.max(d,o)),l=Math.max(0,Math.min(s-u,l));break}this.x=o/=n,this.y=l/=s;const[f,g]=this.getBaseTranslation();o+=f,l+=g,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return L(n=Zt,Fp,Y1).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return L(n=Zt,Fp,Y1).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/n).toFixed(2)}%`,c(this,Ru)||(o.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),o=!c(this,Ru)&&e.endsWith("%");if(s&&o)return;const[l,u]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!c(this,Ru)&&!o&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Pe))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,Ou)?this._editToolbar:(this._editToolbar=new F1(this),this.div.append(this._editToolbar.render()),c(this,Pe)&&await this._editToolbar.addAltText(c(this,Pe)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,Pe))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Pe)||(B0.initialize(Zt._l10n),S(this,Pe,new B0(this)),c(this,Lu)&&(c(this,Pe).data=c(this,Lu),S(this,Lu,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,Pe))==null?void 0:t.data}set altTextData(t){c(this,Pe)&&(c(this,Pe).data=t)}get guessedAltText(){var t;return(t=c(this,Pe))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Pe))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Pe))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Pe)&&!c(this,Pe).isEmpty()}hasAltTextData(){var t;return((t=c(this,Pe))==null?void 0:t.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,qh)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),L(this,qt,J1).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),F0(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Mu)||S(this,Mu,new j0({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:L(this,qt,PT).bind(this),onPinching:L(this,qt,IT).bind(this),onPinchEnd:L(this,qt,OT).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(t){const{isMac:e}=Ci.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(S(this,Iu,!0),this._isDraggable){L(this,qt,MT).call(this,t);return}L(this,qt,Z1).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,po)&&clearTimeout(c(this,po)),S(this,po,setTimeout(()=>{var t;S(this,po,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/s,g=e/s,y=this.x*o,m=this.y*l,b=this.width*o,_=this.height*l;switch(n){case 0:return[y+f+u,l-m-g-_+d,y+f+b+u,l-m-g+d];case 90:return[y+g+u,l-m+f+d,y+g+_+u,l-m+f+b+d];case 180:return[y-f-b+u,l-m+g+d,y-f+u,l-m+g+_+d];case 270:return[y-g-_+u,l-m-f-b+d,y-g+u,l-m-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,o,l]=t,u=o-n,d=l-s;switch(this.rotation){case 0:return[n,e-l,u,d];case 90:return[n,e-s,d,u];case 180:return[o,e-s,u,d];case 270:return[o,e-l,d,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){S(this,Ou,!0)}disableEditMode(){S(this,Ou,!1)}isInEditMode(){return c(this,Ou)}shouldGetKeyboardEvents(){return c(this,ia)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&s>0&&t<o&&n>0}rebuild(){L(this,qt,J1).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Se("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,S(s,Lu,t.accessibilityData);const[o,l]=s.pageDimensions,[u,d,f,g]=s.getRectInCurrentCoords(t.rect,l);return s.x=u/o,s.y=d/l,s.width=f/o,s.height=g/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,fl))==null||t.abort(),S(this,fl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,po)&&(clearTimeout(c(this,po)),S(this,po,null)),L(this,qt,Bf).call(this),this.removeEditToolbar(),c(this,Gs)){for(const n of c(this,Gs).values())clearTimeout(n);S(this,Gs,null)}this.parent=null,(e=c(this,Mu))==null||e.destroy(),S(this,Mu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(L(this,qt,LT).call(this),c(this,Fn).classList.remove("hidden"),F0(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),S(this,na,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Fn).children;if(!c(this,kr)){S(this,kr,Array.from(e));const l=L(this,qt,DT).bind(this),u=L(this,qt,FT).bind(this),d=this._uiManager._signal;for(const f of c(this,kr)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",L(this,qt,BT).bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",Zt._l10nResizer[g])}}const n=c(this,kr)[0];let s=0;for(const l of e){if(l===n)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,kr).length/4);if(o!==s){if(o<s)for(let u=0;u<s-o;u++)c(this,Fn).append(c(this,Fn).firstChild);else if(o>s)for(let u=0;u<o-s;u++)c(this,Fn).firstChild.before(c(this,Fn).lastChild);let l=0;for(const u of e){const f=c(this,kr)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Zt._l10nResizer[f])}}L(this,qt,tb).call(this,0),S(this,ia,!0),c(this,Fn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,ia)&&L(this,qt,Q1).call(this,c(this,Op),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){L(this,qt,Bf).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,o;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=c(this,Pe))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,o;(t=c(this,Fn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(o=c(this,Pe))==null||o.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Mp)}set isEditing(t){S(this,Mp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){S(this,Ru,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,Gs)||S(this,Gs,new Map);const{action:n}=t;let s=c(this,Gs).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),c(this,Gs).delete(n),c(this,Gs).size===0&&S(this,Gs,null)},Zt._telemetryTimeout),c(this,Gs).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),S(this,qh,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,qh,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Lu=new WeakMap,kr=new WeakMap,Pe=new WeakMap,qh=new WeakMap,dl=new WeakMap,Ip=new WeakMap,Ru=new WeakMap,Fn=new WeakMap,Pu=new WeakMap,na=new WeakMap,fl=new WeakMap,Op=new WeakMap,Iu=new WeakMap,us=new WeakMap,Mp=new WeakMap,Ou=new WeakMap,ia=new WeakMap,po=new WeakMap,Hh=new WeakMap,zh=new WeakMap,Gs=new WeakMap,Mu=new WeakMap,Dp=new WeakMap,J0=new WeakMap,qt=new WeakSet,X1=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Fp=new WeakSet,Y1=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},h0=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},LT=function(){if(c(this,Fn))return;S(this,Fn,document.createElement("div")),c(this,Fn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");c(this,Fn).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",L(this,qt,RT).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Hr,{signal:e}),s.tabIndex=-1}this.div.prepend(c(this,Fn))},RT=function(t,e){var g;e.preventDefault();const{isMac:n}=Ci.platform;if(e.button!==0||e.ctrlKey&&n)return;(g=c(this,Pe))==null||g.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,S(this,Pu,[e.screenX,e.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",L(this,qt,Q1).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",As,{passive:!1,signal:l}),window.addEventListener("contextmenu",Hr,{signal:l}),S(this,na,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=c(this,Pe))==null||y.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=d,L(this,qt,d0).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},K1=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[o,l]=this.parentDimensions;this.setDims(o*n,l*s),this.fixAndSetPosition(),this._onResized()},d0=function(){if(!c(this,na))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=c(this,na);S(this,na,null);const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===e&&u===n&&d===s||this.addCommands({cmd:L(this,qt,K1).bind(this,o,l,u,d),undo:L(this,qt,K1).bind(this,t,e,n,s),mustExec:!0})},Q1=function(t,e){const[n,s]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=Zt.MIN_SIZE/n,g=Zt.MIN_SIZE/s,y=L(this,qt,h0).call(this,this.rotation),m=(V,K)=>[y[0]*V+y[2]*K,y[1]*V+y[3]*K],b=L(this,qt,h0).call(this,360-this.rotation),_=(V,K)=>[b[0]*V+b[2]*K,b[1]*V+b[3]*K];let E,x,N=!1,I=!1;switch(t){case"topLeft":N=!0,E=(V,K)=>[0,0],x=(V,K)=>[V,K];break;case"topMiddle":E=(V,K)=>[V/2,0],x=(V,K)=>[V/2,K];break;case"topRight":N=!0,E=(V,K)=>[V,0],x=(V,K)=>[0,K];break;case"middleRight":I=!0,E=(V,K)=>[V,K/2],x=(V,K)=>[0,K/2];break;case"bottomRight":N=!0,E=(V,K)=>[V,K],x=(V,K)=>[0,0];break;case"bottomMiddle":E=(V,K)=>[V/2,K],x=(V,K)=>[V/2,0];break;case"bottomLeft":N=!0,E=(V,K)=>[0,K],x=(V,K)=>[V,0];break;case"middleLeft":I=!0,E=(V,K)=>[0,K/2],x=(V,K)=>[V,K/2];break}const B=E(u,d),j=x(u,d);let T=m(...j);const P=Zt._round(o+T[0]),M=Zt._round(l+T[1]);let W=1,nt=1,ht,O;if(e.fromKeyboard)({deltaX:ht,deltaY:O}=e);else{const{screenX:V,screenY:K}=e,[Z,ot]=c(this,Pu);[ht,O]=this.screenToPageTranslation(V-Z,K-ot),c(this,Pu)[0]=V,c(this,Pu)[1]=K}if([ht,O]=_(ht/n,O/s),N){const V=Math.hypot(u,d);W=nt=Math.max(Math.min(Math.hypot(j[0]-B[0]-ht,j[1]-B[1]-O)/V,1/u,1/d),f/u,g/d)}else I?W=Math.max(f,Math.min(1,Math.abs(j[0]-B[0]-ht)))/u:nt=Math.max(g,Math.min(1,Math.abs(j[1]-B[1]-O)))/d;const et=Zt._round(u*W),q=Zt._round(d*nt);T=m(...x(et,q));const X=P-T[0],rt=M-T[1];c(this,us)||S(this,us,[this.x,this.y,this.width,this.height]),this.width=et,this.height=q,this.x=X,this.y=rt,this.setDims(n*et,s*q),this.fixAndSetPosition(),this._onResizing()},PT=function(){var t;S(this,na,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Pe))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},IT=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=L(this,qt,h0).call(this,this.rotation),u=(P,M)=>[l[0]*P+l[2]*M,l[1]*P+l[3]*M],[d,f]=this.parentDimensions,g=this.x,y=this.y,m=this.width,b=this.height,_=Zt.MIN_SIZE/d,E=Zt.MIN_SIZE/f;o=Math.max(Math.min(o,1/m,1/b),_/m,E/b);const x=Zt._round(m*o),N=Zt._round(b*o);if(x===m&&N===b)return;c(this,us)||S(this,us,[g,y,m,b]);const I=u(m/2,b/2),B=Zt._round(g+I[0]),j=Zt._round(y+I[1]),T=u(x/2,N/2);this.x=B-T[0],this.y=j-T[1],this.width=x,this.height=N,this.setDims(d*x,f*N),this.fixAndSetPosition(),this._onResizing()},OT=function(){var t;(t=c(this,Pe))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),L(this,qt,d0).call(this)},Z1=function(t){const{isMac:e}=Ci.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},MT=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:o},u=f=>{s.abort(),S(this,dl,null),S(this,Iu,!1),this._uiManager.endDragSession()||L(this,qt,Z1).call(this,f),n&&this._onStopDragging()};e&&(S(this,Hh,t.clientX),S(this,zh,t.clientY),S(this,dl,t.pointerId),S(this,Ip,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:m}=f;if(m!==c(this,dl)){As(f);return}const[b,_]=this.screenToPageTranslation(g-c(this,Hh),y-c(this,zh));S(this,Hh,g),S(this,zh,y),this._uiManager.dragSelectedEditors(b,_)},l),window.addEventListener("touchmove",As,l),window.addEventListener("pointerdown",f=>{f.pointerType===c(this,Ip)&&(c(this,Mu)||f.isPrimary)&&u(f),As(f)},l));const d=f=>{if(!c(this,dl)||c(this,dl)===f.pointerId){u(f);return}As(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},J1=function(){if(c(this,fl)||!this.div)return;S(this,fl,new AbortController);const t=this._uiManager.combinedSignal(c(this,fl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},DT=function(t){Zt._resizerKeyboardManager.exec(this,t)},FT=function(t){var e;c(this,ia)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Fn)&&L(this,qt,Bf).call(this)},BT=function(t){S(this,Op,c(this,ia)?t:"")},tb=function(t){if(c(this,kr))for(const e of c(this,kr))e.tabIndex=t},Bf=function(){S(this,ia,!1),L(this,qt,tb).call(this,-1),L(this,qt,d0).call(this)},k(Zt,Fp),lt(Zt,"_l10n",null),lt(Zt,"_l10nResizer",null),lt(Zt,"_borderLineWidth",-1),lt(Zt,"_colorManager",new q1),lt(Zt,"_zIndex",1),lt(Zt,"_telemetryTimeout",1e3);let Ge=Zt;class pL extends Ge{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const fE=3285377520,qs=4294901760,no=65535;class jT{constructor(t){this.h1=t?t&4294967295:fE,this.h2=t?t&4294967295:fE}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let E=0,x=t.length;E<x;E++){const N=t.charCodeAt(E);N<=255?e[n++]=N:(e[n++]=N>>>8,e[n++]=N&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,o=n-s*4,l=new Uint32Array(e.buffer,0,s);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,m=461845907,b=y&no,_=m&no;for(let E=0;E<s;E++)E&1?(u=l[E],u=u*y&qs|u*b&no,u=u<<15|u>>>17,u=u*m&qs|u*_&no,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[E],d=d*y&qs|d*b&no,d=d<<15|d>>>17,d=d*m&qs|d*_&no,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=e[s*4+2]<<16;case 2:u^=e[s*4+1]<<8;case 1:u^=e[s*4],u=u*y&qs|u*b&no,u=u<<15|u>>>17,u=u*m&qs|u*_&no,s&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&qs|t*36045&no,e=e*4283543511&qs|((e<<16|t>>>16)*2950163797&qs)>>>16,t^=e>>>1,t=t*444984403&qs|t*60499&no,e=e*3301882366&qs|((e<<16|t>>>16)*3120437893&qs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const eb=Object.freeze({map:null,hash:"",transfer:void 0});var Du,Fu,Nn,ty,qT;class vw{constructor(){k(this,ty);k(this,Du,!1);k(this,Fu,null);k(this,Nn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(this,Nn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return c(this,Nn).get(t)}remove(t){if(c(this,Nn).delete(t),c(this,Nn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,Nn).values())if(e instanceof Ge)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(this,Nn).get(t);let s=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(s=!0,n[o]=l);else s=!0,c(this,Nn).set(t,e);s&&L(this,ty,qT).call(this),e instanceof Ge&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,Nn).has(t)}getAll(){return c(this,Nn).size>0?dw(c(this,Nn)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return c(this,Nn).size}resetModified(){c(this,Du)&&(S(this,Du,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new HT(this)}get serializable(){if(c(this,Nn).size===0)return eb;const t=new Map,e=new jT,n=[],s=Object.create(null);let o=!1;for(const[l,u]of c(this,Nn)){const d=u instanceof Ge?u.serialize(!1,s):u;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:eb}get editorStats(){let t=null;const e=new Map;for(const n of c(this,Nn).values()){if(!(n instanceof Ge))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:o}=s;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const l=t[o]||(t[o]=new Map);for(const[u,d]of Object.entries(s)){if(u==="type")continue;let f=l.get(u);f||(f=new Map,l.set(u,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){S(this,Fu,null)}get modifiedIds(){if(c(this,Fu))return c(this,Fu);const t=[];for(const e of c(this,Nn).values())!(e instanceof Ge)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return S(this,Fu,{ids:new Set(t),hash:t.join(",")})}}Du=new WeakMap,Fu=new WeakMap,Nn=new WeakMap,ty=new WeakSet,qT=function(){c(this,Du)||(S(this,Du,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Bp;class HT extends vw{constructor(e){super();k(this,Bp);const{map:n,hash:s,transfer:o}=e.serializable,l=structuredClone(n,o?{transfer:o}:null);S(this,Bp,{map:l,hash:s,transfer:o})}get print(){Se("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Bp)}get modifiedIds(){return se(this,"modifiedIds",{ids:new Set,hash:""})}}Bp=new WeakMap;var Uh;class gL{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){k(this,Uh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,Uh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||c(this,Uh).has(t.loadedName))){if(cn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:o}=t,l=new FontFace(n,s,o);this.addNativeFontFace(l);try{await l.load(),c(this,Uh).add(n),e==null||e(t)}catch{Qt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Se("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Qt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return se(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ri||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),se(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(cn(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return se(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(j,T){return j.charCodeAt(T)<<24|j.charCodeAt(T+1)<<16|j.charCodeAt(T+2)<<8|j.charCodeAt(T+3)&255}function s(j,T,P,M){const W=j.substring(0,T),nt=j.substring(T+P);return W+M+nt}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(j,T){if(++f>30){Qt("Load test font never loaded."),T();return}if(d.font="30px "+j,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(g.bind(null,j,T))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,y.length,y);const _=16,E=1482184792;let x=n(m,_);for(o=0,l=y.length-3;o<l;o+=4)x=x-E+n(y,o)|0;o<y.length&&(x=x-E+n(y+"XXX",o)|0),m=s(m,_,4,tL(x));const N=`url(data:font/opentype;base64,${btoa(m)});`,I=`@font-face {font-family:"${y}";src:${N}}`;this.insertRule(I);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const j of[t.loadedName,y]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=j,B.append(T)}this._document.body.append(B),g(y,()=>{B.remove(),e.complete()})}}Uh=new WeakMap;class mL{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const o in t)this[o]=t[o];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${oL(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){Qt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}}const qm={DATA:1,ERROR:2},un={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function pE(){}function Gi(a){if(a instanceof Ml||a instanceof O1||a instanceof ip||a instanceof cE||a instanceof D0||a instanceof r1)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||Se('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Ml(a.message);case"InvalidPDFException":return new O1(a.message);case"MissingPDFException":return new ip(a.message);case"PasswordException":return new cE(a.message,a.code);case"UnexpectedResponseException":return new D0(a.message,a.status);case"UnknownErrorException":return new r1(a.message,a.details)}return new r1(a.message,a.toString())}var $h,tr,zT,UT,$T,f0;class jf{constructor(t,e,n){k(this,tr);k(this,$h,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",L(this,tr,zT).bind(this),{signal:c(this,$h).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,s){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},s),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:un.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{cn(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:un.CANCEL,streamId:o,reason:Gi(f)}),g.promise}},n)}destroy(){var t;(t=c(this,$h))==null||t.abort(),S(this,$h,null)}}$h=new WeakMap,tr=new WeakSet,zT=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){L(this,tr,$T).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===qm.DATA)s.resolve(t.data);else if(t.callback===qm.ERROR)s.reject(Gi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:s,callback:qm.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:s,callback:qm.ERROR,callbackId:t.callbackId,reason:Gi(l)})});return}if(t.streamId){L(this,tr,UT).call(this,t);return}e(t.data)},UT=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=g,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:s,stream:un.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:un.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){cn(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:un.ERROR,streamId:e,reason:Gi(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:s,stream:un.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:un.START_COMPLETE,streamId:e,reason:Gi(f)})})},$T=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case un.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Gi(t.reason));break;case un.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Gi(t.reason));break;case un.PULL:if(!u){o.postMessage({sourceName:n,targetName:s,stream:un.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||pE).then(function(){o.postMessage({sourceName:n,targetName:s,stream:un.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:un.PULL_COMPLETE,streamId:e,reason:Gi(f)})});break;case un.ENQUEUE:if(cn(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case un.CLOSE:if(cn(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),L(this,tr,f0).call(this,l,e);break;case un.ERROR:cn(l,"error should have stream controller"),l.controller.error(Gi(t.reason)),L(this,tr,f0).call(this,l,e);break;case un.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Gi(t.reason)),L(this,tr,f0).call(this,l,e);break;case un.CANCEL:if(!u)break;const d=Gi(t.reason);Promise.try(u.onCancel||pE,d).then(function(){o.postMessage({sourceName:n,targetName:s,stream:un.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:un.CANCEL_COMPLETE,streamId:e,reason:Gi(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},f0=async function(t,e){var n,s,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var jp;class GT{constructor({enableHWA:t=!1}){k(this,jp,!1);S(this,jp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,jp)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Se("Abstract method `_createCanvas` called.")}}jp=new WeakMap;class yL extends GT{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class VT{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class WT extends VT{async _fetch(t){const e=await yy(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):my(e)}}class XT{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,o){return"none"}destroy(t=!1){}}var Bu,Gh,sa,ra,ei,ju,qu,Et,Zn,qf,uh,p0,ch,YT,nb,hh,Hf,zf,ib,Uf;class vL extends XT{constructor({docId:e,ownerDocument:n=globalThis.document}){super();k(this,Et);k(this,Bu);k(this,Gh);k(this,sa);k(this,ra);k(this,ei);k(this,ju);k(this,qu,0);S(this,ra,e),S(this,ei,n)}addFilter(e){if(!e)return"none";let n=c(this,Et,Zn).get(e);if(n)return n;const[s,o,l]=L(this,Et,p0).call(this,e),u=e.length===1?s:`${s}${o}${l}`;if(n=c(this,Et,Zn).get(u),n)return c(this,Et,Zn).set(e,n),n;const d=`g_${c(this,ra)}_transfer_map_${wi(this,qu)._++}`,f=L(this,Et,ch).call(this,d);c(this,Et,Zn).set(e,f),c(this,Et,Zn).set(u,f);const g=L(this,Et,hh).call(this,d);return L(this,Et,zf).call(this,s,o,l,g),f}addHCMFilter(e,n){var _;const s=`${e}-${n}`,o="base";let l=c(this,Et,qf).get(o);if((l==null?void 0:l.key)===s||(l?((_=l.filter)==null||_.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},c(this,Et,qf).set(o,l)),!e||!n))return l.url;const u=L(this,Et,Uf).call(this,e);e=Mt.makeHexColor(...u);const d=L(this,Et,Uf).call(this,n);if(n=Mt.makeHexColor(...d),c(this,Et,uh).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let E=0;E<=255;E++){const x=E/255;f[E]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const g=f.join(","),y=`g_${c(this,ra)}_hcm_filter`,m=l.filter=L(this,Et,hh).call(this,y);L(this,Et,zf).call(this,g,g,g,m),L(this,Et,nb).call(this,m);const b=(E,x)=>{const N=u[E]/255,I=d[E]/255,B=new Array(x+1);for(let j=0;j<=x;j++)B[j]=N+j/x*(I-N);return B.join(",")};return L(this,Et,zf).call(this,b(0,5),b(1,5),b(2,5),m),l.url=L(this,Et,ch).call(this,y),l.url}addAlphaFilter(e){let n=c(this,Et,Zn).get(e);if(n)return n;const[s]=L(this,Et,p0).call(this,[e]),o=`alpha_${s}`;if(n=c(this,Et,Zn).get(o),n)return c(this,Et,Zn).set(e,n),n;const l=`g_${c(this,ra)}_alpha_map_${wi(this,qu)._++}`,u=L(this,Et,ch).call(this,l);c(this,Et,Zn).set(e,u),c(this,Et,Zn).set(o,u);const d=L(this,Et,hh).call(this,l);return L(this,Et,ib).call(this,s,d),u}addLuminosityFilter(e){let n=c(this,Et,Zn).get(e||"luminosity");if(n)return n;let s,o;if(e?([s]=L(this,Et,p0).call(this,[e]),o=`luminosity_${s}`):o="luminosity",n=c(this,Et,Zn).get(o),n)return c(this,Et,Zn).set(e,n),n;const l=`g_${c(this,ra)}_luminosity_map_${wi(this,qu)._++}`,u=L(this,Et,ch).call(this,l);c(this,Et,Zn).set(e,u),c(this,Et,Zn).set(o,u);const d=L(this,Et,hh).call(this,l);return L(this,Et,YT).call(this,d),e&&L(this,Et,ib).call(this,s,d),u}addHighlightHCMFilter(e,n,s,o,l){var I;const u=`${n}-${s}-${o}-${l}`;let d=c(this,Et,qf).get(e);if((d==null?void 0:d.key)===u||(d?((I=d.filter)==null||I.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},c(this,Et,qf).set(e,d)),!n||!s))return d.url;const[f,g]=[n,s].map(L(this,Et,Uf).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),m=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[b,_]=[o,l].map(L(this,Et,Uf).bind(this));m<y&&([y,m,b,_]=[m,y,_,b]),c(this,Et,uh).style.color="";const E=(B,j,T)=>{const P=new Array(256),M=(m-y)/T,W=B/255,nt=(j-B)/(255*T);let ht=0;for(let O=0;O<=T;O++){const et=Math.round(y+O*M),q=W+O*nt;for(let X=ht;X<=et;X++)P[X]=q;ht=et+1}for(let O=ht;O<256;O++)P[O]=P[ht-1];return P.join(",")},x=`g_${c(this,ra)}_hcm_${e}_filter`,N=d.filter=L(this,Et,hh).call(this,x);return L(this,Et,nb).call(this,N),L(this,Et,zf).call(this,E(b[0],_[0],5),E(b[1],_[1],5),E(b[2],_[2],5),N),d.url=L(this,Et,ch).call(this,x),d.url}destroy(e=!1){var n,s,o,l;e&&((n=c(this,ju))!=null&&n.size)||((s=c(this,sa))==null||s.parentNode.parentNode.remove(),S(this,sa,null),(o=c(this,Gh))==null||o.clear(),S(this,Gh,null),(l=c(this,ju))==null||l.clear(),S(this,ju,null),S(this,qu,0))}}Bu=new WeakMap,Gh=new WeakMap,sa=new WeakMap,ra=new WeakMap,ei=new WeakMap,ju=new WeakMap,qu=new WeakMap,Et=new WeakSet,Zn=function(){return c(this,Gh)||S(this,Gh,new Map)},qf=function(){return c(this,ju)||S(this,ju,new Map)},uh=function(){if(!c(this,sa)){const e=c(this,ei).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=c(this,ei).createElementNS(Vo,"svg");s.setAttribute("width",0),s.setAttribute("height",0),S(this,sa,c(this,ei).createElementNS(Vo,"defs")),e.append(s),s.append(c(this,sa)),c(this,ei).body.append(e)}return c(this,sa)},p0=function(e){if(e.length===1){const f=e[0],g=new Array(256);for(let m=0;m<256;m++)g[m]=f[m]/255;const y=g.join(",");return[y,y,y]}const[n,s,o]=e,l=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,u[f]=s[f]/255,d[f]=o[f]/255;return[l.join(","),u.join(","),d.join(",")]},ch=function(e){if(c(this,Bu)===void 0){S(this,Bu,"");const n=c(this,ei).URL;n!==c(this,ei).baseURI&&(vy(n)?Qt('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Bu,n.split("#",1)[0]))}return`url(${c(this,Bu)}#${e})`},YT=function(e){const n=c(this,ei).createElementNS(Vo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},nb=function(e){const n=c(this,ei).createElementNS(Vo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},hh=function(e){const n=c(this,ei).createElementNS(Vo,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),c(this,Et,uh).append(n),n},Hf=function(e,n,s){const o=c(this,ei).createElementNS(Vo,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",s),e.append(o)},zf=function(e,n,s,o){const l=c(this,ei).createElementNS(Vo,"feComponentTransfer");o.append(l),L(this,Et,Hf).call(this,l,"feFuncR",e),L(this,Et,Hf).call(this,l,"feFuncG",n),L(this,Et,Hf).call(this,l,"feFuncB",s)},ib=function(e,n){const s=c(this,ei).createElementNS(Vo,"feComponentTransfer");n.append(s),L(this,Et,Hf).call(this,s,"feFuncA",e)},Uf=function(e){return c(this,Et,uh).style.color=e,yw(getComputedStyle(c(this,Et,uh)).getPropertyValue("color"))};class KT{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class QT extends KT{async _fetch(t){const e=await yy(t,"arraybuffer");return new Uint8Array(e)}}ri&&Qt("Please use the `legacy` build in Node.js environments.");async function ZT(a){const e=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(e)}class bL extends XT{}class wL extends GT{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class AL extends VT{async _fetch(t){return ZT(t)}}class _L extends KT{async _fetch(t){return ZT(t)}}const si={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function sb(a,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),a.clip(s)}class bw{getPattern(){Se("Abstract method `getPattern` called.")}}class EL extends bw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let o;if(s===si.STROKE||s===si.FILL){const l=e.current.getClippedPathBoundingBox(s,Be(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),n=Mt.transform(n,[1,0,0,1,l[0],l[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),sb(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else sb(t,this._bbox),o=this._createGradient(t);return o}}function l1(a,t,e,n,s,o,l,u){const d=t.coords,f=t.colors,g=a.data,y=a.width*4;let m;d[e+1]>d[n+1]&&(m=e,e=n,n=m,m=o,o=l,l=m),d[n+1]>d[s+1]&&(m=n,n=s,s=m,m=l,l=u,u=m),d[e+1]>d[n+1]&&(m=e,e=n,n=m,m=o,o=l,l=m);const b=(d[e]+t.offsetX)*t.scaleX,_=(d[e+1]+t.offsetY)*t.scaleY,E=(d[n]+t.offsetX)*t.scaleX,x=(d[n+1]+t.offsetY)*t.scaleY,N=(d[s]+t.offsetX)*t.scaleX,I=(d[s+1]+t.offsetY)*t.scaleY;if(_>=I)return;const B=f[o],j=f[o+1],T=f[o+2],P=f[l],M=f[l+1],W=f[l+2],nt=f[u],ht=f[u+1],O=f[u+2],et=Math.round(_),q=Math.round(I);let X,rt,V,K,Z,ot,J,D;for(let U=et;U<=q;U++){if(U<x){const yt=U<_?0:(_-U)/(_-x);X=b-(b-E)*yt,rt=B-(B-P)*yt,V=j-(j-M)*yt,K=T-(T-W)*yt}else{let yt;U>I?yt=1:x===I?yt=0:yt=(x-U)/(x-I),X=E-(E-N)*yt,rt=P-(P-nt)*yt,V=M-(M-ht)*yt,K=W-(W-O)*yt}let st;U<_?st=0:U>I?st=1:st=(_-U)/(_-I),Z=b-(b-N)*st,ot=B-(B-nt)*st,J=j-(j-ht)*st,D=T-(T-O)*st;const gt=Math.round(Math.min(X,Z)),at=Math.round(Math.max(X,Z));let vt=y*U+gt*4;for(let yt=gt;yt<=at;yt++)st=(X-yt)/(X-Z),st<0?st=0:st>1&&(st=1),g[vt++]=rt-(rt-ot)*st|0,g[vt++]=V-(V-J)*st|0,g[vt++]=K-(K-D)*st|0,g[vt++]=255}}function SL(a,t,e){const n=t.coords,s=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)l1(a,e,n[g],n[g+1],n[g+u],s[g],s[g+1],s[g+u]),l1(a,e,n[g+u+1],n[g+1],n[g+u],s[g+u+1],s[g+1],s[g+u])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)l1(a,e,n[o],n[o+1],n[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class TL extends bw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),b=f/y,_=g/m,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/b,scaleY:1/_},x=y+2*2,N=m+2*2,I=n.getCanvas("mesh",x,N),B=I.context,j=B.createImageData(y,m);if(e){const P=j.data;for(let M=0,W=P.length;M<W;M+=4)P[M]=e[0],P[M+1]=e[1],P[M+2]=e[2],P[M+3]=255}for(const P of this._figures)SL(j,P,E);return B.putImageData(j,2,2),{canvas:I.canvas,offsetX:u-2*b,offsetY:d-2*_,scaleX:b,scaleY:_}}getPattern(t,e,n,s){sb(t,this._bbox);let o;if(s===si.SHADING)o=Mt.singularValueDecompose2dScale(Be(t));else if(o=Mt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=Mt.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const l=this._createMeshCanvas(o,s===si.SHADING?null:this._background,e.cachedCanvases);return s!==si.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class xL extends bw{getPattern(){return"hotpink"}}function CL(a){switch(a[0]){case"RadialAxial":return new EL(a);case"Mesh":return new TL(a);case"Dummy":return new xL}throw new Error(`Unknown IR type: ${a[0]}`)}const gE={COLORED:1,UNCOLORED:2},ey=class ey{constructor(t,e,n,s,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:o,color:l,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),gy("TilingType: "+o);const g=e[0],y=e[1],m=e[2],b=e[3],_=m-g,E=b-y,x=Mt.singularValueDecompose2dScale(this.matrix),N=Mt.singularValueDecompose2dScale(this.baseTransform),I=x[0]*N[0],B=x[1]*N[1];let j=_,T=E,P=!1,M=!1;const W=Math.ceil(d*I),nt=Math.ceil(f*B),ht=Math.ceil(_*I),O=Math.ceil(E*B);W>=ht?j=d:P=!0,nt>=O?T=f:M=!0;const et=this.getSizeAndScale(j,this.ctx.canvas.width,I),q=this.getSizeAndScale(T,this.ctx.canvas.height,B),X=t.cachedCanvases.getCanvas("pattern",et.size,q.size),rt=X.context,V=u.createCanvasGraphics(rt);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,s,l),rt.translate(-et.scale*g,-q.scale*y),V.transform(et.scale,0,0,q.scale,0,0),rt.save(),this.clipBbox(V,g,y,m,b),V.baseTransform=Be(V.ctx),V.executeOperatorList(n),V.endDrawing(),rt.restore(),P||M){const K=X.canvas;P&&(j=d),M&&(T=f);const Z=this.getSizeAndScale(j,this.ctx.canvas.width,I),ot=this.getSizeAndScale(T,this.ctx.canvas.height,B),J=Z.size,D=ot.size,U=t.cachedCanvases.getCanvas("pattern-workaround",J,D),st=U.context,gt=P?Math.floor(_/d):0,at=M?Math.floor(E/f):0;for(let vt=0;vt<=gt;vt++)for(let yt=0;yt<=at;yt++)st.drawImage(K,J*vt,D*yt,J,D,0,0,J,D);return{canvas:U.canvas,scaleX:Z.scale,scaleY:ot.scale,offsetX:g,offsetY:y}}return{canvas:X.canvas,scaleX:et.scale,scaleY:q.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,n){const s=Math.max(ey.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=s?o=s:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,s,o){const l=s-e,u=o-n;t.ctx.rect(e,n,l,u),t.current.updateRectMinMax(Be(t.ctx),[e,n,s,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,o=t.current;switch(e){case gE.COLORED:const l=this.ctx;s.fillStyle=l.fillStyle,s.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case gE.UNCOLORED:const u=Mt.makeHexColor(n[0],n[1],n[2]);s.fillStyle=u,s.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new JN(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let o=n;s!==si.SHADING&&(o=Mt.transform(o,e.baseTransform),this.matrix&&(o=Mt.transform(o,this.matrix)));const l=this.createPatternCanvas(e);let u=new DOMMatrix(o);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const d=t.createPattern(l.canvas,"repeat");return d.setTransform(u),d}};lt(ey,"MAX_PATTERN_SIZE",3e3);let rb=ey;function kL({src:a,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Ci.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],g=n>>3,y=n&7,m=a.length;e=new Uint32Array(e.buffer);let b=0;for(let _=0;_<s;_++){for(const x=t+g;t<x;t++){const N=t<m?a[t]:255;e[b++]=N&128?f:d,e[b++]=N&64?f:d,e[b++]=N&32?f:d,e[b++]=N&16?f:d,e[b++]=N&8?f:d,e[b++]=N&4?f:d,e[b++]=N&2?f:d,e[b++]=N&1?f:d}if(y===0)continue;const E=t<m?a[t++]:255;for(let x=0;x<y;x++)e[b++]=E&1<<7-x?f:d}return{srcPos:t,destPos:b}}const mE=16,yE=100,NL=15,vE=10,bE=1e3,Yi=16;function LL(a,t){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){t.save(),this.__originalSave()},a.restore=function(){t.restore(),this.__originalRestore()},a.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},a.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},a.transform=function(n,s,o,l,u,d){t.transform(n,s,o,l,u,d),this.__originalTransform(n,s,o,l,u,d)},a.setTransform=function(n,s,o,l,u,d){t.setTransform(n,s,o,l,u,d),this.__originalSetTransform(n,s,o,l,u,d)},a.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},a.rotate=function(n){t.rotate(n),this.__originalRotate(n)},a.clip=function(n){t.clip(n),this.__originalClip(n)},a.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},a.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},a.bezierCurveTo=function(e,n,s,o,l,u){t.bezierCurveTo(e,n,s,o,l,u),this.__originalBezierCurveTo(e,n,s,o,l,u)},a.rect=function(e,n,s,o){t.rect(e,n,s,o),this.__originalRect(e,n,s,o)},a.closePath=function(){t.closePath(),this.__originalClosePath()},a.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class RL{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Hm(a,t,e,n,s,o,l,u,d,f){const[g,y,m,b,_,E]=Be(a);if(y===0&&m===0){const I=l*g+_,B=Math.round(I),j=u*b+E,T=Math.round(j),P=(l+d)*g+_,M=Math.abs(Math.round(P)-B)||1,W=(u+f)*b+E,nt=Math.abs(Math.round(W)-T)||1;return a.setTransform(Math.sign(g),0,0,Math.sign(b),B,T),a.drawImage(t,e,n,s,o,0,0,M,nt),a.setTransform(g,y,m,b,_,E),[M,nt]}if(g===0&&b===0){const I=u*m+_,B=Math.round(I),j=l*y+E,T=Math.round(j),P=(u+f)*m+_,M=Math.abs(Math.round(P)-B)||1,W=(l+d)*y+E,nt=Math.abs(Math.round(W)-T)||1;return a.setTransform(0,Math.sign(y),Math.sign(m),0,B,T),a.drawImage(t,e,n,s,o,0,0,nt,M),a.setTransform(g,y,m,b,_,E),[nt,M]}a.drawImage(t,e,n,s,o,l,u,d,f);const x=Math.hypot(g,y),N=Math.hypot(m,b);return[x*d,N*f]}function PL(a){const{width:t,height:e}=a;if(t>bE||e>bE)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let l=new Uint8Array(o*(e+1)),u,d,f;const g=t+7&-8;let y=new Uint8Array(g*e),m=0;for(const N of a.data){let I=128;for(;I>0;)y[m++]=N&I?0:255,I>>=1}let b=0;for(m=0,y[m]!==0&&(l[0]=1,++b),d=1;d<t;d++)y[m]!==y[m+1]&&(l[d]=y[m]?2:1,++b),m++;for(y[m]!==0&&(l[d]=2,++b),u=1;u<e;u++){m=u*g,f=u*o,y[m-g]!==y[m]&&(l[f]=y[m]?1:8,++b);let N=(y[m]?4:0)+(y[m-g]?8:0);for(d=1;d<t;d++)N=(N>>2)+(y[m+1]?4:0)+(y[m-g+1]?8:0),s[N]&&(l[f+d]=s[N],++b),m++;if(y[m-g]!==y[m]&&(l[f+d]=y[m]?2:4,++b),b>n)return null}for(m=g*(e-1),f=u*o,y[m]!==0&&(l[f]=8,++b),d=1;d<t;d++)y[m]!==y[m+1]&&(l[f+d]=y[m]?4:8,++b),m++;if(y[m]!==0&&(l[f+d]=4,++b),b>n)return null;const _=new Int32Array([0,o,-1,0,-o,0,0,0,1]),E=new Path2D;for(u=0;b&&u<=e;u++){let N=u*o;const I=N+t;for(;N<I&&!l[N];)N++;if(N===I)continue;E.moveTo(N%o,u);const B=N;let j=l[N];do{const T=_[j];do N+=T;while(!l[N]);const P=l[N];P!==5&&P!==10?(j=P,l[N]=0):(j=P&51*j>>4,l[N]&=j>>2|j<<2),E.lineTo(N%o,N/o|0),l[N]||--b}while(B!==N);--u}return y=null,l=null,function(N){N.save(),N.scale(1/t,-1/e),N.translate(0,-e),N.fill(E),N.beginPath(),N.restore()}}class wE{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=lT,this.textMatrixScale=1,this.fontMatrix=I1,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Qn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Mt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Mt.applyTransform(e,t),s=Mt.applyTransform(e.slice(2),t),o=Mt.applyTransform([e[0],e[3]],t),l=Mt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],s[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],s[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],s[1],o[1],l[1])}updateScalingPathMinMax(t,e){Mt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,o,l,u,d,f,g){const y=Mt.bezierBoundingBox(e,n,s,o,l,u,d,f,g);g||this.updateRectMinMax(t,y)}getPathBoundingBox(t=si.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===si.STROKE){e||Se("Stroke bounding box must include transform.");const s=Mt.singularValueDecompose2dScale(e),o=s[0]*this.lineWidth/2,l=s[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const t=Mt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=si.FILL,e=null){return Mt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function AE(a,t){if(t instanceof ImageData){a.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Yi,o=(e-s)/Yi,l=s===0?o:o+1,u=a.createImageData(n,Yi);let d=0,f;const g=t.data,y=u.data;let m,b,_,E;if(t.kind===s0.GRAYSCALE_1BPP){const x=g.byteLength,N=new Uint32Array(y.buffer,0,y.byteLength>>2),I=N.length,B=n+7>>3,j=4294967295,T=Ci.isLittleEndian?4278190080:255;for(m=0;m<l;m++){for(_=m<o?Yi:s,f=0,b=0;b<_;b++){const P=x-d;let M=0;const W=P>B?n:P*8-7,nt=W&-8;let ht=0,O=0;for(;M<nt;M+=8)O=g[d++],N[f++]=O&128?j:T,N[f++]=O&64?j:T,N[f++]=O&32?j:T,N[f++]=O&16?j:T,N[f++]=O&8?j:T,N[f++]=O&4?j:T,N[f++]=O&2?j:T,N[f++]=O&1?j:T;for(;M<W;M++)ht===0&&(O=g[d++],ht=128),N[f++]=O&ht?j:T,ht>>=1}for(;f<I;)N[f++]=0;a.putImageData(u,0,m*Yi)}}else if(t.kind===s0.RGBA_32BPP){for(b=0,E=n*Yi*4,m=0;m<o;m++)y.set(g.subarray(d,d+E)),d+=E,a.putImageData(u,0,b),b+=Yi;m<l&&(E=n*s*4,y.set(g.subarray(d,d+E)),a.putImageData(u,0,b))}else if(t.kind===s0.RGB_24BPP)for(_=Yi,E=n*_,m=0;m<l;m++){for(m>=o&&(_=s,E=n*_),f=0,b=E;b--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;a.putImageData(u,0,m*Yi)}else throw new Error(`bad image kind: ${t.kind}`)}function _E(a,t){if(t.bitmap){a.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Yi,o=(e-s)/Yi,l=s===0?o:o+1,u=a.createImageData(n,Yi);let d=0;const f=t.data,g=u.data;for(let y=0;y<l;y++){const m=y<o?Yi:s;({srcPos:d}=kL({src:f,srcPos:d,dest:g,width:n,height:m,nonBlackColor:0})),a.putImageData(u,0,y*Yi)}}function wf(a,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)a[n]!==void 0&&(t[n]=a[n]);a.setLineDash!==void 0&&(t.setLineDash(a.getLineDash()),t.lineDashOffset=a.lineDashOffset)}function zm(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0),!ri){const{filter:t}=a;t!=="none"&&t!==""&&(a.filter="none")}}function EE(a,t){if(t)return!0;const e=Mt.singularValueDecompose2dScale(a);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Dl.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const IL=["butt","round","square"],OL=["miter","round","bevel"],ML={},SE={};var zr,ob,ab,lb;const jw=class jw{constructor(t,e,n,s,o,{optionalContentConfig:l,markedContentStack:u=null},d,f){k(this,zr);this.ctx=t,this.current=new wE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new RL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Be(this.compositeCtx))}this.ctx.save(),zm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Be(this.ctx)}executeOperatorList(t,e,n,s){const o=t.argsArray,l=t.fnArray;let u=e||0;const d=o.length;if(d===u)return u;const f=d-u>vE&&typeof n=="function",g=f?Date.now()+NL:0;let y=0;const m=this.commonObjs,b=this.objs;let _;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,n),u;if(_=l[u],_!==Sr.dependency)this[_].apply(this,o[u]);else for(const E of o[u]){const x=E.startsWith("g_")?m:b;if(!x.has(E))return x.get(E,n),u}if(u++,u===d)return u;if(f&&++y>vE){if(Date.now()>g)return n(),u;y=0}}}endDrawing(){L(this,zr,ob).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),L(this,zr,ab).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=s,f="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let m=u,b=d;o>2&&u>1&&(m=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/m),l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/b),g=this.cachedCanvases.getCanvas(f,m,b),y=g.context,y.clearRect(0,0,m,b),y.drawImage(t,0,0,u,d,0,0,m,b),t=g.canvas,u=m,d=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,o=this.current.fillColor,l=this.current.patternFill,u=Be(e);let d,f,g,y;if((t.bitmap||t.data)&&t.count>1){const W=t.bitmap||t.data.buffer;f=JSON.stringify(l?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(W),d||(d=new Map,this._cachedBitmapsMap.set(W,d));const nt=d.get(f);if(nt&&!l){const ht=Math.round(Math.min(u[0],u[2])+u[4]),O=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:nt,offsetX:ht,offsetY:O}}g=nt}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,s),_E(y.context,t));let m=Mt.transform(u,[1/n,0,0,-1/s,0,0]);m=Mt.transform(m,[1,0,0,1,0,-s]);const[b,_,E,x]=Mt.getAxialAlignedBoundingBox([0,0,n,s],m),N=Math.round(E-b)||1,I=Math.round(x-_)||1,B=this.cachedCanvases.getCanvas("fillCanvas",N,I),j=B.context,T=b,P=_;j.translate(-T,-P),j.transform(...m),g||(g=this._scaleImage(y.canvas,eo(j)),g=g.img,d&&l&&d.set(f,g)),j.imageSmoothingEnabled=EE(Be(j),t.interpolate),Hm(j,g,0,0,g.width,g.height,0,0,n,s),j.globalCompositeOperation="source-in";const M=Mt.transform(eo(j),[1,0,0,1,-T,-P]);return j.fillStyle=l?o.getPattern(e,this,M,si.FILL):o,j.fillRect(0,0,n,s),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,B.canvas)),{canvas:B.canvas,offsetX:Math.round(T),offsetY:Math.round(P)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=IL[t]}setLineJoin(t){this.ctx.lineJoin=OL[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const o=this.ctx;o.setTransform(...Be(this.suspendedCtx)),wf(this.suspendedCtx,o),LL(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const o=s[0],l=s[1],u=s[2]-o,d=s[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,o,l,u,d,f,g,y){let m=t.canvas,b=d-g,_=f-y;if(l){const x=Mt.makeHexColor(...l);if(b<0||_<0||b+n>m.width||_+s>m.height){const N=this.cachedCanvases.getCanvas("maskExtension",n,s),I=N.context;I.drawImage(m,-b,-_),I.globalCompositeOperation="destination-atop",I.fillStyle=x,I.fillRect(0,0,n,s),I.globalCompositeOperation="source-over",m=N.canvas,b=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const N=new Path2D;N.rect(b,_,n,s),t.clip(N),t.globalCompositeOperation="destination-atop",t.fillStyle=x,t.fillRect(b,_,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,f,n,s),e.clip(E),e.globalCompositeOperation="destination-in",e.drawImage(m,b,_,n,s,d,f,n,s),e.restore()}save(){this.inSMaskMode?(wf(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),wf(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,o,l){this.ctx.transform(t,e,n,s,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,o=this.current;let l=o.x,u=o.y,d,f;const g=Be(s),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,m=y?n.slice(0):null;for(let b=0,_=0,E=t.length;b<E;b++)switch(t[b]|0){case Sr.rectangle:l=e[_++],u=e[_++];const x=e[_++],N=e[_++],I=l+x,B=u+N;s.moveTo(l,u),x===0||N===0?s.lineTo(I,B):(s.lineTo(I,u),s.lineTo(I,B),s.lineTo(l,B)),y||o.updateRectMinMax(g,[l,u,I,B]),s.closePath();break;case Sr.moveTo:l=e[_++],u=e[_++],s.moveTo(l,u),y||o.updatePathMinMax(g,l,u);break;case Sr.lineTo:l=e[_++],u=e[_++],s.lineTo(l,u),y||o.updatePathMinMax(g,l,u);break;case Sr.curveTo:d=l,f=u,l=e[_+4],u=e[_+5],s.bezierCurveTo(e[_],e[_+1],e[_+2],e[_+3],l,u),o.updateCurvePathMinMax(g,d,f,e[_],e[_+1],e[_+2],e[_+3],l,u,m),_+=6;break;case Sr.curveTo2:d=l,f=u,s.bezierCurveTo(l,u,e[_],e[_+1],e[_+2],e[_+3]),o.updateCurvePathMinMax(g,d,f,l,u,e[_],e[_+1],e[_+2],e[_+3],m),l=e[_+2],u=e[_+3],_+=4;break;case Sr.curveTo3:d=l,f=u,l=e[_+2],u=e[_+3],s.bezierCurveTo(e[_],e[_+1],l,u,l,u),o.updateCurvePathMinMax(g,d,f,e[_],e[_+1],l,u,l,u,m),_+=4;break;case Sr.closePath:s.closePath();break}y&&o.updateScalingPathMinMax(g,m),o.setCurrentPoint(l,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,eo(e),si.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let o=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,eo(e),si.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ML}eoClip(){this.pendingClip=SE}beginText(){this.current.textMatrix=lT,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,s=e.getTransform().invertSelf();for(const{transform:o,x:l,y:u,fontSize:d,path:f}of t)n.addPath(f,new DOMMatrix(o).preMultiplySelf(s).translate(l,u).scale(d,-d));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||I1,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Qt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=e;e<mE?f=mE:e>yE&&(f=yE),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${u} ${f}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,o,l){this.current.textMatrix=[t,e,n,s,o,l],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s,o){const l=this.ctx,u=this.current,d=u.font,f=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,y=f&Qn.FILL_STROKE_MASK,m=!!(f&Qn.ADD_TO_PATH_FLAG),b=u.patternFill&&!d.missingFile,_=u.patternStroke&&!d.missingFile;let E;if((d.disableFontFace||m||b||_)&&(E=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||b||_){if(l.save(),l.translate(e,n),l.scale(g,-g),y===Qn.FILL||y===Qn.FILL_STROKE)if(s){const x=l.getTransform();l.setTransform(...s),l.fill(L(this,zr,lb).call(this,E,x,s))}else l.fill(E);if(y===Qn.STROKE||y===Qn.FILL_STROKE)if(o){const x=l.getTransform();l.setTransform(...o),l.stroke(L(this,zr,lb).call(this,E,x,o))}else l.lineWidth/=g,l.stroke(E);l.restore()}else(y===Qn.FILL||y===Qn.FILL_STROKE)&&l.fillText(t,e,n),(y===Qn.STROKE||y===Qn.FILL_STROKE)&&l.strokeText(t,e,n);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Be(l),x:e,y:n,fontSize:g,path:E})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return se(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const o=this.ctx,l=e.fontSizeScale,u=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,g=e.textHScale*f,y=t.length,m=n.vertical,b=m?1:-1,_=n.defaultVMetrics,E=s*e.fontMatrix[0],x=e.textRenderingMode===Qn.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),f>0?o.scale(g,-1):o.scale(g,1);let N,I;if(e.patternFill){o.save();const M=e.fillColor.getPattern(o,this,eo(o),si.FILL);N=Be(o),o.restore(),o.fillStyle=M}if(e.patternStroke){o.save();const M=e.strokeColor.getPattern(o,this,eo(o),si.STROKE);I=Be(o),o.restore(),o.strokeStyle=M}let B=e.lineWidth;const j=e.textMatrixScale;if(j===0||B===0){const M=e.textRenderingMode&Qn.FILL_STROKE_MASK;(M===Qn.STROKE||M===Qn.FILL_STROKE)&&(B=this.getSinglePixelWidth())}else B/=j;if(l!==1&&(o.scale(l,l),B/=l),o.lineWidth=B,n.isInvalidPDFjsFont){const M=[];let W=0;for(const nt of t)M.push(nt.unicode),W+=nt.width;o.fillText(M.join(""),0,0),e.x+=W*E*g,o.restore(),this.compose();return}let T=0,P;for(P=0;P<y;++P){const M=t[P];if(typeof M=="number"){T+=b*M*s/1e3;continue}let W=!1;const nt=(M.isSpace?d:0)+u,ht=M.fontChar,O=M.accent;let et,q,X=M.width;if(m){const V=M.vmetric||_,K=-(M.vmetric?V[1]:X*.5)*E,Z=V[2]*E;X=V?-V[0]:X,et=K/l,q=(T+Z)/l}else et=T/l,q=0;if(n.remeasure&&X>0){const V=o.measureText(ht).width*1e3/s*l;if(X<V&&this.isFontSubpixelAAEnabled){const K=X/V;W=!0,o.save(),o.scale(K,1),et/=K}else X!==V&&(et+=(X-V)/2e3*s/l)}if(this.contentVisible&&(M.isInFont||n.missingFile)){if(x&&!O)o.fillText(ht,et,q);else if(this.paintChar(ht,et,q,N,I),O){const V=et+s*O.offset.x/l,K=q-s*O.offset.y/l;this.paintChar(O.fontChar,V,K,N,I)}}const rt=m?X*E-nt*f:X*E+nt*f;T+=rt,W&&o.restore()}m?e.y-=T:e.x+=T*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,o=n.fontSize,l=n.fontDirection,u=s.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,g=n.textHScale*l,y=n.fontMatrix||I1,m=t.length,b=n.textRenderingMode===Qn.INVISIBLE;let _,E,x,N;if(!(b||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(g,l),_=0;_<m;++_){if(E=t[_],typeof E=="number"){N=u*E*o/1e3,this.ctx.translate(N,0),n.x+=N*g;continue}const I=(E.isSpace?f:0)+d,B=s.charProcOperatorList[E.operatorListId];if(!B){Qt(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),e.scale(o,o),e.transform(...y),this.executeOperatorList(B),this.restore()),x=Mt.applyTransform([E.width,0],y)[0]*o+I,e.translate(x,0),n.x+=x*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,o,l){this.ctx.rect(n,s,o-n,l-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||Be(this.ctx),o={createCanvasGraphics:l=>new jw(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new rb(t,n,this.ctx,o,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Mt.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Mt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=CL(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,eo(e),si.SHADING);const s=eo(e);if(s){const{width:o,height:l}=e.canvas,[u,d,f,g]=Mt.getAxialAlignedBoundingBox([0,0,o,l],s);this.ctx.fillRect(u,d,f-u,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Se("Should not call beginInlineImage")}beginImageData(){Se("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Be(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(Be(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||gy("TODO: Support non-isolated groups."),t.knockout&&Qt("Knockout groups not supported.");const n=Be(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Mt.getAxialAlignedBoundingBox(t.bbox,Be(e));const o=[0,0,e.canvas.width,e.canvas.height];s=Mt.intersect(s,o)||[0,0,0,0];const l=Math.floor(s[0]),u=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-l,1),f=Math.max(Math.ceil(s[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,f),m=y.context;m.translate(-l,-u),m.transform(...n),t.smask?this.smaskStack.push({canvas:y.canvas,context:m,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,u),e.save()),wf(e,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Be(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const o=Mt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,s,o){if(L(this,zr,ob).call(this),zm(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],u=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=u;const[d,f]=Mt.singularValueDecompose2dScale(Be(this.ctx)),{viewportScale:g}=this,y=Math.ceil(l*this.outputScaleX*g),m=Math.ceil(u*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,m);const{canvas:b,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),zm(this.ctx)}else zm(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],l,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new wE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),L(this,zr,ab).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=PL(t)),s.compiled)){s.compiled(n);return}const o=this._createMaskCanvas(t),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,o,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Be(u);u.transform(e,n,s,o,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let g=0,y=l.length;g<y;g+=2){const m=Mt.transform(d,[e,n,s,o,l[g],l[g+1]]),[b,_]=Mt.applyTransform([0,0],m);u.drawImage(f.canvas,b,_)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const o of t){const{data:l,width:u,height:d,transform:f}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=g.context;y.save();const m=this.getObject(l,o);_E(y,m),y.globalCompositeOperation="source-in",y.fillStyle=s?n.getPattern(y,this,eo(e),si.FILL):n,y.fillRect(0,0,u,d),y.restore(),e.save(),e.transform(...f),e.scale(1,-1),Hm(e,g.canvas,0,0,u,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Qt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Qt("Dependent image isn't ready yet");return}const l=o.width,u=o.height,d=[];for(let f=0,g=s.length;f<g;f+=2)d.push({transform:[e,0,0,n,s[f],s[f+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,s),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!ri){const{filter:u}=s;u!=="none"&&u!==""&&(s.filter="none")}s.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;AE(d,t),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,eo(s));s.imageSmoothingEnabled=EE(Be(s),t.interpolate),Hm(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const o=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;AE(d,t),s=this.applyTransferMapsToCanvas(d)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),Hm(n,s,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===SE?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Be(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:o}=this.ctx.getTransform();let l,u;if(n===0&&s===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/f;else{const g=d*t,y=f*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-n*s),f=Math.hypot(e,n),g=Math.hypot(s,o);if(t===0)l=g/d,u=f/d;else{const y=t*d;l=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,o]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&o===1){e.stroke();return}const l=e.getLineDash();if(t&&e.save(),e.scale(s,o),l.length>0){const u=Math.max(s,o);e.setLineDash(l.map(d=>d/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};zr=new WeakSet,ob=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ab=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},lb=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let Sh=jw;for(const a in Sr)Sh.prototype[a]!==void 0&&(Sh.prototype[Sr[a]]=Sh.prototype[a]);var qp,Hp;class _a{static get workerPort(){return c(this,qp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");S(this,qp,t)}static get workerSrc(){return c(this,Hp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");S(this,Hp,t)}}qp=new WeakMap,Hp=new WeakMap,k(_a,qp,null),k(_a,Hp,"");var Hu,zp;class DL{constructor({parsedData:t,rawData:e}){k(this,Hu);k(this,zp);S(this,Hu,t),S(this,zp,e)}getRaw(){return c(this,zp)}get(t){return c(this,Hu).get(t)??null}getAll(){return dw(c(this,Hu))}has(t){return c(this,Hu).has(t)}}Hu=new WeakMap,zp=new WeakMap;const dh=Symbol("INTERNAL");var Up,$p,Gp,Vh;class FL{constructor(t,{name:e,intent:n,usage:s,rbGroups:o}){k(this,Up,!1);k(this,$p,!1);k(this,Gp,!1);k(this,Vh,!0);S(this,Up,!!(t&bs.DISPLAY)),S(this,$p,!!(t&bs.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=o}get visible(){if(c(this,Gp))return c(this,Vh);if(!c(this,Vh))return!1;const{print:t,view:e}=this.usage;return c(this,Up)?(e==null?void 0:e.viewState)!=="OFF":c(this,$p)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==dh&&Se("Internal method `_setVisible` called."),S(this,Gp,n),S(this,Vh,e)}}Up=new WeakMap,$p=new WeakMap,Gp=new WeakMap,Vh=new WeakMap;var pl,Ae,Wh,Xh,Vp,ub;class BL{constructor(t,e=bs.DISPLAY){k(this,Vp);k(this,pl,null);k(this,Ae,new Map);k(this,Wh,null);k(this,Xh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,S(this,Xh,t.order);for(const n of t.groups)c(this,Ae).set(n.id,new FL(e,n));if(t.baseState==="OFF")for(const n of c(this,Ae).values())n._setVisible(dh,!1);for(const n of t.on)c(this,Ae).get(n)._setVisible(dh,!0);for(const n of t.off)c(this,Ae).get(n)._setVisible(dh,!1);S(this,Wh,this.getHash())}}isVisible(t){if(c(this,Ae).size===0)return!0;if(!t)return gy("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Ae).has(t.id)?c(this,Ae).get(t.id).visible:(Qt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return L(this,Vp,ub).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,Ae).has(e))return Qt(`Optional content group not found: ${e}`),!0;if(c(this,Ae).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,Ae).has(e))return Qt(`Optional content group not found: ${e}`),!0;if(!c(this,Ae).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,Ae).has(e))return Qt(`Optional content group not found: ${e}`),!0;if(!c(this,Ae).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,Ae).has(e))return Qt(`Optional content group not found: ${e}`),!0;if(c(this,Ae).get(e).visible)return!1}return!0}return Qt(`Unknown optional content policy ${t.policy}.`),!0}return Qt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const s=c(this,Ae).get(t);if(!s){Qt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const l of s.rbGroups)for(const u of l)u!==t&&((o=c(this,Ae).get(u))==null||o._setVisible(dh,!1,!0));s._setVisible(dh,!!e,!0),S(this,pl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const o=c(this,Ae).get(s);if(o)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!o.visible,e);break}}S(this,pl,null)}get hasInitialVisibility(){return c(this,Wh)===null||this.getHash()===c(this,Wh)}getOrder(){return c(this,Ae).size?c(this,Xh)?c(this,Xh).slice():[...c(this,Ae).keys()]:null}getGroups(){return c(this,Ae).size>0?dw(c(this,Ae)):null}getGroup(t){return c(this,Ae).get(t)||null}getHash(){if(c(this,pl)!==null)return c(this,pl);const t=new jT;for(const[e,n]of c(this,Ae))t.update(`${e}:${n.visible}`);return S(this,pl,t.hexdigest())}}pl=new WeakMap,Ae=new WeakMap,Wh=new WeakMap,Xh=new WeakMap,Vp=new WeakSet,ub=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const o=t[s];let l;if(Array.isArray(o))l=L(this,Vp,ub).call(this,o);else if(c(this,Ae).has(o))l=c(this,Ae).get(o).visible;else return Qt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class jL{constructor(t,{disableRange:e=!1,disableStream:n=!1}){cn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});cn(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||o.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){cn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new qL(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new HL(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class qL{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=gw(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class HL{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function zL(a){let t=!0,e=n("filename\\*","i").exec(a);if(e){e=e[1];let g=u(e);return g=unescape(g),g=d(g),g=f(g),o(g)}if(e=l(a),e){const g=f(e);return o(g)}if(e=n("filename","i").exec(a),e){e=e[1];let g=u(e);return g=f(g),o(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const m=new TextDecoder(g,{fatal:!0}),b=my(y);y=m.decode(b),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=s("utf-8",g),t&&(g=s("iso-8859-1",g))),g}function l(g){const y=[];let m;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=b.exec(g))!==null;){let[,E,x,N]=m;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[x,N]}const _=[];for(let E=0;E<y.length&&E in y;++E){let[x,N]=y[E];N=u(N),x&&(N=unescape(N),E===0&&(N=d(N))),_.push(N)}return _.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let m=0;m<y.length;++m){const b=y[m].indexOf('"');b!==-1&&(y[m]=y[m].slice(0,b),y.length=m+1),y[m]=y[m].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const m=g.slice(0,y),_=g.slice(y+1).replace(/^[^']*'/,"");return s(m,_)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,m,b,_){if(b==="q"||b==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,x){return String.fromCharCode(parseInt(x,16))}),s(m,_);try{_=atob(_)}catch{}return s(m,_)})}return""}function JT(a,t){const e=new Headers;if(!a||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function by(a){try{return new URL(a).origin}catch{}return null}function tx({responseHeaders:a,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*e)||n||!t||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function ex(a){const t=a.get("Content-Disposition");if(t){let e=zL(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(gw(e))return e}return null}function wy(a,t){return a===404||a===0&&t.startsWith("file:")?new ip('Missing PDF "'+t+'".'):new D0(`Unexpected server response (${a}) while retrieving PDF "${t}".`,a)}function nx(a){return a===200||a===206}function ix(a,t,e){return{method:"GET",headers:a,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function sx(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Qt(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class TE{constructor(t){lt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=JT(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return cn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new UL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new $L(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class UL{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,ix(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=by(o.url),!nx(o.status))throw wy(o.status,s);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=tx({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=ex(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ml("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:sx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class $L{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=s.url;fetch(l,ix(o,this._withCredentials,this._abortController)).then(u=>{const d=by(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!nx(u.status))throw wy(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:sx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const u1=200,c1=206;function GL(a){const t=a.response;return typeof t!="string"?t:my(t).buffer}class VL{constructor({url:t,httpHeaders:e,withCredentials:n}){lt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=JT(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=c1):s.expectedStatus=u1,e.responseType="arraybuffer",cn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const o=s.status||u1;if(!(o===u1&&n.expectedStatus===c1)&&o!==n.expectedStatus){n.onError(s.status);return}const u=GL(s);if(o===c1){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(Qt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class WL{constructor(t){this._source=t,this._manager=new VL(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return cn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new XL(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new YL(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class XL{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=by(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=tx({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=ex(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=wy(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class YL{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=by((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=wy(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const KL=/^[a-z][a-z0-9\-+.]+:/i;function QL(a){if(KL.test(a))return new URL(a);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(a))}class ZL{constructor(t){this.source=t,this.url=QL(t.url),cn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return cn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new JL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new tR(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class JL{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new ip(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ml("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class tR{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const eR=1e5,$i=30,nR=.8;var aT,gl,Wi,Wp,Xp,zu,oa,Yp,Kp,Uu,Yh,Kh,ml,Qh,Qp,Zh,$u,Zp,Jp,Gu,Vu,tg,yl,Jh,Ca,rx,ox,cb,_s,g0,hb,ax,lx;const mn=class mn{constructor({textContentSource:t,container:e,viewport:n}){k(this,Ca);k(this,gl,Promise.withResolvers());k(this,Wi,null);k(this,Wp,!1);k(this,Xp,!!((aT=globalThis.FontInspector)!=null&&aT.enabled));k(this,zu,null);k(this,oa,null);k(this,Yp,0);k(this,Kp,0);k(this,Uu,null);k(this,Yh,null);k(this,Kh,0);k(this,ml,0);k(this,Qh,Object.create(null));k(this,Qp,[]);k(this,Zh,null);k(this,$u,[]);k(this,Zp,new WeakMap);k(this,Jp,null);var d;if(t instanceof ReadableStream)S(this,Zh,t);else if(typeof t=="object")S(this,Zh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Wi,S(this,Yh,e)),S(this,ml,n.scale*(globalThis.devicePixelRatio||1)),S(this,Kh,n.rotation),S(this,oa,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:l,pageY:u}=n.rawDims;S(this,Jp,[1,0,0,-1,-l,u+o]),S(this,Kp,s),S(this,Yp,o),L(d=mn,_s,ax).call(d),Ec(e,n),c(this,gl).promise.finally(()=>{c(mn,Jh).delete(this),S(this,oa,null),S(this,Qh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ci.platform;return se(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,Uu).read().then(({value:e,done:n})=>{if(n){c(this,gl).resolve();return}c(this,zu)??S(this,zu,e.lang),Object.assign(c(this,Qh),e.styles),L(this,Ca,rx).call(this,e.items),t()},c(this,gl).reject)};return S(this,Uu,c(this,Zh).getReader()),c(mn,Jh).add(this),t(),c(this,gl).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==c(this,Kh)&&(e==null||e(),S(this,Kh,s),Ec(c(this,Yh),{rotation:s})),n!==c(this,ml)){e==null||e(),S(this,ml,n);const l={div:null,properties:null,ctx:L(o=mn,_s,g0).call(o,c(this,zu))};for(const u of c(this,$u))l.properties=c(this,Zp).get(u),l.div=u,L(this,Ca,cb).call(this,l)}}cancel(){var e;const t=new Ml("TextLayer task cancelled.");(e=c(this,Uu))==null||e.cancel(t).catch(()=>{}),S(this,Uu,null),c(this,gl).reject(t)}get textDivs(){return c(this,$u)}get textContentItemsStr(){return c(this,Qp)}static cleanup(){if(!(c(this,Jh).size>0)){c(this,Gu).clear();for(const{canvas:t}of c(this,Vu).values())t.remove();c(this,Vu).clear()}}};gl=new WeakMap,Wi=new WeakMap,Wp=new WeakMap,Xp=new WeakMap,zu=new WeakMap,oa=new WeakMap,Yp=new WeakMap,Kp=new WeakMap,Uu=new WeakMap,Yh=new WeakMap,Kh=new WeakMap,ml=new WeakMap,Qh=new WeakMap,Qp=new WeakMap,Zh=new WeakMap,$u=new WeakMap,Zp=new WeakMap,Jp=new WeakMap,Gu=new WeakMap,Vu=new WeakMap,tg=new WeakMap,yl=new WeakMap,Jh=new WeakMap,Ca=new WeakSet,rx=function(t){var s,o;if(c(this,Wp))return;(o=c(this,oa)).ctx??(o.ctx=L(s=mn,_s,g0).call(s,c(this,zu)));const e=c(this,$u),n=c(this,Qp);for(const l of t){if(e.length>eR){Qt("Ignoring additional textDivs for performance reasons."),S(this,Wp,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=c(this,Wi);S(this,Wi,document.createElement("span")),c(this,Wi).classList.add("markedContent"),l.id!==null&&c(this,Wi).setAttribute("id",`${l.id}`),u.append(c(this,Wi))}else l.type==="endMarkedContent"&&S(this,Wi,c(this,Wi).parentNode);continue}n.push(l.str),L(this,Ca,ox).call(this,l)}},ox=function(t){var E;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,$u).push(e);const s=Mt.transform(c(this,Jp),t.transform);let o=Math.atan2(s[1],s[0]);const l=c(this,Qh)[t.fontName];l.vertical&&(o+=Math.PI/2);let u=c(this,Xp)&&l.fontSubstitution||l.fontFamily;u=mn.fontFamilyMap.get(u)||u;const d=Math.hypot(s[2],s[3]),f=d*L(E=mn,_s,lx).call(E,u,c(this,zu));let g,y;o===0?(g=s[4],y=s[5]-f):(g=s[4]+f*Math.sin(o),y=s[5]-f*Math.cos(o));const m="calc(var(--scale-factor)*",b=e.style;c(this,Wi)===c(this,Yh)?(b.left=`${(100*g/c(this,Kp)).toFixed(2)}%`,b.top=`${(100*y/c(this,Yp)).toFixed(2)}%`):(b.left=`${m}${g.toFixed(2)}px)`,b.top=`${m}${y.toFixed(2)}px)`),b.fontSize=`${m}${(c(mn,yl)*d).toFixed(2)}px)`,b.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Xp)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),N=Math.abs(t.transform[3]);x!==N&&Math.max(x,N)/Math.min(x,N)>1.5&&(_=!0)}if(_&&(n.canvasWidth=l.vertical?t.height:t.width),c(this,Zp).set(e,n),c(this,oa).div=e,c(this,oa).properties=n,L(this,Ca,cb).call(this,c(this,oa)),n.hasText&&c(this,Wi).append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),c(this,Wi).append(x)}},cb=function(t){var u;const{div:e,properties:n,ctx:s}=t,{style:o}=e;let l="";if(c(mn,yl)>1&&(l=`scale(${1/c(mn,yl)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=o,{canvasWidth:f,fontSize:g}=n;L(u=mn,_s,hb).call(u,s,g*c(this,ml),d);const{width:y}=s.measureText(e.textContent);y>0&&(l=`scaleX(${f*c(this,ml)/y}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)},_s=new WeakSet,g0=function(t=null){let e=c(this,Vu).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Vu).set(t,e),c(this,tg).set(e,{size:0,family:""})}return e},hb=function(t,e,n){const s=c(this,tg).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},ax=function(){if(c(this,yl)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),S(this,yl,t.getBoundingClientRect().height),t.remove()},lx=function(t,e){const n=c(this,Gu).get(t);if(n)return n;const s=L(this,_s,g0).call(this,e);s.canvas.width=s.canvas.height=$i,L(this,_s,hb).call(this,s,$i,t);const o=s.measureText("");let l=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);if(l){const g=l/(l+u);return c(this,Gu).set(t,g),s.canvas.width=s.canvas.height=0,g}s.strokeStyle="red",s.clearRect(0,0,$i,$i),s.strokeText("g",0,0);let d=s.getImageData(0,0,$i,$i).data;u=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){u=Math.ceil(g/4/$i);break}s.clearRect(0,0,$i,$i),s.strokeText("A",0,$i),d=s.getImageData(0,0,$i,$i).data,l=0;for(let g=0,y=d.length;g<y;g+=4)if(d[g]>0){l=$i-Math.floor(g/4/$i);break}s.canvas.width=s.canvas.height=0;const f=l?l/(l+u):nR;return c(this,Gu).set(t,f),f},k(mn,_s),k(mn,Gu,new Map),k(mn,Vu,new Map),k(mn,tg,new WeakMap),k(mn,yl,null),k(mn,Jh,new Set);let sp=mn;class rp{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(o){var d;if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(rp.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const f of o.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const iR=65536,sR=100,rR=5e3,oR=ri?wL:yL,aR=ri?AL:WT,lR=ri?bL:vL,uR=ri?_L:QT;function cR(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const t=new db,{docId:e}=t,n=a.url?hR(a.url):null,s=a.data?dR(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,u=a.password??null,d=a.range instanceof ux?a.range:null,f=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:iR;let g=a.worker instanceof Th?a.worker:null;const y=a.verbosity,m=typeof a.docBaseUrl=="string"&&!vy(a.docBaseUrl)?a.docBaseUrl:null,b=typeof a.cMapUrl=="string"?a.cMapUrl:null,_=a.cMapPacked!==!1,E=a.CMapReaderFactory||aR,x=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,N=a.StandardFontDataFactory||uR,I=a.stopAtErrors!==!0,B=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,j=a.isEvalSupported!==!1,T=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!ri,P=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!ri&&(Ci.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,W=typeof a.disableFontFace=="boolean"?a.disableFontFace:ri,nt=a.fontExtraProperties===!0,ht=a.enableXfa===!0,O=a.ownerDocument||globalThis.document,et=a.disableRange===!0,q=a.disableStream===!0,X=a.disableAutoFetch===!0,rt=a.pdfBug===!0,V=a.CanvasFactory||oR,K=a.FilterFactory||lR,Z=a.enableHWA===!0,ot=d?d.length:a.length??NaN,J=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!ri&&!W,D=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:E===WT&&N===QT&&b&&x&&Mf(b,document.baseURI)&&Mf(x,document.baseURI),U=null;YN(y);const st={canvasFactory:new V({ownerDocument:O,enableHWA:Z}),filterFactory:new K({docId:e,ownerDocument:O}),cMapReaderFactory:D?null:new E({baseUrl:b,isCompressed:_}),standardFontDataFactory:D?null:new N({baseUrl:x})};if(!g){const vt={verbosity:y,port:_a.workerPort};g=vt.port?Th.fromPort(vt):new Th(vt),t._worker=g}const gt={docId:e,apiVersion:"4.10.38",data:s,password:u,disableAutoFetch:X,rangeChunkSize:f,length:ot,docBaseUrl:m,enableXfa:ht,evaluatorOptions:{maxImageSize:B,disableFontFace:W,ignoreErrors:I,isEvalSupported:j,isOffscreenCanvasSupported:T,isImageDecoderSupported:P,canvasMaxAreaInBytes:M,fontExtraProperties:nt,useSystemFonts:J,cMapUrl:D?b:null,standardFontDataUrl:D?x:null}},at={disableFontFace:W,fontExtraProperties:nt,ownerDocument:O,pdfBug:rt,styleElement:U,loadingParams:{disableAutoFetch:X,enableXfa:ht}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const vt=g.messageHandler.sendWithPromise("GetDocRequest",gt,s?[s.buffer]:null);let yt;if(d)yt=new jL(d,{disableRange:et,disableStream:q});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let bt;if(ri)if(Mf(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");bt=TE}else bt=ZL;else bt=Mf(n)?TE:WL;yt=new bt({url:n,length:ot,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:et,disableStream:q})}return vt.then(bt=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Nt=new jf(e,bt,g.port),Ht=new mR(Nt,t,yt,at,st);t._transport=Ht,Nt.send("Ready",null)})}).catch(t._capability.reject),t}function hR(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(ri&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function dR(a){if(ri&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return my(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function xE(a){return typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0}var ny;const iy=class iy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${wi(iy,ny)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};ny=new WeakMap,k(iy,ny,0);let db=iy;class ux{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Se("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class fR{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var vl,aa,Qs,fh,m0;class pR{constructor(t,e,n,s=!1){k(this,Qs);k(this,vl,null);k(this,aa,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new dE:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new cx,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:o=!1}={}){return new jg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=el.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:y=!1}){var j,T;(j=this._stats)==null||j.time("Overall");const m=this._transport.getRenderingIntent(n,s,g,y),{renderingIntent:b,cacheKey:_}=m;S(this,aa,!1),L(this,Qs,m0).call(this),u||(u=this._transport.getOptionalContentConfig(b));let E=this._intentStates.get(_);E||(E=Object.create(null),this._intentStates.set(_,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const x=!!(b&bs.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(m));const N=P=>{var M;E.renderTasks.delete(I),(this._maybeCleanupAfterRender||x)&&S(this,aa,!0),L(this,Qs,fh).call(this,!x),P?(I.capability.reject(P),this._abortOperatorList({intentState:E,reason:P instanceof Error?P:new Error(P)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(M=globalThis.Stats)!=null&&M.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new pb({callback:N,params:{canvasContext:t,viewport:e,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:f});(E.renderTasks||(E.renderTasks=new Set)).add(I);const B=I.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([P,M])=>{var W;if(this.destroyed){N();return}if((W=this._stats)==null||W.time("Rendering"),!(M.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:P,optionalContentConfig:M}),I.operatorListChanged()}).catch(N),B}getOperatorList({intent:t="display",annotationMode:e=el.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>rp.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function o(){l.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},s)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),S(this,aa,!1),L(this,Qs,m0).call(this),Promise.all(t)}cleanup(t=!1){S(this,aa,!0);const e=L(this,Qs,fh).call(this,!1);return t&&e&&this._stats&&(this._stats=new dE),e}_startRenderPage(t,e){var s,o;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&L(this,Qs,fh).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:s},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:m})=>{if(m){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const m of f.renderTasks)m.operatorListChanged();L(this,Qs,fh).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof pw){let s=sR;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ml(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}vl=new WeakMap,aa=new WeakMap,Qs=new WeakSet,fh=function(t=!1){if(L(this,Qs,m0).call(this),!c(this,aa)||this.destroyed)return!1;if(t)return S(this,vl,setTimeout(()=>{S(this,vl,null),L(this,Qs,fh).call(this,!1)},rR)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,aa,!1),!0},m0=function(){c(this,vl)&&(clearTimeout(c(this,vl)),S(this,vl,null))};var la,sy;class gR{constructor(){k(this,la,new Map);k(this,sy,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(this,sy).then(()=>{for(const[s]of c(this,la))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Qt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}c(this,la).set(e,s)}removeEventListener(t,e){const n=c(this,la).get(e);n==null||n(),c(this,la).delete(e)}terminate(){for(const[,t]of c(this,la))t==null||t();c(this,la).clear()}}la=new WeakMap,sy=new WeakMap;var ry,Wu,Xu,td,y0,ed,v0;const Fe=class Fe{constructor({name:t=null,port:e=null,verbosity:n=KN()}={}){k(this,td);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=c(Fe,Xu))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(Fe,Xu)||S(Fe,Xu,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new jf("main","worker",t),this._messageHandler.on("ready",function(){}),L(this,td,y0).call(this)}_initialize(){if(c(Fe,Wu)||c(Fe,ed,v0)){this._setupFakeWorker();return}let{workerSrc:t}=Fe;try{Fe._isSameOrigin(window.location.href,t)||(t=Fe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new jf("main","worker",e),s=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,L(this,td,y0).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){s();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{gy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Fe,Wu)||(Qt("Setting up fake worker."),S(Fe,Wu,!0)),Fe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new gR;this._port=e;const n=`fake${wi(Fe,ry)._++}`,s=new jf(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new jf(n,n+"_worker",e),L(this,td,y0).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=c(Fe,Xu))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=c(this,Xu))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Fe(t)}static get workerSrc(){if(_a.workerSrc)return _a.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return se(this,"_setupFakeWorkerGlobal",(async()=>c(this,ed,v0)?c(this,ed,v0):(await import(this.workerSrc)).WorkerMessageHandler)())}};ry=new WeakMap,Wu=new WeakMap,Xu=new WeakMap,td=new WeakSet,y0=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ed=new WeakSet,v0=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},k(Fe,ed),k(Fe,ry,0),k(Fe,Wu,!1),k(Fe,Xu),ri&&(S(Fe,Wu,!0),_a.workerSrc||(_a.workerSrc="./pdf.worker.mjs")),Fe._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Fe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Th=Fe;var ua,go,nd,id,ca,Yu,$f;class mR{constructor(t,e,n,s,o){k(this,Yu);k(this,ua,new Map);k(this,go,new Map);k(this,nd,new Map);k(this,id,new Map);k(this,ca,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new cx,this.fontLoader=new gL({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return se(this,"annotationStorage",new vw)}getRenderingIntent(t,e=el.ENABLE,n=null,s=!1,o=!1){let l=bs.DISPLAY,u=eb;switch(t){case"any":l=bs.ANY;break;case"display":break;case"print":l=bs.PRINT;break;default:Qt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&bs.PRINT&&n instanceof HT?n:this.annotationStorage;switch(e){case el.DISABLE:l+=bs.ANNOTATIONS_DISABLE;break;case el.ENABLE:break;case el.ENABLE_FORMS:l+=bs.ANNOTATIONS_FORMS;break;case el.ENABLE_STORAGE:l+=bs.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Qt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=bs.IS_EDITING),o&&(l+=bs.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,ca))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of c(this,go).values())t.push(s._destroy());c(this,go).clear(),c(this,nd).clear(),c(this,id).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,o;this.commonObjs.clear(),this.fontLoader.clear(),c(this,ua).clear(),this.filterFactory.destroy(),sp.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ml("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{cn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){s.close();return}cn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:o,contentLength:l}=this._fullReader;return(!s||!o)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:s,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{cn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){s.close();return}cn(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{o.cancel(l),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new fR(n,this))}),t.on("DocException",n=>{e._capability.reject(Gi(n))}),t.on("PasswordRequest",n=>{S(this,ca,Promise.withResolvers());try{if(!e.onPassword)throw Gi(n);const s=o=>{o instanceof Error?c(this,ca).reject(o):c(this,ca).resolve({password:o})};e.onPassword(s,n.code)}catch(s){c(this,ca).reject(s)}return c(this,ca).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,go).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in o){const b=o.error;Qt(`Error during font loading: ${b}`),this.commonObjs.resolve(n,b);break}const g=f&&((l=globalThis.FontInspector)!=null&&l.enabled)?(b,_)=>globalThis.FontInspector.fontAdded(b,_):null,y=new mL(o,{disableFontFace:u,fontExtraProperties:d,inspectFont:g});this.fontLoader.bind(y).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:m}=o;cn(m,"The imageRef must be defined.");for(const b of c(this,go).values())for(const[,_]of b.objs)if((_==null?void 0:_.ref)===m)return _.dataLen?(this.commonObjs.resolve(n,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,o,l])=>{var d;if(this.destroyed)return;const u=c(this,go).get(s);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(o){case"Image":u.objs.resolve(n,l),(l==null?void 0:l.dataLen)>GN&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Qt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(this,nd).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,id).set(o.refStr,t);const l=new pR(e,o,this,this._params.pdfBug);return c(this,go).set(e,l),l});return c(this,nd).set(e,s),s}getPageIndex(t){return xE(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return L(this,Yu,$f).call(this,"GetFieldObjects")}hasJSActions(){return L(this,Yu,$f).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return L(this,Yu,$f).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return L(this,Yu,$f).call(this,"GetOptionalContentConfig").then(e=>new BL(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,ua).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var o,l;return{info:s[0],metadata:s[1]?new DL(s[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return c(this,ua).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,go).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,ua).clear(),this.filterFactory.destroy(!0),sp.cleanup()}}cachedPageNumber(t){if(!xE(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,id).get(e)??null}}ua=new WeakMap,go=new WeakMap,nd=new WeakMap,id=new WeakMap,ca=new WeakMap,Yu=new WeakSet,$f=function(t,e=null){const n=c(this,ua).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return c(this,ua).set(t,s),s};const Af=Symbol("INITIAL_DATA");var cs,eg,fb;class cx{constructor(){k(this,eg);k(this,cs,Object.create(null))}get(t,e=null){if(e){const s=L(this,eg,fb).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=c(this,cs)[t];if(!n||n.data===Af)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=c(this,cs)[t];return!!e&&e.data!==Af}delete(t){const e=c(this,cs)[t];return!e||e.data===Af?!1:(delete c(this,cs)[t],!0)}resolve(t,e=null){const n=L(this,eg,fb).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in c(this,cs)){const{data:n}=c(this,cs)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}S(this,cs,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,cs)){const{data:e}=c(this,cs)[t];e!==Af&&(yield[t,e])}}}cs=new WeakMap,eg=new WeakSet,fb=function(t){var e;return(e=c(this,cs))[t]||(e[t]={...Promise.withResolvers(),data:Af})};var bl;class yR{constructor(t){k(this,bl,null);S(this,bl,t),this.onContinue=null}get promise(){return c(this,bl).capability.promise}cancel(t=0){c(this,bl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,bl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,bl);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}bl=new WeakMap;var wl,Ku;const mu=class mu{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:m=null}){k(this,wl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new yR(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,d;if(this.cancelled)return;if(this._canvas){if(c(mu,Ku).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(mu,Ku).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:o,background:l}=this.params;this.gfx=new Sh(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,wl)&&(window.cancelAnimationFrame(c(this,wl)),S(this,wl,null)),c(mu,Ku).delete(this._canvas),this.callback(t||new pw(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,wl,window.requestAnimationFrame(()=>{S(this,wl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(mu,Ku).delete(this._canvas),this.callback())))}};wl=new WeakMap,Ku=new WeakMap,k(mu,Ku,new WeakSet);let pb=mu;const vR="4.10.38",bR="f9bea397f";function CE(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function _f(a){return Math.max(0,Math.min(255,255*a))}class kE{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=_f(t),[t,t,t]}static G_HTML([t]){const e=CE(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(_f)}static RGB_HTML(t){return`#${t.map(CE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[_f(1-Math.min(1,t+s)),_f(1-Math.min(1,n+s)),_f(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,o=1-e,l=1-n,u=Math.min(s,o,l);return["CMYK",s,o,l,u]}}class wR{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Se("Abstract method `_createSVG` called.")}}class ww extends wR{_createSVG(t){return document.createElementNS(Vo,t)}}class hx{static setupStorage(t,e,n,s,o){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{s.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var y,m;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,o=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=b}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const b=document.createTextNode(s.value);l.append(b),u&&rp.shouldBuildText(s.name)&&f.push(b)}return{textDivs:f}}const g=[[s,-1,l]];for(;g.length>0;){const[b,_,E]=g.at(-1);if(_+1===b.children.length){g.pop();continue}const x=b.children[++g.at(-1)[1]];if(x===null)continue;const{name:N}=x;if(N==="#text"){const B=document.createTextNode(x.value);f.push(B),E.append(B);continue}const I=(y=x==null?void 0:x.attributes)!=null&&y.xmlns?document.createElementNS(x.attributes.xmlns,N):document.createElement(N);if(E.append(I),x.attributes&&this.setAttributes({html:I,element:x,storage:e,intent:o,linkService:n}),((m=x.children)==null?void 0:m.length)>0)g.push([x,-1,I]);else if(x.value){const B=document.createTextNode(x.value);u&&rp.shouldBuildText(N)&&f.push(B),I.append(B)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Hg=1e3,AR=9,Tc=new WeakSet;function Ol(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class _R{static create(t){switch(t.data.annotationType){case gn.LINK:return new dx(t);case gn.TEXT:return new ER(t);case gn.WIDGET:switch(t.data.fieldType){case"Tx":return new SR(t);case"Btn":return t.data.radioButton?new gx(t):t.data.checkBox?new xR(t):new CR(t);case"Ch":return new kR(t);case"Sig":return new TR(t)}return new Lc(t);case gn.POPUP:return new mb(t);case gn.FREETEXT:return new wx(t);case gn.LINE:return new LR(t);case gn.SQUARE:return new RR(t);case gn.CIRCLE:return new PR(t);case gn.POLYLINE:return new Ax(t);case gn.CARET:return new OR(t);case gn.INK:return new Aw(t);case gn.POLYGON:return new IR(t);case gn.HIGHLIGHT:return new _x(t);case gn.UNDERLINE:return new MR(t);case gn.SQUIGGLY:return new DR(t);case gn.STRIKEOUT:return new FR(t);case gn.STAMP:return new Ex(t);case gn.FILEATTACHMENT:return new BR(t);default:return new rn(t)}}}var Qu,sd,rd,ng,gb;const qw=class qw{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){k(this,ng);k(this,Qu,null);k(this,sd,!1);k(this,rd,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qw._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;c(this,Qu)||S(this,Qu,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&L(this,ng,gb).call(this,e),(n=c(this,rd))==null||n.popup.updateEdited(t)}resetEdited(){var t;c(this,Qu)&&(L(this,ng,gb).call(this,c(this,Qu).rect),(t=c(this,rd))==null||t.popup.resetEdited(),S(this,Qu,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Lc||(o.tabIndex=Hg);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof mb){const{rotation:E}=e;return!e.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:u,height:d}=Ol(e.rect);if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const E=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(E>0||x>0){const I=`calc(${E}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;l.borderRadius=I}else if(this instanceof gx){const I=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=I}switch(e.borderStyle.style){case bf.SOLID:l.borderStyle="solid";break;case bf.DASHED:l.borderStyle="dashed";break;case bf.BEVELED:Qt("Unimplemented border style: beveled");break;case bf.INSET:Qt("Unimplemented border style: inset");break;case bf.UNDERLINE:l.borderBottomStyle="solid";break}const N=e.borderColor||null;N?(S(this,sd,!0),l.borderColor=Mt.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):l.borderWidth=0}const f=Mt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:m,pageY:b}=s.rawDims;l.left=`${100*(f[0]-m)/g}%`,l.top=`${100*(f[1]-b)/y}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(_,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:o,height:l}=Ol(this.data.rect);let u,d;t%180===0?(u=100*o/n,d=100*l/s):(u=100*l/n,d=100*o/s),e.style.width=`${u}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const o=s.detail[e],l=o[0],u=o.slice(1);s.target.style[n]=kE[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:kE[`${l}_rgb`](u)})};return se(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const o=t[s]||n[s];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,o]of Object.entries(e)){const l=n[s];if(l){const u={detail:{[s]:o},target:t};l(u),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,o]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,x,N,I]=t.subarray(2,6);if(s===E&&o===x&&e===N&&n===I)return}const{style:l}=this.container;let u;if(c(this,sd)){const{borderColor:E,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=s-e,f=o-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const m=g.createElement("defs");y.append(m);const b=g.createElement("clipPath"),_=`clippath_${this.data.id}`;b.setAttribute("id",_),b.setAttribute("clipPathUnits","objectBoundingBox"),m.append(b);for(let E=2,x=t.length;E<x;E+=8){const N=t[E],I=t[E+1],B=t[E+2],j=t[E+3],T=g.createElement("rect"),P=(B-e)/d,M=(o-I)/f,W=(N-B)/d,nt=(I-j)/f;T.setAttribute("x",P),T.setAttribute("y",M),T.setAttribute("width",W),T.setAttribute("height",nt),b.append(T),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${M}" width="${W}" height="${nt}"/>`)}c(this,sd)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,e=S(this,rd,new mb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Se("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:o,id:l,exportValues:u}of s){if(o===-1||l===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Tc.has(f)){Qt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:o}=s,l=s.getAttribute("data-element-id");l!==e&&Tc.has(s)&&n.push({id:l,exportValue:o,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Qu=new WeakMap,sd=new WeakMap,rd=new WeakMap,ng=new WeakSet,gb=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:g}=Ol(t);e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,s===0?(e.width=`${100*f/o}%`,e.height=`${100*g/l}%`):this.setRotation(s)};let rn=qw;var ws,hu,fx,px;class dx extends rn{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});k(this,ws);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(s,e.action),o=!0):e.attachment?(L(this,ws,fx).call(this,s,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(L(this,ws,px).call(this,s,e.setOCGState),o=!0):e.dest?(this._bindLink(s,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),o=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(s,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&L(this,ws,hu).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),L(this,ws,hu).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=s.get(o);l&&(e[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),L(this,ws,hu).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),L(this,ws,hu).call(this),!this._fieldObjects){Qt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var y;s==null||s();const{fields:o,refs:l,include:u}=n,d=[];if(o.length!==0||l.length!==0){const m=new Set(l);for(const b of o){const _=this._fieldObjects[b]||[];for(const{id:E}of _)m.add(E)}for(const b of Object.values(this._fieldObjects))for(const _ of b)m.has(_.id)===u&&d.push(_)}else for(const m of Object.values(this._fieldObjects))d.push(...m);const f=this.annotationStorage,g=[];for(const m of d){const{id:b}=m;switch(g.push(b),m.type){case"text":{const E=m.defaultValue||"";f.setValue(b,{value:E});break}case"checkbox":case"radiobutton":{const E=m.defaultValue===m.exportValues;f.setValue(b,{value:E});break}case"combobox":case"listbox":{const E=m.defaultValue||"";f.setValue(b,{value:E});break}default:continue}const _=document.querySelector(`[data-element-id="${b}"]`);if(_){if(!Tc.has(_)){Qt(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ws=new WeakSet,hu=function(){this.container.setAttribute("data-internal-link","")},fx=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,s),!1},L(this,ws,hu).call(this)},px=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),L(this,ws,hu).call(this)};class ER extends rn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Lc extends rn{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ci.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,o){n.includes("mouse")?t.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var u;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l)}}))})}_setEventListeners(t,e,n,s){var o,l,u;for(const[d,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,s),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Mt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||AR,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(s1*s))||1,y=f/g;l=Math.min(s,d(y/s1))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(s,d(f/s1))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=Mt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class SR extends Lc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[s]:n})}render(){var s,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let u=l.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Tc.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Hg,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",m=>{t.setValue(e,{value:m.target.value}),this.setPropertyOnSiblings(n,"value",m.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",m=>{const b=this.data.defaultFieldValue??"";n.value=g.userValue=b,g.formattedValue=null});let y=m=>{const{formattedValue:b}=g;b!=null&&(m.target.value=b),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",b=>{var E;if(g.focused)return;const{target:_}=b;g.userValue&&(_.value=g.userValue),g.lastCommittedValue=_.value,g.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const _={value(E){g.userValue=E.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),E.target.value=g.userValue},formattedValue(E){const{formattedValue:x}=E.detail;g.formattedValue=x,x!=null&&E.target!==document.activeElement&&(E.target.value=x),t.setValue(e,{formattedValue:x})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var B;const{charLimit:x}=E.detail,{target:N}=E;if(x===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",x);let I=g.userValue;!I||I.length<=x||(I=I.slice(0,x),N.value=g.userValue=I,t.setValue(e,{value:I}),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(_,b)}),n.addEventListener("keydown",b=>{var x;g.commitKey=1;let _=-1;if(b.key==="Escape"?_=0:b.key==="Enter"&&!this.data.multiLine?_=2:b.key==="Tab"&&(g.commitKey=3),_===-1)return;const{value:E}=b.target;g.lastCommittedValue!==E&&(g.lastCommittedValue=E,g.userValue=E,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:_,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const m=y;y=null,n.addEventListener("blur",b=>{var E,x;if(!g.focused||!b.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(g.focused=!1);const{value:_}=b.target;g.userValue=_,g.lastCommittedValue!==_&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:g.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),m(b)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",b=>{var T;g.lastCommittedValue=null;const{data:_,target:E}=b,{value:x,selectionStart:N,selectionEnd:I}=E;let B=N,j=I;switch(b.inputType){case"deleteWordBackward":{const P=x.substring(0,N).match(/\w*[^\w]*$/);P&&(B-=P[0].length);break}case"deleteWordForward":{const P=x.substring(N).match(/^[^\w]*\w*/);P&&(j+=P[0].length);break}case"deleteContentBackward":N===I&&(B-=1);break;case"deleteContentForward":N===I&&(j+=1);break}b.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:_||"",willCommit:!1,selStart:B,selEnd:j}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${b}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class TR extends Lc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class xR extends Lc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Tc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=Hg,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class gx extends Lc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Tc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=Hg,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const m=g&&y.id===n;y.domElement&&(y.domElement.checked=m),t.setValue(y.id,{value:m})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class CR extends dx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class kR extends Lc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Tc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Hg;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),s.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),s.prepend(g),l=()=>{g.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:m,multiple:b}=s;return b?Array.prototype.filter.call(m,_=>_.selected).map(_=>_[y]):m.selectedIndex===-1?null:m[m.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",g=>{const y={value(m){l==null||l();const b=m.detail.value,_=new Set(Array.isArray(b)?b:[b]);for(const E of s.options)E.selected=_.has(E.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(m){s.multiple=!0},remove(m){const b=s.options,_=m.detail.remove;b[_].selected=!1,s.remove(_),b.length>0&&Array.prototype.findIndex.call(b,x=>x.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:u(!0),items:f(m)}),d=u(!1)},clear(m){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(m){const{index:b,displayValue:_,exportValue:E}=m.detail.insert,x=s.children[b],N=document.createElement("option");N.textContent=_,N.value=E,x?x.before(N):s.append(N),t.setValue(e,{value:u(!0),items:f(m)}),d=u(!1)},items(m){const{items:b}=m.detail;for(;s.length!==0;)s.remove(0);for(const _ of b){const{displayValue:E,exportValue:x}=_,N=document.createElement("option");N.textContent=E,N.value=x,s.append(N)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(m)}),d=u(!1)},indices(m){const b=new Set(m.detail.indices);for(const _ of m.target.options)_.selected=b.has(_.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(y,g)}),s.addEventListener("input",g=>{var b;const y=u(!0),m=u(!1);t.setValue(e,{value:y}),g.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:m,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):s.addEventListener("input",function(g){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class mb extends rn{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:rn._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new NR({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${fw}${n}`).join(",")),this.container}}var od,oy,ay,ad,Zu,Qe,ha,ld,ig,sg,ud,da,Nr,fa,rg,pa,og,Ju,tc,Ee,b0,yb,mx,yx,vx,bx,w0,A0,vb;class NR{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:g,open:y}){k(this,Ee);k(this,od,L(this,Ee,vx).bind(this));k(this,oy,L(this,Ee,vb).bind(this));k(this,ay,L(this,Ee,A0).bind(this));k(this,ad,L(this,Ee,w0).bind(this));k(this,Zu,null);k(this,Qe,null);k(this,ha,null);k(this,ld,null);k(this,ig,null);k(this,sg,null);k(this,ud,null);k(this,da,!1);k(this,Nr,null);k(this,fa,null);k(this,rg,null);k(this,pa,null);k(this,og,null);k(this,Ju,null);k(this,tc,!1);var m;S(this,Qe,t),S(this,og,s),S(this,ha,l),S(this,pa,u),S(this,sg,d),S(this,Zu,e),S(this,rg,f),S(this,ud,g),S(this,ig,n),S(this,ld,mw.toDateObject(o)),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",c(this,ad)),b.addEventListener("mouseenter",c(this,ay)),b.addEventListener("mouseleave",c(this,oy)),b.classList.add("popupTriggerArea");for(const b of n)(m=b.container)==null||m.addEventListener("keydown",c(this,od));c(this,Qe).hidden=!0,y&&L(this,Ee,w0).call(this)}render(){if(c(this,Nr))return;const t=S(this,Nr,document.createElement("div"));if(t.className="popup",c(this,Zu)){const o=t.style.outlineColor=Mt.makeHexColor(...c(this,Zu));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=Mt.makeHexColor(...c(this,Zu).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=c(this,og),t.append(e),c(this,ld)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,ld).valueOf()})),e.append(o)}const s=c(this,Ee,b0);if(s)hx.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(c(this,ha));t.append(o)}c(this,Qe).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let o=0,l=s.length;o<l;++o){const u=s[o];n.append(document.createTextNode(u)),o<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;c(this,Ju)||S(this,Ju,{contentsObj:c(this,ha),richText:c(this,pa)}),t&&S(this,fa,null),e&&(S(this,pa,L(this,Ee,yx).call(this,e)),S(this,ha,null)),(n=c(this,Nr))==null||n.remove(),S(this,Nr,null)}resetEdited(){var t;c(this,Ju)&&({contentsObj:wi(this,ha)._,richText:wi(this,pa)._}=c(this,Ju),S(this,Ju,null),(t=c(this,Nr))==null||t.remove(),S(this,Nr,null),S(this,fa,null))}forceHide(){S(this,tc,this.isVisible),c(this,tc)&&(c(this,Qe).hidden=!0)}maybeShow(){c(this,tc)&&(c(this,Nr)||L(this,Ee,A0).call(this),S(this,tc,!1),c(this,Qe).hidden=!1)}get isVisible(){return c(this,Qe).hidden===!1}}od=new WeakMap,oy=new WeakMap,ay=new WeakMap,ad=new WeakMap,Zu=new WeakMap,Qe=new WeakMap,ha=new WeakMap,ld=new WeakMap,ig=new WeakMap,sg=new WeakMap,ud=new WeakMap,da=new WeakMap,Nr=new WeakMap,fa=new WeakMap,rg=new WeakMap,pa=new WeakMap,og=new WeakMap,Ju=new WeakMap,tc=new WeakMap,Ee=new WeakSet,b0=function(){const t=c(this,pa),e=c(this,ha);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,pa).html||null},yb=function(){var t,e,n;return((n=(e=(t=c(this,Ee,b0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},mx=function(){var t,e,n;return((n=(e=(t=c(this,Ee,b0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},yx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:c(this,Ee,mx),fontSize:c(this,Ee,yb)?`calc(${c(this,Ee,yb)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:s});return n},vx=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,da))&&L(this,Ee,w0).call(this)},bx=function(){if(c(this,fa)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:o}}}=c(this,sg);let l=!!c(this,ud),u=l?c(this,ud):c(this,rg);for(const _ of c(this,ig))if(!u||Mt.intersect(_.data.rect,u)!==null){u=_.data.rect,l=!0;break}const d=Mt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,m=d[1];S(this,fa,[100*(y-s)/e,100*(m-o)/n]);const{style:b}=c(this,Qe);b.left=`${c(this,fa)[0]}%`,b.top=`${c(this,fa)[1]}%`},w0=function(){S(this,da,!c(this,da)),c(this,da)?(L(this,Ee,A0).call(this),c(this,Qe).addEventListener("click",c(this,ad)),c(this,Qe).addEventListener("keydown",c(this,od))):(L(this,Ee,vb).call(this),c(this,Qe).removeEventListener("click",c(this,ad)),c(this,Qe).removeEventListener("keydown",c(this,od)))},A0=function(){c(this,Nr)||this.render(),this.isVisible?c(this,da)&&c(this,Qe).classList.add("focused"):(L(this,Ee,bx).call(this),c(this,Qe).hidden=!1,c(this,Qe).style.zIndex=parseInt(c(this,Qe).style.zIndex)+1e3)},vb=function(){c(this,Qe).classList.remove("focused"),!(c(this,da)||!this.isVisible)&&(c(this,Qe).hidden=!0,c(this,Qe).style.zIndex=parseInt(c(this,Qe).style.zIndex)-1e3)};class wx extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Kt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ag;class LR extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,ag,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=Ol(e.rect),o=this.svgFactory.create(n,s,!0),l=S(this,ag,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ag)}addHighlightArea(){this.container.classList.add("highlightArea")}}ag=new WeakMap;var lg;class RR extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,lg,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=Ol(e.rect),o=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,u=S(this,lg,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",s-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}lg=new WeakMap;var ug;class PR extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,ug,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=Ol(e.rect),o=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,u=S(this,ug,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",s/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",s/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ug)}addHighlightArea(){this.container.classList.add("highlightArea")}}ug=new WeakMap;var cg;class Ax extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,cg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:o}}=this;if(!n)return this.container;const{width:l,height:u}=Ol(e),d=this.svgFactory.create(l,u,!0);let f=[];for(let y=0,m=n.length;y<m;y+=2){const b=n[y]-e[0],_=e[3]-n[y+1];f.push(`${b},${_}`)}f=f.join(" ");const g=S(this,cg,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,cg)}addHighlightArea(){this.container.classList.add("highlightArea")}}cg=new WeakMap;class IR extends Ax{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class OR extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var hg,ec,dg,bb;class Aw extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,dg);k(this,hg,null);k(this,ec,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Kt.HIGHLIGHT:Kt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:o,popupRef:l}}=this,{transform:u,width:d,height:f}=L(this,dg,bb).call(this,n,e),g=this.svgFactory.create(d,f,!0),y=S(this,hg,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",u);for(let m=0,b=s.length;m<b;m++){const _=this.svgFactory.createElement(this.svgElementName);c(this,ec).push(_),_.setAttribute("points",s[m].join(",")),y.append(_)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:o}=e,l=c(this,hg);if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let u=0,d=c(this,ec).length;u<d;u++)c(this,ec)[u].setAttribute("points",s[u].join(","));if(o){const{transform:u,width:d,height:f}=L(this,dg,bb).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,ec)}addHighlightArea(){this.container.classList.add("highlightArea")}}hg=new WeakMap,ec=new WeakMap,dg=new WeakSet,bb=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class _x extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Kt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class MR extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class DR extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class FR extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ex extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Kt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fg,pg,wb;class BR extends rn{constructor(e){var s;super(e,{isRenderable:!0});k(this,pg);k(this,fg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",L(this,pg,wb).bind(this)),S(this,fg,s);const{isMac:o}=Ci.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&L(this,pg,wb).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return c(this,fg)}addHighlightArea(){this.container.classList.add("highlightArea")}}fg=new WeakMap,pg=new WeakSet,wb=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var gg,nc,ic,mg,Nc,Sx,Ab;class jR{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:o,viewport:l,structTreeLayer:u}){k(this,Nc);k(this,gg,null);k(this,nc,null);k(this,ic,new Map);k(this,mg,null);this.div=t,S(this,gg,e),S(this,nc,n),S(this,mg,u||null),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(this,ic).size>0}async render(t){var l;const{annotations:e}=t,n=this.div;Ec(n,this.viewport);const s=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ww,annotationStorage:t.annotationStorage||new vw,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===gn.POPUP;if(d){const y=s.get(u.id);if(!y)continue;o.elements=y}else{const{width:y,height:m}=Ol(u.rect);if(y<=0||m<=0)continue}o.data=u;const f=_R.create(o);if(!f.isRenderable)continue;if(!d&&u.popupRef){const y=s.get(u.popupRef);y?y.push(f):s.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),await L(this,Nc,Sx).call(this,g,u.id),f._isEditable&&(c(this,ic).set(f.data.id,f),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(f))}L(this,Nc,Ab).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Ec(e,{rotation:t.rotation}),L(this,Nc,Ab).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ic).values())}getEditableAnnotation(t){return c(this,ic).get(t)}}gg=new WeakMap,nc=new WeakMap,ic=new WeakMap,mg=new WeakMap,Nc=new WeakSet,Sx=async function(t,e){var l,u;const n=t.firstChild||t,s=n.id=`${fw}${e}`,o=await((l=c(this,mg))==null?void 0:l.getAriaAttributes(s));if(o)for(const[d,f]of o)n.setAttribute(d,f);this.div.append(t),(u=c(this,gg))==null||u.moveElementInDOM(this.div,t,n,!1)},Ab=function(){if(!c(this,nc))return;const t=this.div;for(const[e,n]of c(this,nc)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):s.append(n)}c(this,nc).clear()};const Um=/\r\n?|\n/g;var Lr,hs,yg,sc,ds,hn,Tx,xx,Cx,_0,Sa,E0,S0,kx,Eb,Nx;const xe=class xe extends Ge{constructor(e){super({...e,name:"freeTextEditor"});k(this,hn);k(this,Lr);k(this,hs,"");k(this,yg,`${this.id}-editor`);k(this,sc,null);k(this,ds);S(this,Lr,e.color||xe._defaultColor||Ge._defaultLineColor),S(this,ds,e.fontSize||xe._defaultFontSize)}static get _keyboardManager(){const e=xe.prototype,n=l=>l.isEmpty(),s=Sc.TRANSLATE_SMALL,o=Sc.TRANSLATE_BIG;return se(this,"_keyboardManager",new qg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){Ge.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case ue.FREETEXT_SIZE:xe._defaultFontSize=n;break;case ue.FREETEXT_COLOR:xe._defaultColor=n;break}}updateParams(e,n){switch(e){case ue.FREETEXT_SIZE:L(this,hn,Tx).call(this,n);break;case ue.FREETEXT_COLOR:L(this,hn,xx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ue.FREETEXT_SIZE,xe._defaultFontSize],[ue.FREETEXT_COLOR,xe._defaultColor||Ge._defaultLineColor]]}get propertiesToUpdate(){return[[ue.FREETEXT_SIZE,c(this,ds)],[ue.FREETEXT_COLOR,c(this,Lr)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-xe._internalPadding*e,-(xe._internalPadding+c(this,ds))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Kt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,sc,new AbortController);const e=this._uiManager.combinedSignal(c(this,sc));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,yg)),this._isDraggable=!0,(e=c(this,sc))==null||e.abort(),S(this,sc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,hs),n=S(this,hs,L(this,hn,Cx).call(this).trimEnd());if(e===n)return;const s=o=>{if(S(this,hs,o),!o){this.remove();return}L(this,hn,S0).call(this),this._uiManager.rebuild(this),L(this,hn,_0).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),L(this,hn,_0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){xe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,yg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,ds)}px * var(--scale-factor))`,s.color=c(this,Lr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),F0(this,this.div,["dblclick","keydown"]),this.width){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[g,y]=this.pageDimensions,[m,b]=this.pageTranslation;let _,E;switch(this.rotation){case 0:_=e+(u[0]-m)/g,E=n+this.height-(u[1]-b)/y;break;case 90:_=e+(u[0]-m)/g,E=n-(u[1]-b)/y,[d,f]=[f,-d];break;case 180:_=e-this.width+(u[0]-m)/g,E=n-(u[1]-b)/y,[d,f]=[-d,-f];break;case 270:_=e+(u[0]-m-this.height*y)/g,E=n+(u[1]-b-this.width*g)/y,[d,f]=[-f,d];break}this.setAt(_*o,E*l,d,f)}else this.setAt(e*o,n*l,this.width*o,this.height*l);L(this,hn,S0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,E,x;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const o=L(_=xe,Sa,Eb).call(_,n.getData("text")||"").replaceAll(Um,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:f}=u,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const N=d.parentElement;if(y.push(d.nodeValue.slice(f).replaceAll(Um,"")),N!==this.editorDiv){let I=g;for(const B of this.editorDiv.childNodes){if(B===N){I=y;continue}I.push(L(E=xe,Sa,E0).call(E,B))}}g.push(d.nodeValue.slice(0,f).replaceAll(Um,""))}else if(d===this.editorDiv){let N=g,I=0;for(const B of this.editorDiv.childNodes)I++===f&&(N=y),N.push(L(x=xe,Sa,E0).call(x,B))}S(this,hs,`${g.join(`
`)}${o}${y.join(`
`)}`),L(this,hn,S0).call(this);const m=new Range;let b=g.reduce((N,I)=>N+I.length,0);for(const{firstChild:N}of this.editorDiv.childNodes)if(N.nodeType===Node.TEXT_NODE){const I=N.nodeValue.length;if(b<=I){m.setStart(N,b),m.setEnd(N,b);break}b-=I}l.removeAllRanges(),l.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var u;let o=null;if(e instanceof wx){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:g,rotation:y,id:m,popupRef:b},textContent:_,textPosition:E,parent:{page:{pageNumber:x}}}=e;if(!_||_.length===0)return null;o=e={annotationType:Kt.FREETEXT,color:Array.from(f),fontSize:d,value:_.join(`
`),position:E,pageIndex:x-1,rect:g.slice(0),rotation:y,id:m,deleted:!1,popupRef:b}}const l=await super.deserialize(e,n,s);return S(l,ds,e.fontSize),S(l,Lr,Mt.makeHexColor(...e.color)),S(l,hs,L(u=xe,Sa,Eb).call(u,e.value)),l.annotationElementId=e.id||null,l._initialData=o,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=xe._internalPadding*this.parentScale,s=this.getRect(n,n),o=Ge._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Lr)),l={annotationType:Kt.FREETEXT,color:o,fontSize:c(this,ds),value:L(this,hn,kx).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!L(this,hn,Nx).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${c(this,ds)}px * var(--scale-factor))`,s.color=c(this,Lr),n.replaceChildren();for(const l of c(this,hs).split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),n.append(u)}const o=xe._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:c(this,hs)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Lr=new WeakMap,hs=new WeakMap,yg=new WeakMap,sc=new WeakMap,ds=new WeakMap,hn=new WeakSet,Tx=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-c(this,ds))*this.parentScale),S(this,ds,o),L(this,hn,_0).call(this)},s=c(this,ds);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},xx=function(e){const n=o=>{S(this,Lr,this.editorDiv.style.color=o)},s=c(this,Lr);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Cx=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(L(s=xe,Sa,E0).call(s,o)),n=o);return e.join(`
`)},_0=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,u=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},Sa=new WeakSet,E0=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Um,"")},S0=function(){if(this.editorDiv.replaceChildren(),!!c(this,hs))for(const e of c(this,hs).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},kx=function(){return c(this,hs).replaceAll(" "," ")},Eb=function(e){return e.replaceAll(" "," ")},Nx=function(e){const{value:n,fontSize:s,color:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((u,d)=>u!==o[d])||e.pageIndex!==l},k(xe,Sa),lt(xe,"_freeTextDefaultContent",""),lt(xe,"_internalPadding",0),lt(xe,"_defaultColor",null),lt(xe,"_defaultFontSize",10),lt(xe,"_type","freetext"),lt(xe,"_editorType",Kt.FREETEXT);let _b=xe;class Tt{toSVGPath(){Se("Abstract method `toSVGPath` must be implemented.")}get box(){Se("Abstract getter `box` must be implemented.")}serialize(t,e){Se("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,o,l){l||(l=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*s,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,s,o,l){l||(l=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*s,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)s[o]=e+t[o],s[o+1]=n+t[o+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,o){switch(o){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,o,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+o)/6,(5*s+l)/6,(n+o)/2,(s+l)/2]}}lt(Tt,"PRECISION",1e-4);var fs,Rr,cd,hd,mo,ie,rc,oc,vg,bg,dd,fd,Al,wg,ly,uy,bn,Gf,Lx,Rx,Px,Ix,Ox,Mx;const Ko=class Ko{constructor({x:t,y:e},n,s,o,l,u=0){k(this,bn);k(this,fs);k(this,Rr,[]);k(this,cd);k(this,hd);k(this,mo,[]);k(this,ie,new Float32Array(18));k(this,rc);k(this,oc);k(this,vg);k(this,bg);k(this,dd);k(this,fd);k(this,Al,[]);S(this,fs,n),S(this,fd,o*s),S(this,hd,l),c(this,ie).set([NaN,NaN,NaN,NaN,t,e],6),S(this,cd,u),S(this,bg,c(Ko,wg)*s),S(this,vg,c(Ko,uy)*s),S(this,dd,s),c(this,Al).push(t,e)}isEmpty(){return isNaN(c(this,ie)[8])}add({x:t,y:e}){var nt;S(this,rc,t),S(this,oc,e);const[n,s,o,l]=c(this,fs);let[u,d,f,g]=c(this,ie).subarray(8,12);const y=t-f,m=e-g,b=Math.hypot(y,m);if(b<c(this,vg))return!1;const _=b-c(this,bg),E=_/b,x=E*y,N=E*m;let I=u,B=d;u=f,d=g,f+=x,g+=N,(nt=c(this,Al))==null||nt.push(t,e);const j=-N/_,T=x/_,P=j*c(this,fd),M=T*c(this,fd);return c(this,ie).set(c(this,ie).subarray(2,8),0),c(this,ie).set([f+P,g+M],4),c(this,ie).set(c(this,ie).subarray(14,18),12),c(this,ie).set([f-P,g-M],16),isNaN(c(this,ie)[6])?(c(this,mo).length===0&&(c(this,ie).set([u+P,d+M],2),c(this,mo).push(NaN,NaN,NaN,NaN,(u+P-n)/o,(d+M-s)/l),c(this,ie).set([u-P,d-M],14),c(this,Rr).push(NaN,NaN,NaN,NaN,(u-P-n)/o,(d-M-s)/l)),c(this,ie).set([I,B,u,d,f,g],6),!this.isEmpty()):(c(this,ie).set([I,B,u,d,f,g],6),Math.abs(Math.atan2(B-d,I-u)-Math.atan2(N,x))<Math.PI/2?([u,d,f,g]=c(this,ie).subarray(2,6),c(this,mo).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+g)/2-s)/l),[u,d,I,B]=c(this,ie).subarray(14,18),c(this,Rr).push(NaN,NaN,NaN,NaN,((I+u)/2-n)/o,((B+d)/2-s)/l),!0):([I,B,u,d,f,g]=c(this,ie).subarray(0,6),c(this,mo).push(((I+5*u)/6-n)/o,((B+5*d)/6-s)/l,((5*u+f)/6-n)/o,((5*d+g)/6-s)/l,((u+f)/2-n)/o,((d+g)/2-s)/l),[f,g,u,d,I,B]=c(this,ie).subarray(12,18),c(this,Rr).push(((I+5*u)/6-n)/o,((B+5*d)/6-s)/l,((5*u+f)/6-n)/o,((5*d+g)/6-s)/l,((u+f)/2-n)/o,((d+g)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,mo),e=c(this,Rr);if(isNaN(c(this,ie)[6])&&!this.isEmpty())return L(this,bn,Lx).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);L(this,bn,Px).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return L(this,bn,Rx).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,o,l){return new Dx(t,e,n,s,o,l)}getOutlines(){var y;const t=c(this,mo),e=c(this,Rr),n=c(this,ie),[s,o,l,u]=c(this,fs),d=new Float32Array((((y=c(this,Al))==null?void 0:y.length)??0)+2);for(let m=0,b=d.length-2;m<b;m+=2)d[m]=(c(this,Al)[m]-s)/l,d[m+1]=(c(this,Al)[m+1]-o)/u;if(d[d.length-2]=(c(this,rc)-s)/l,d[d.length-1]=(c(this,oc)-o)/u,isNaN(n[6])&&!this.isEmpty())return L(this,bn,Ix).call(this,d);const f=new Float32Array(c(this,mo).length+24+c(this,Rr).length);let g=t.length;for(let m=0;m<g;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}g=L(this,bn,Mx).call(this,f,g);for(let m=e.length-6;m>=6;m-=6)for(let b=0;b<6;b+=2){if(isNaN(e[m+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[m+b],f[g+1]=e[m+b+1],g+=2}return L(this,bn,Ox).call(this,f,g),this.newFreeDrawOutline(f,d,c(this,fs),c(this,dd),c(this,cd),c(this,hd))}};fs=new WeakMap,Rr=new WeakMap,cd=new WeakMap,hd=new WeakMap,mo=new WeakMap,ie=new WeakMap,rc=new WeakMap,oc=new WeakMap,vg=new WeakMap,bg=new WeakMap,dd=new WeakMap,fd=new WeakMap,Al=new WeakMap,wg=new WeakMap,ly=new WeakMap,uy=new WeakMap,bn=new WeakSet,Gf=function(){const t=c(this,ie).subarray(4,6),e=c(this,ie).subarray(16,18),[n,s,o,l]=c(this,fs);return[(c(this,rc)+(t[0]-e[0])/2-n)/o,(c(this,oc)+(t[1]-e[1])/2-s)/l,(c(this,rc)+(e[0]-t[0])/2-n)/o,(c(this,oc)+(e[1]-t[1])/2-s)/l]},Lx=function(){const[t,e,n,s]=c(this,fs),[o,l,u,d]=L(this,bn,Gf).call(this);return`M${(c(this,ie)[2]-t)/n} ${(c(this,ie)[3]-e)/s} L${(c(this,ie)[4]-t)/n} ${(c(this,ie)[5]-e)/s} L${o} ${l} L${u} ${d} L${(c(this,ie)[16]-t)/n} ${(c(this,ie)[17]-e)/s} L${(c(this,ie)[14]-t)/n} ${(c(this,ie)[15]-e)/s} Z`},Rx=function(t){const e=c(this,Rr);t.push(`L${e[4]} ${e[5]} Z`)},Px=function(t){const[e,n,s,o]=c(this,fs),l=c(this,ie).subarray(4,6),u=c(this,ie).subarray(16,18),[d,f,g,y]=L(this,bn,Gf).call(this);t.push(`L${(l[0]-e)/s} ${(l[1]-n)/o} L${d} ${f} L${g} ${y} L${(u[0]-e)/s} ${(u[1]-n)/o}`)},Ix=function(t){const e=c(this,ie),[n,s,o,l]=c(this,fs),[u,d,f,g]=L(this,bn,Gf).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-s)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-s)/l],0),this.newFreeDrawOutline(y,t,c(this,fs),c(this,dd),c(this,cd),c(this,hd))},Ox=function(t,e){const n=c(this,Rr);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},Mx=function(t,e){const n=c(this,ie).subarray(4,6),s=c(this,ie).subarray(16,18),[o,l,u,d]=c(this,fs),[f,g,y,m]=L(this,bn,Gf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,m,NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d],e),e+=24},k(Ko,wg,8),k(Ko,ly,2),k(Ko,uy,c(Ko,wg)+c(Ko,ly));let q0=Ko;var pd,ac,ga,Ag,ps,_g,sn,cy,Fx;class Dx extends Tt{constructor(e,n,s,o,l,u){super();k(this,cy);k(this,pd);k(this,ac,new Float32Array(4));k(this,ga);k(this,Ag);k(this,ps);k(this,_g);k(this,sn);S(this,sn,e),S(this,ps,n),S(this,pd,s),S(this,_g,o),S(this,ga,l),S(this,Ag,u),this.lastPoint=[NaN,NaN],L(this,cy,Fx).call(this,u);const[d,f,g,y]=c(this,ac);for(let m=0,b=e.length;m<b;m+=2)e[m]=(e[m]-d)/g,e[m+1]=(e[m+1]-f)/y;for(let m=0,b=n.length;m<b;m+=2)n[m]=(n[m]-d)/g,n[m+1]=(n[m+1]-f)/y}toSVGPath(){const e=[`M${c(this,sn)[4]} ${c(this,sn)[5]}`];for(let n=6,s=c(this,sn).length;n<s;n+=6){if(isNaN(c(this,sn)[n])){e.push(`L${c(this,sn)[n+4]} ${c(this,sn)[n+5]}`);continue}e.push(`C${c(this,sn)[n]} ${c(this,sn)[n+1]} ${c(this,sn)[n+2]} ${c(this,sn)[n+3]} ${c(this,sn)[n+4]} ${c(this,sn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,o],l){const u=s-e,d=o-n;let f,g;switch(l){case 0:f=Tt._rescale(c(this,sn),e,o,u,-d),g=Tt._rescale(c(this,ps),e,o,u,-d);break;case 90:f=Tt._rescaleAndSwap(c(this,sn),e,n,u,d),g=Tt._rescaleAndSwap(c(this,ps),e,n,u,d);break;case 180:f=Tt._rescale(c(this,sn),s,n,-u,d),g=Tt._rescale(c(this,ps),s,n,-u,d);break;case 270:f=Tt._rescaleAndSwap(c(this,sn),s,o,-u,-d),g=Tt._rescaleAndSwap(c(this,ps),s,o,-u,-d);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return c(this,ac)}newOutliner(e,n,s,o,l,u=0){return new q0(e,n,s,o,l,u)}getNewOutline(e,n){const[s,o,l,u]=c(this,ac),[d,f,g,y]=c(this,pd),m=l*g,b=u*y,_=s*g+d,E=o*y+f,x=this.newOutliner({x:c(this,ps)[0]*m+_,y:c(this,ps)[1]*b+E},c(this,pd),c(this,_g),e,c(this,Ag),n??c(this,ga));for(let N=2;N<c(this,ps).length;N+=2)x.add({x:c(this,ps)[N]*m+_,y:c(this,ps)[N+1]*b+E});return x.getOutlines()}}pd=new WeakMap,ac=new WeakMap,ga=new WeakMap,Ag=new WeakMap,ps=new WeakMap,_g=new WeakMap,sn=new WeakMap,cy=new WeakSet,Fx=function(e){const n=c(this,sn);let s=n[4],o=n[5],l=s,u=o,d=s,f=o,g=s,y=o;const m=e?Math.max:Math.min;for(let _=6,E=n.length;_<E;_+=6){if(isNaN(n[_]))l=Math.min(l,n[_+4]),u=Math.min(u,n[_+5]),d=Math.max(d,n[_+4]),f=Math.max(f,n[_+5]),y<n[_+5]?(g=n[_+4],y=n[_+5]):y===n[_+5]&&(g=m(g,n[_+4]));else{const x=Mt.bezierBoundingBox(s,o,...n.slice(_,_+6));l=Math.min(l,x[0]),u=Math.min(u,x[1]),d=Math.max(d,x[2]),f=Math.max(f,x[3]),y<x[3]?(g=x[2],y=x[3]):y===x[3]&&(g=m(g,x[2]))}s=n[_+4],o=n[_+5]}const b=c(this,ac);b[0]=l-c(this,ga),b[1]=u-c(this,ga),b[2]=d-l+2*c(this,ga),b[3]=f-u+2*c(this,ga),this.lastPoint=[g,y]};var Eg,Sg,_l,Pr,Ni,Bx,T0,jx,qx,Tb;class Sb{constructor(t,e=0,n=0,s=!0){k(this,Ni);k(this,Eg);k(this,Sg);k(this,_l,[]);k(this,Pr,[]);let o=1/0,l=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x,y:N,width:I,height:B}of t){const j=Math.floor((x-e)/f)*f,T=Math.ceil((x+I+e)/f)*f,P=Math.floor((N-e)/f)*f,M=Math.ceil((N+B+e)/f)*f,W=[j,P,M,!0],nt=[T,P,M,!1];c(this,_l).push(W,nt),o=Math.min(o,j),l=Math.max(l,T),u=Math.min(u,P),d=Math.max(d,M)}const g=l-o+2*n,y=d-u+2*n,m=o-n,b=u-n,_=c(this,_l).at(s?-1:-2),E=[_[0],_[2]];for(const x of c(this,_l)){const[N,I,B]=x;x[0]=(N-m)/g,x[1]=(I-b)/y,x[2]=(B-b)/y}S(this,Eg,new Float32Array([m,b,g,y])),S(this,Sg,E)}getOutlines(){c(this,_l).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of c(this,_l))e[3]?(t.push(...L(this,Ni,Tb).call(this,e)),L(this,Ni,jx).call(this,e)):(L(this,Ni,qx).call(this,e),t.push(...L(this,Ni,Tb).call(this,e)));return L(this,Ni,Bx).call(this,t)}}Eg=new WeakMap,Sg=new WeakMap,_l=new WeakMap,Pr=new WeakMap,Ni=new WeakSet,Bx=function(t){const e=[],n=new Set;for(const l of t){const[u,d,f]=l;e.push([u,d,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const s=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,d,f,g,y]=l;n.delete(l);let m=u,b=d;for(o=[u,f],s.push(o);;){let _;if(n.has(g))_=g;else if(n.has(y))_=y;else break;n.delete(_),[u,d,f,g,y]=_,m!==u&&(o.push(m,b,u,b===d?d:f),m=u),b=b===d?f:d}o.push(m,b)}return new qR(s,c(this,Eg),c(this,Sg))},T0=function(t){const e=c(this,Pr);let n=0,s=e.length-1;for(;n<=s;){const o=n+s>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:s=o-1}return s+1},jx=function([,t,e]){const n=L(this,Ni,T0).call(this,t);c(this,Pr).splice(n,0,[t,e])},qx=function([,t,e]){const n=L(this,Ni,T0).call(this,t);for(let s=n;s<c(this,Pr).length;s++){const[o,l]=c(this,Pr)[s];if(o!==t)break;if(o===t&&l===e){c(this,Pr).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[o,l]=c(this,Pr)[s];if(o!==t)break;if(o===t&&l===e){c(this,Pr).splice(s,1);return}}},Tb=function(t){const[e,n,s]=t,o=[[e,n,s]],l=L(this,Ni,T0).call(this,s);for(let u=0;u<l;u++){const[d,f]=c(this,Pr)[u];for(let g=0,y=o.length;g<y;g++){const[,m,b]=o[g];if(!(f<=m||b<=d)){if(m>=d){if(b>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,b>f&&o.push([e,f,b])}}}return o};var Tg,gd;class qR extends Tt{constructor(e,n,s){super();k(this,Tg);k(this,gd);S(this,gd,e),S(this,Tg,n),this.lastPoint=s}toSVGPath(){const e=[];for(const n of c(this,gd)){let[s,o]=n;e.push(`M${s} ${o}`);for(let l=2;l<n.length;l+=2){const u=n[l],d=n[l+1];u===s?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${u}`),s=u)}e.push("Z")}return e.join(" ")}serialize([e,n,s,o],l){const u=[],d=s-e,f=o-n;for(const g of c(this,gd)){const y=new Array(g.length);for(let m=0;m<g.length;m+=2)y[m]=e+g[m]*d,y[m+1]=o-g[m+1]*f;u.push(y)}return u}get box(){return c(this,Tg)}get classNamesForOutlining(){return["highlightOutline"]}}Tg=new WeakMap,gd=new WeakMap;class xb extends q0{newFreeDrawOutline(t,e,n,s,o,l){return new HR(t,e,n,s,o,l)}}class HR extends Dx{newOutliner(t,e,n,s,o,l=0){return new xb(t,e,n,s,o,l)}}var Ir,lc,md,vn,xg,yd,Cg,kg,El,Or,vd,Hn,Ng,_e,Cb,kb,Nb,du,zx,Ja;let Hx=(Hn=class{constructor({editor:t=null,uiManager:e=null}){k(this,_e);k(this,Ir,null);k(this,lc,null);k(this,md);k(this,vn,null);k(this,xg,!1);k(this,yd,!1);k(this,Cg,null);k(this,kg);k(this,El,null);k(this,Or,null);k(this,vd);var n;t?(S(this,yd,!1),S(this,vd,ue.HIGHLIGHT_COLOR),S(this,Cg,t)):(S(this,yd,!0),S(this,vd,ue.HIGHLIGHT_DEFAULT_COLOR)),S(this,Or,(t==null?void 0:t._uiManager)||e),S(this,kg,c(this,Or)._eventBus),S(this,md,(t==null?void 0:t.color)||((n=c(this,Or))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Hn,Ng)||S(Hn,Ng,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return se(this,"_keyboardManager",new qg([[["Escape","mac+Escape"],Hn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Hn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Hn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Hn.prototype._moveToPrevious],[["Home","mac+Home"],Hn.prototype._moveToBeginning],[["End","mac+End"],Hn.prototype._moveToEnd]]))}renderButton(){const t=S(this,Ir,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Or)._signal;t.addEventListener("click",L(this,_e,du).bind(this),{signal:e}),t.addEventListener("keydown",L(this,_e,Nb).bind(this),{signal:e});const n=S(this,lc,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,md),t.append(n),t}renderMainDropdown(){const t=S(this,vn,L(this,_e,Cb).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Ir)){L(this,_e,du).call(this,t);return}const e=t.target.getAttribute("data-color");e&&L(this,_e,kb).call(this,e,t)}_moveToNext(t){var e,n;if(!c(this,_e,Ja)){L(this,_e,du).call(this,t);return}if(t.target===c(this,Ir)){(e=c(this,vn).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=c(this,vn))==null?void 0:e.firstChild)||t.target===c(this,Ir)){c(this,_e,Ja)&&this._hideDropdownFromKeyboard();return}c(this,_e,Ja)||L(this,_e,du).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!c(this,_e,Ja)){L(this,_e,du).call(this,t);return}(e=c(this,vn).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,_e,Ja)){L(this,_e,du).call(this,t);return}(e=c(this,vn).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,vn))==null||t.classList.add("hidden"),(e=c(this,El))==null||e.abort(),S(this,El,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,yd)){if(!c(this,_e,Ja)){(t=c(this,Cg))==null||t.unselect();return}this.hideDropdown(),c(this,Ir).focus({preventScroll:!0,focusVisible:c(this,xg)})}}updateColor(t){if(c(this,lc)&&(c(this,lc).style.backgroundColor=t),!c(this,vn))return;const e=c(this,Or).highlightColors.values();for(const n of c(this,vn).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,Ir))==null||t.remove(),S(this,Ir,null),S(this,lc,null),(e=c(this,vn))==null||e.remove(),S(this,vn,null)}},Ir=new WeakMap,lc=new WeakMap,md=new WeakMap,vn=new WeakMap,xg=new WeakMap,yd=new WeakMap,Cg=new WeakMap,kg=new WeakMap,El=new WeakMap,Or=new WeakMap,vd=new WeakMap,Ng=new WeakMap,_e=new WeakSet,Cb=function(){const t=document.createElement("div"),e=c(this,Or)._signal;t.addEventListener("contextmenu",Hr,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of c(this,Or).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=n,o.setAttribute("data-l10n-id",c(Hn,Ng)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=s,o.setAttribute("aria-selected",s===c(this,md)),o.addEventListener("click",L(this,_e,kb).bind(this,s),{signal:e}),t.append(o)}return t.addEventListener("keydown",L(this,_e,Nb).bind(this),{signal:e}),t},kb=function(t,e){e.stopPropagation(),c(this,kg).dispatch("switchannotationeditorparams",{source:this,type:c(this,vd),value:t})},Nb=function(t){Hn._keyboardManager.exec(this,t)},du=function(t){if(c(this,_e,Ja)){this.hideDropdown();return}if(S(this,xg,t.detail===0),c(this,El)||(S(this,El,new AbortController),window.addEventListener("pointerdown",L(this,_e,zx).bind(this),{signal:c(this,Or).combinedSignal(c(this,El))})),c(this,vn)){c(this,vn).classList.remove("hidden");return}const e=S(this,vn,L(this,_e,Cb).call(this));c(this,Ir).append(e)},zx=function(t){var e;(e=c(this,vn))!=null&&e.contains(t.target)||this.hideDropdown()},Ja=function(){return c(this,vn)&&!c(this,vn).classList.contains("hidden")},k(Hn,Ng,null),Hn);var bd,Lg,ma,uc,wd,Xi,Rg,Pg,cc,Vs,gs,Bn,Ad,ya,ni,_d,Ws,Ig,Vt,Lb,x0,Ux,$x,Gx,Rb,fu,Zs,ph,Vx,C0,Vf,Wx,Xx,Yx,Kx,Qx;const ve=class ve extends Ge{constructor(e){super({...e,name:"highlightEditor"});k(this,Vt);k(this,bd,null);k(this,Lg,0);k(this,ma);k(this,uc,null);k(this,wd,null);k(this,Xi,null);k(this,Rg,null);k(this,Pg,0);k(this,cc,null);k(this,Vs,null);k(this,gs,null);k(this,Bn,!1);k(this,Ad,null);k(this,ya);k(this,ni,null);k(this,_d,"");k(this,Ws);k(this,Ig,"");this.color=e.color||ve._defaultColor,S(this,Ws,e.thickness||ve._defaultThickness),S(this,ya,e.opacity||ve._defaultOpacity),S(this,ma,e.boxes||null),S(this,Ig,e.methodOfCreation||""),S(this,_d,e.text||""),this._isDraggable=!1,e.highlightId>-1?(S(this,Bn,!0),L(this,Vt,x0).call(this,e),L(this,Vt,fu).call(this)):c(this,ma)&&(S(this,bd,e.anchorNode),S(this,Lg,e.anchorOffset),S(this,Rg,e.focusNode),S(this,Pg,e.focusOffset),L(this,Vt,Lb).call(this),L(this,Vt,fu).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ve.prototype;return se(this,"_keyboardManager",new qg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Bn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Ws),methodOfCreation:c(this,Ig)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Ge.initialize(e,n),ve._defaultColor||(ve._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case ue.HIGHLIGHT_DEFAULT_COLOR:ve._defaultColor=n;break;case ue.HIGHLIGHT_THICKNESS:ve._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return c(this,Ad)}updateParams(e,n){switch(e){case ue.HIGHLIGHT_COLOR:L(this,Vt,Ux).call(this,n);break;case ue.HIGHLIGHT_THICKNESS:L(this,Vt,$x).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ue.HIGHLIGHT_DEFAULT_COLOR,ve._defaultColor],[ue.HIGHLIGHT_THICKNESS,ve._defaultThickness]]}get propertiesToUpdate(){return[[ue.HIGHLIGHT_COLOR,this.color||ve._defaultColor],[ue.HIGHLIGHT_THICKNESS,c(this,Ws)||ve._defaultThickness],[ue.HIGHLIGHT_FREE,c(this,Bn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(S(this,wd,new Hx({editor:this})),e.addColorPicker(c(this,wd))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(L(this,Vt,Vf).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,L(this,Vt,Vf).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){L(this,Vt,Rb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(L(this,Vt,fu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?L(this,Vt,Rb).call(this):e&&(L(this,Vt,fu).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,l,u;const{drawLayer:n}=this.parent;let s;c(this,Bn)?(e=(e-this.rotation+360)%360,s=L(o=ve,Zs,ph).call(o,c(this,Vs).box,e)):s=L(l=ve,Zs,ph).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(c(this,gs),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(c(this,ni),{bbox:L(u=ve,Zs,ph).call(u,c(this,Xi).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,_d)&&(e.setAttribute("aria-label",c(this,_d)),e.setAttribute("role","mark")),c(this,Bn)?e.classList.add("free"):this.div.addEventListener("keydown",L(this,Vt,Vx).bind(this),{signal:this._uiManager._signal});const n=S(this,cc,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,uc);const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),F0(this,c(this,cc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,ni),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,ni),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:L(this,Vt,C0).call(this,!0);break;case 1:case 3:L(this,Vt,C0).call(this,!1);break}}select(){var e;super.select(),c(this,ni)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,ni),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,ni)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,ni),{rootClass:{selected:!1}}),c(this,Bn)||L(this,Vt,C0).call(this,!1))}get _mustFixPosition(){return!c(this,Bn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,gs),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,ni),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:o,y:l}){const{x:u,y:d,width:f,height:g}=s.getBoundingClientRect(),y=new AbortController,m=e.combinedSignal(y),b=_=>{y.abort(),L(this,Zs,Kx).call(this,e,_)};window.addEventListener("blur",b,{signal:m}),window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("pointerdown",As,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Hr,{signal:m}),s.addEventListener("pointermove",L(this,Zs,Yx).bind(this,e),{signal:m}),this._freeHighlight=new xb({x:o,y:l},[u,d,f,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var E,x,N,I;let o=null;if(e instanceof _x){const{data:{quadPoints:B,rect:j,rotation:T,id:P,color:M,opacity:W,popupRef:nt},parent:{page:{pageNumber:ht}}}=e;o=e={annotationType:Kt.HIGHLIGHT,color:Array.from(M),opacity:W,quadPoints:B,boxes:null,pageIndex:ht-1,rect:j.slice(0),rotation:T,id:P,deleted:!1,popupRef:nt}}else if(e instanceof Aw){const{data:{inkLists:B,rect:j,rotation:T,id:P,color:M,borderStyle:{rawWidth:W},popupRef:nt},parent:{page:{pageNumber:ht}}}=e;o=e={annotationType:Kt.HIGHLIGHT,color:Array.from(M),thickness:W,inkLists:B,boxes:null,pageIndex:ht-1,rect:j.slice(0),rotation:T,id:P,deleted:!1,popupRef:nt}}const{color:l,quadPoints:u,inkLists:d,opacity:f}=e,g=await super.deserialize(e,n,s);g.color=Mt.makeHexColor(...l),S(g,ya,f||1),d&&S(g,Ws,e.thickness),g.annotationElementId=e.id||null,g._initialData=o;const[y,m]=g.pageDimensions,[b,_]=g.pageTranslation;if(u){const B=S(g,ma,[]);for(let j=0;j<u.length;j+=8)B.push({x:(u[j]-b)/y,y:1-(u[j+1]-_)/m,width:(u[j+2]-u[j])/y,height:(u[j+1]-u[j+5])/m});L(E=g,Vt,Lb).call(E),L(x=g,Vt,fu).call(x),g.rotate(g.rotation)}else if(d){S(g,Bn,!0);const B=d[0],j={x:B[0]-b,y:m-(B[1]-_)},T=new xb(j,[0,0,y,m],1,c(g,Ws)/2,!0,.001);for(let W=0,nt=B.length;W<nt;W+=2)j.x=B[W]-b,j.y=m-(B[W+1]-_),T.add(j);const{id:P,clipPathId:M}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);L(N=g,Vt,x0).call(N,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:M}),L(I=g,Vt,fu).call(I)}return g}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=Ge._colorManager.convert(this.color),o={annotationType:Kt.HIGHLIGHT,color:s,opacity:c(this,ya),thickness:c(this,Ws),quadPoints:L(this,Vt,Wx).call(this),outlines:L(this,Vt,Xx).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:L(this,Vt,Vf).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!L(this,Vt,Qx).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};bd=new WeakMap,Lg=new WeakMap,ma=new WeakMap,uc=new WeakMap,wd=new WeakMap,Xi=new WeakMap,Rg=new WeakMap,Pg=new WeakMap,cc=new WeakMap,Vs=new WeakMap,gs=new WeakMap,Bn=new WeakMap,Ad=new WeakMap,ya=new WeakMap,ni=new WeakMap,_d=new WeakMap,Ws=new WeakMap,Ig=new WeakMap,Vt=new WeakSet,Lb=function(){const e=new Sb(c(this,ma),.001);S(this,Vs,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Vs).box;const n=new Sb(c(this,ma),.0025,.001,this._uiManager.direction==="ltr");S(this,Xi,n.getOutlines());const{lastPoint:s}=c(this,Xi);S(this,Ad,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},x0=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var y,m;if(S(this,Vs,e),S(this,Xi,e.getNewOutline(c(this,Ws)/2+1.5,.0025)),n>=0)S(this,gs,n),S(this,uc,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),S(this,ni,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Xi).box,path:{d:c(this,Xi).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,gs),{bbox:L(y=ve,Zs,ph).call(y,c(this,Vs).box,(b-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,ni),{bbox:L(m=ve,Zs,ph).call(m,c(this,Xi).box,b),path:{d:c(this,Xi).toSVGPath()}})}const[l,u,d,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=d,this.height=f;break;case 90:{const[b,_]=this.parentDimensions;this.x=u,this.y=1-l,this.width=d*_/b,this.height=f*b/_;break}case 180:this.x=1-l,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[b,_]=this.parentDimensions;this.x=1-u,this.y=l,this.width=d*_/b,this.height=f*b/_;break}}const{lastPoint:g}=c(this,Xi);S(this,Ad,[(g[0]-l)/d,(g[1]-u)/f])},Ux=function(e){const n=(l,u)=>{var d,f;this.color=l,S(this,ya,u),(d=this.parent)==null||d.drawLayer.updateProperties(c(this,gs),{root:{fill:l,"fill-opacity":u}}),(f=c(this,wd))==null||f.updateColor(l)},s=this.color,o=c(this,ya);this.addCommands({cmd:n.bind(this,e,ve._defaultOpacity),undo:n.bind(this,s,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},$x=function(e){const n=c(this,Ws),s=o=>{S(this,Ws,o),L(this,Vt,Gx).call(this,o)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Gx=function(e){if(!c(this,Bn))return;L(this,Vt,x0).call(this,{highlightOutlines:c(this,Vs).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},Rb=function(){c(this,gs)===null||!this.parent||(this.parent.drawLayer.remove(c(this,gs)),S(this,gs,null),this.parent.drawLayer.remove(c(this,ni)),S(this,ni,null))},fu=function(e=this.parent){c(this,gs)===null&&({id:wi(this,gs)._,clipPathId:wi(this,uc)._}=e.drawLayer.draw({bbox:c(this,Vs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,ya)},rootClass:{highlight:!0,free:c(this,Bn)},path:{d:c(this,Vs).toSVGPath()}},!1,!0),S(this,ni,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Bn)},bbox:c(this,Xi).box,path:{d:c(this,Xi).toSVGPath()}},c(this,Bn))),c(this,cc)&&(c(this,cc).style.clipPath=c(this,uc)))},Zs=new WeakSet,ph=function([e,n,s,o],l){switch(l){case 90:return[1-n-o,e,o,s];case 180:return[1-e-s,1-n-o,s,o];case 270:return[n,1-e-s,o,s]}return[e,n,s,o]},Vx=function(e){ve._keyboardManager.exec(this,e)},C0=function(e){if(!c(this,bd))return;const n=window.getSelection();e?n.setPosition(c(this,bd),c(this,Lg)):n.setPosition(c(this,Rg),c(this,Pg))},Vf=function(){return c(this,Bn)?this.rotation:0},Wx=function(){if(c(this,Bn))return null;const[e,n]=this.pageDimensions,[s,o]=this.pageTranslation,l=c(this,ma),u=new Float32Array(l.length*8);let d=0;for(const{x:f,y:g,width:y,height:m}of l){const b=f*e+s,_=(1-g)*n+o;u[d]=u[d+4]=b,u[d+1]=u[d+3]=_,u[d+2]=u[d+6]=b+y*e,u[d+5]=u[d+7]=_-m*n,d+=8}return u},Xx=function(e){return c(this,Vs).serialize(e,L(this,Vt,Vf).call(this))},Yx=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Kx=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Qx=function(e){const{color:n}=this._initialData;return e.color.some((s,o)=>s!==n[o])},k(ve,Zs),lt(ve,"_defaultColor",null),lt(ve,"_defaultOpacity",1),lt(ve,"_defaultThickness",12),lt(ve,"_type","highlight"),lt(ve,"_editorType",Kt.HIGHLIGHT),lt(ve,"_freeHighlightId",-1),lt(ve,"_freeHighlight",null),lt(ve,"_freeHighlightClipId","");let H0=ve;var hc;class zR{constructor(){k(this,hc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){c(this,hc)[t]=e}toSVGProperties(){const t=c(this,hc);return S(this,hc,Object.create(null)),{root:t}}reset(){S(this,hc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Se("Not implemented")}}hc=new WeakMap;var ms,Ed,Ln,dc,fc,Sl,Tl,xl,pc,fe,Ib,Ob,Mb,Wf,Zx,k0,Xf,gh;const xt=class xt extends Ge{constructor(e){super(e);k(this,fe);k(this,ms,null);k(this,Ed);lt(this,"_drawId",null);S(this,Ed,e.mustBeCommitted||!1),e.drawOutlines&&(L(this,fe,Ib).call(this,e),L(this,fe,Wf).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[o,l]of Object.entries(n))s.has(o)?Object.assign(e[o],l):e[o]=l;return e}static getDefaultDrawingOptions(e){Se("Not implemented")}static get typesMap(){Se("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(c(xt,Ln).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,o]of this.typesMap)e.push([s,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,o]of this.constructor.typesMap)e.push([s,n[o]]);return e}_updateProperty(e,n,s){const o=this._drawingOptions,l=o[n],u=d=>{var g;o.updateProperty(n,d);const f=c(this,ms).updateProperty(n,d);f&&L(this,fe,Xf).call(this,f),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:u.bind(this,s),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(c(this,ms).getPathResizingSVGProperties(L(this,fe,k0).call(this)),{bbox:L(this,fe,gh).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(c(this,ms).getPathResizedSVGProperties(L(this,fe,k0).call(this)),{bbox:L(this,fe,gh).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:L(this,fe,gh).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(c(this,ms).getPathTranslatedSVGProperties(L(this,fe,k0).call(this),this.parentDimensions),{bbox:L(this,fe,gh).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Ed)&&(S(this,Ed,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){L(this,fe,Mb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(L(this,fe,Wf).call(this),L(this,fe,Xf).call(this,c(this,ms).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),L(this,fe,Mb).call(this)):e&&(this._uiManager.addShouldRescale(this),L(this,fe,Wf).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties({bbox:L(this,fe,gh).call(this)},c(this,ms).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&L(this,fe,Xf).call(this,c(this,ms).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,s,o,l){Se("Not implemented")}static startDrawing(e,n,s,o){var x;const{target:l,offsetX:u,offsetY:d,pointerId:f,pointerType:g}=o;if(c(xt,Tl)&&c(xt,Tl)!==g)return;const{viewport:{rotation:y}}=e,{width:m,height:b}=l.getBoundingClientRect(),_=S(xt,dc,new AbortController),E=e.combinedSignal(_);if(c(xt,Sl)||S(xt,Sl,f),c(xt,Tl)??S(xt,Tl,g),window.addEventListener("pointerup",N=>{var I;c(xt,Sl)===N.pointerId?this._endDraw(N):(I=c(xt,xl))==null||I.delete(N.pointerId)},{signal:E}),window.addEventListener("pointercancel",N=>{var I;c(xt,Sl)===N.pointerId?this._currentParent.endDrawingSession():(I=c(xt,xl))==null||I.delete(N.pointerId)},{signal:E}),window.addEventListener("pointerdown",N=>{c(xt,Tl)===N.pointerType&&((c(xt,xl)||S(xt,xl,new Set)).add(N.pointerId),c(xt,Ln).isCancellable()&&(c(xt,Ln).removeLastElement(),c(xt,Ln).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",Hr,{signal:E}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),l.addEventListener("touchmove",N=>{N.timeStamp===c(xt,pc)&&As(N)},{signal:E}),e.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),c(xt,Ln)){e.drawLayer.updateProperties(this._currentDrawId,c(xt,Ln).startNew(u,d,m,b,y));return}n.updateUIForDefaultProperties(this),S(xt,Ln,this.createDrawerInstance(u,d,m,b,y)),S(xt,fc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(xt,fc).toSVGProperties(),c(xt,Ln).defaultSVGProperties),!0,!1)}static _drawMove(e){var l;if(S(xt,pc,-1),!c(xt,Ln))return;const{offsetX:n,offsetY:s,pointerId:o}=e;if(c(xt,Sl)===o){if(((l=c(xt,xl))==null?void 0:l.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(xt,Ln).add(n,s)),S(xt,pc,e.timeStamp),As(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,S(xt,Ln,null),S(xt,fc,null),S(xt,Tl,null),S(xt,pc,NaN)),c(xt,dc)&&(c(xt,dc).abort(),S(xt,dc,null),S(xt,Sl,NaN),S(xt,xl,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,c(xt,Ln).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=c(xt,Ln),o=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,s.removeLastElement())},mustExec:!1,type:ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(ue.DRAW_STEP),!c(xt,Ln).isEmpty()){const{pageDimensions:[s,o],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(xt,Ln).getOutlines(s*l,o*l,l,this._INNER_MARGIN),drawingOptions:c(xt,fc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,o,l,u){Se("Not implemented")}static async deserialize(e,n,s){var y,m;const{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}=n.viewport,f=this.deserializeDraw(u,d,o,l,this._INNER_MARGIN,e),g=await super.deserialize(e,n,s);return g.createDrawingOptions(e),L(y=g,fe,Ib).call(y,{drawOutlines:f}),L(m=g,fe,Wf).call(m),g.onScaleChanging(),g.rotate(),g}serializeDraw(e){const[n,s]=this.pageTranslation,[o,l]=this.pageDimensions;return c(this,ms).serialize([n,s,o,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ms=new WeakMap,Ed=new WeakMap,Ln=new WeakMap,dc=new WeakMap,fc=new WeakMap,Sl=new WeakMap,Tl=new WeakMap,xl=new WeakMap,pc=new WeakMap,fe=new WeakSet,Ib=function({drawOutlines:e,drawId:n,drawingOptions:s}){S(this,ms,e),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=L(this,fe,Ob).call(this,e,this.parent),L(this,fe,Xf).call(this,e.box)},Ob=function(e,n){const{id:s}=n.drawLayer.draw(xt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},Mb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Wf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=L(this,fe,Ob).call(this,c(this,ms),e)}},Zx=function([e,n,s,o]){const{parentDimensions:[l,u],rotation:d}=this;switch(d){case 90:return[n,1-e,s*(u/l),o*(l/u)];case 180:return[1-e,1-n,s,o];case 270:return[1-n,e,s*(u/l),o*(l/u)];default:return[e,n,s,o]}},k0=function(){const{x:e,y:n,width:s,height:o,parentDimensions:[l,u],rotation:d}=this;switch(d){case 90:return[1-n,e,s*(l/u),o*(u/l)];case 180:return[1-e,1-n,s,o];case 270:return[n,1-e,s*(l/u),o*(u/l)];default:return[e,n,s,o]}},Xf=function(e){if([this.x,this.y,this.width,this.height]=L(this,fe,Zx).call(this,e),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()},gh=function(){const{x:e,y:n,width:s,height:o,rotation:l,parentRotation:u,parentDimensions:[d,f]}=this;switch((l*4+u)/90){case 1:return[1-n-o,e,o,s];case 2:return[1-e-s,1-n-o,s,o];case 3:return[n,1-e-s,o,s];case 4:return[e,n-s*(d/f),o*(f/d),s*(d/f)];case 5:return[1-n,e,s*(d/f),o*(f/d)];case 6:return[1-e-o*(f/d),1-n,o*(f/d),s*(d/f)];case 7:return[n-s*(d/f),1-e-o*(f/d),s*(d/f),o*(f/d)];case 8:return[e-s,n-o,s,o];case 9:return[1-n,e-s,o,s];case 10:return[1-e,1-n,s,o];case 11:return[n-o,1-e,o,s];case 12:return[e-o*(f/d),n,o*(f/d),s*(d/f)];case 13:return[1-n-s*(d/f),e-o*(f/d),s*(d/f),o*(f/d)];case 14:return[1-e,1-n-s*(d/f),o*(f/d),s*(d/f)];case 15:return[n,1-e,s*(d/f),o*(f/d)];default:return[e,n,s,o]}},lt(xt,"_currentDrawId",-1),lt(xt,"_currentParent",null),k(xt,Ln,null),k(xt,dc,null),k(xt,fc,null),k(xt,Sl,NaN),k(xt,Tl,null),k(xt,xl,null),k(xt,pc,NaN),lt(xt,"_INNER_MARGIN",3);let Pb=xt;var yo,Rn,Pn,gc,Sd,Si,jn,Xs,mc,yc,vc,Td,N0;class UR{constructor(t,e,n,s,o,l){k(this,Td);k(this,yo,new Float64Array(6));k(this,Rn);k(this,Pn);k(this,gc);k(this,Sd);k(this,Si);k(this,jn,"");k(this,Xs,0);k(this,mc,new z0);k(this,yc);k(this,vc);S(this,yc,n),S(this,vc,s),S(this,gc,o),S(this,Sd,l),[t,e]=L(this,Td,N0).call(this,t,e);const u=S(this,Rn,[NaN,NaN,NaN,NaN,t,e]);S(this,Si,[t,e]),S(this,Pn,[{line:u,points:c(this,Si)}]),c(this,yo).set(u,0)}updateProperty(t,e){t==="stroke-width"&&S(this,Sd,e)}isEmpty(){return!c(this,Pn)||c(this,Pn).length===0}isCancellable(){return c(this,Si).length<=10}add(t,e){[t,e]=L(this,Td,N0).call(this,t,e);const[n,s,o,l]=c(this,yo).subarray(2,6),u=t-o,d=e-l;return Math.hypot(c(this,yc)*u,c(this,vc)*d)<=2?null:(c(this,Si).push(t,e),isNaN(n)?(c(this,yo).set([o,l,t,e],2),c(this,Rn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,yo)[0])&&c(this,Rn).splice(6,6),c(this,yo).set([n,s,o,l,t,e],0),c(this,Rn).push(...Tt.createBezierPoints(n,s,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(c(this,Si).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,o){S(this,yc,n),S(this,vc,s),S(this,gc,o),[t,e]=L(this,Td,N0).call(this,t,e);const l=S(this,Rn,[NaN,NaN,NaN,NaN,t,e]);S(this,Si,[t,e]);const u=c(this,Pn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,Pn).push({line:l,points:c(this,Si)}),c(this,yo).set(l,0),S(this,Xs,0),this.toSVGPath(),null}getLastElement(){return c(this,Pn).at(-1)}setLastElement(t){return c(this,Pn)?(c(this,Pn).push(t),S(this,Rn,t.line),S(this,Si,t.points),S(this,Xs,0),{path:{d:this.toSVGPath()}}):c(this,mc).setLastElement(t)}removeLastElement(){if(!c(this,Pn))return c(this,mc).removeLastElement();c(this,Pn).pop(),S(this,jn,"");for(let t=0,e=c(this,Pn).length;t<e;t++){const{line:n,points:s}=c(this,Pn)[t];S(this,Rn,n),S(this,Si,s),S(this,Xs,0),this.toSVGPath()}return{path:{d:c(this,jn)}}}toSVGPath(){const t=Tt.svgRound(c(this,Rn)[4]),e=Tt.svgRound(c(this,Rn)[5]);if(c(this,Si).length===2)return S(this,jn,`${c(this,jn)} M ${t} ${e} Z`),c(this,jn);if(c(this,Si).length<=6){const s=c(this,jn).lastIndexOf("M");S(this,jn,`${c(this,jn).slice(0,s)} M ${t} ${e}`),S(this,Xs,6)}if(c(this,Si).length===4){const s=Tt.svgRound(c(this,Rn)[10]),o=Tt.svgRound(c(this,Rn)[11]);return S(this,jn,`${c(this,jn)} L ${s} ${o}`),S(this,Xs,12),c(this,jn)}const n=[];c(this,Xs)===0&&(n.push(`M ${t} ${e}`),S(this,Xs,6));for(let s=c(this,Xs),o=c(this,Rn).length;s<o;s+=6){const[l,u,d,f,g,y]=c(this,Rn).slice(s,s+6).map(Tt.svgRound);n.push(`C${l} ${u} ${d} ${f} ${g} ${y}`)}return S(this,jn,c(this,jn)+n.join(" ")),S(this,Xs,c(this,Rn).length),c(this,jn)}getOutlines(t,e,n,s){const o=c(this,Pn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),c(this,mc).build(c(this,Pn),t,e,n,c(this,gc),c(this,Sd),s),S(this,yo,null),S(this,Rn,null),S(this,Pn,null),S(this,jn,null),c(this,mc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}yo=new WeakMap,Rn=new WeakMap,Pn=new WeakMap,gc=new WeakMap,Sd=new WeakMap,Si=new WeakMap,jn=new WeakMap,Xs=new WeakMap,mc=new WeakMap,yc=new WeakMap,vc=new WeakMap,Td=new WeakSet,N0=function(t,e){return Tt._normalizePoint(t,e,c(this,yc),c(this,vc),c(this,gc))};var Ti,Og,Mg,ys,vo,bo,xd,Cd,kd,zn,Xo,Jx,tC,eC;const Hw=class Hw extends Tt{constructor(){super(...arguments);k(this,zn);k(this,Ti);k(this,Og,0);k(this,Mg);k(this,ys);k(this,vo);k(this,bo);k(this,xd);k(this,Cd);k(this,kd)}build(e,n,s,o,l,u,d){S(this,vo,n),S(this,bo,s),S(this,xd,o),S(this,Cd,l),S(this,kd,u),S(this,Mg,d??0),S(this,ys,e),L(this,zn,tC).call(this)}setLastElement(e){return c(this,ys).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,ys).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of c(this,ys)){if(e.push(`M${Tt.svgRound(n[4])} ${Tt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${Tt.svgRound(n[10])} ${Tt.svgRound(n[11])}`);continue}for(let s=6,o=n.length;s<o;s+=6){const[l,u,d,f,g,y]=n.subarray(s,s+6).map(Tt.svgRound);e.push(`C${l} ${u} ${d} ${f} ${g} ${y}`)}}return e.join("")}serialize([e,n,s,o],l){const u=[],d=[],[f,g,y,m]=L(this,zn,Jx).call(this);let b,_,E,x,N,I,B,j,T;switch(c(this,Cd)){case 0:T=Tt._rescale,b=e,_=n+o,E=s,x=-o,N=e+f*s,I=n+(1-g-m)*o,B=e+(f+y)*s,j=n+(1-g)*o;break;case 90:T=Tt._rescaleAndSwap,b=e,_=n,E=s,x=o,N=e+g*s,I=n+f*o,B=e+(g+m)*s,j=n+(f+y)*o;break;case 180:T=Tt._rescale,b=e+s,_=n,E=-s,x=o,N=e+(1-f-y)*s,I=n+g*o,B=e+(1-f)*s,j=n+(g+m)*o;break;case 270:T=Tt._rescaleAndSwap,b=e+s,_=n+o,E=-s,x=-o,N=e+(1-g-m)*s,I=n+(1-f-y)*o,B=e+(1-g)*s,j=n+(1-f)*o;break}for(const{line:P,points:M}of c(this,ys))u.push(T(P,b,_,E,x,l?new Array(P.length):null)),d.push(T(M,b,_,E,x,l?new Array(M.length):null));return{lines:u,points:d,rect:[N,I,B,j]}}static deserialize(e,n,s,o,l,{paths:{lines:u,points:d},rotation:f,thickness:g}){const y=[];let m,b,_,E,x;switch(f){case 0:x=Tt._rescale,m=-e/s,b=n/o+1,_=1/s,E=-1/o;break;case 90:x=Tt._rescaleAndSwap,m=-n/o,b=-e/s,_=1/o,E=1/s;break;case 180:x=Tt._rescale,m=e/s+1,b=-n/o,_=-1/s,E=1/o;break;case 270:x=Tt._rescaleAndSwap,m=n/o+1,b=e/s+1,_=-1/o,E=-1/s;break}if(!u){u=[];for(const I of d){const B=I.length;if(B===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,I[0],I[1]]));continue}if(B===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,I[0],I[1],NaN,NaN,NaN,NaN,I[2],I[3]]));continue}const j=new Float32Array(3*(B-2));u.push(j);let[T,P,M,W]=I.subarray(0,4);j.set([NaN,NaN,NaN,NaN,T,P],0);for(let nt=4;nt<B;nt+=2){const ht=I[nt],O=I[nt+1];j.set(Tt.createBezierPoints(T,P,M,W,ht,O),(nt-2)*3),[T,P,M,W]=[M,W,ht,O]}}}for(let I=0,B=u.length;I<B;I++)y.push({line:x(u[I].map(j=>j??NaN),m,b,_,E),points:x(d[I].map(j=>j??NaN),m,b,_,E)});const N=new Hw;return N.build(y,s,o,1,f,g,l),N}get box(){return c(this,Ti)}updateProperty(e,n){return e==="stroke-width"?L(this,zn,eC).call(this,n):null}updateParentDimensions([e,n],s){const[o,l]=L(this,zn,Xo).call(this);S(this,vo,e),S(this,bo,n),S(this,xd,s);const[u,d]=L(this,zn,Xo).call(this),f=u-o,g=d-l,y=c(this,Ti);return y[0]-=f,y[1]-=g,y[2]+=2*f,y[3]+=2*g,y}updateRotation(e){return S(this,Og,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Ti).map(Tt.svgRound).join(" ")}get defaultProperties(){const[e,n]=c(this,Ti);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=c(this,Ti);let s=0,o=0,l=0,u=0,d=0,f=0;switch(c(this,Og)){case 90:o=n/e,l=-e/n,d=e;break;case 180:s=-1,u=-1,d=e,f=n;break;case 270:o=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${s} ${o} ${l} ${u} ${Tt.svgRound(d)} ${Tt.svgRound(f)})`}getPathResizingSVGProperties([e,n,s,o]){const[l,u]=L(this,zn,Xo).call(this),[d,f,g,y]=c(this,Ti);if(Math.abs(g-l)<=Tt.PRECISION||Math.abs(y-u)<=Tt.PRECISION){const x=e+s/2-(d+g/2),N=n+o/2-(f+y/2);return{path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${N})`}}}const m=(s-2*l)/(g-2*l),b=(o-2*u)/(y-2*u),_=g/s,E=y/o;return{path:{"transform-origin":`${Tt.svgRound(d)} ${Tt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${_} ${E}) translate(${Tt.svgRound(l)} ${Tt.svgRound(u)}) scale(${m} ${b}) translate(${Tt.svgRound(-l)} ${Tt.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,s,o]){const[l,u]=L(this,zn,Xo).call(this),d=c(this,Ti),[f,g,y,m]=d;if(d[0]=e,d[1]=n,d[2]=s,d[3]=o,Math.abs(y-l)<=Tt.PRECISION||Math.abs(m-u)<=Tt.PRECISION){const N=e+s/2-(f+y/2),I=n+o/2-(g+m/2);for(const{line:B,points:j}of c(this,ys))Tt._translate(B,N,I,B),Tt._translate(j,N,I,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*l)/(y-2*l),_=(o-2*u)/(m-2*u),E=-b*(f+l)+e+l,x=-_*(g+u)+n+u;if(b!==1||_!==1||E!==0||x!==0)for(const{line:N,points:I}of c(this,ys))Tt._rescale(N,E,x,b,_,N),Tt._rescale(I,E,x,b,_,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[o,l]=s,u=c(this,Ti),d=e-u[0],f=n-u[1];if(c(this,vo)===o&&c(this,bo)===l)for(const{line:g,points:y}of c(this,ys))Tt._translate(g,d,f,g),Tt._translate(y,d,f,y);else{const g=c(this,vo)/o,y=c(this,bo)/l;S(this,vo,o),S(this,bo,l);for(const{line:m,points:b}of c(this,ys))Tt._rescale(m,d,f,g,y,m),Tt._rescale(b,d,f,g,y,b);u[2]*=g,u[3]*=y}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`}}}get defaultSVGProperties(){const e=c(this,Ti);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Tt.svgRound(e[0])} ${Tt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};Ti=new WeakMap,Og=new WeakMap,Mg=new WeakMap,ys=new WeakMap,vo=new WeakMap,bo=new WeakMap,xd=new WeakMap,Cd=new WeakMap,kd=new WeakMap,zn=new WeakSet,Xo=function(e=c(this,kd)){const n=c(this,Mg)+e/2*c(this,xd);return c(this,Cd)%180===0?[n/c(this,vo),n/c(this,bo)]:[n/c(this,bo),n/c(this,vo)]},Jx=function(){const[e,n,s,o]=c(this,Ti),[l,u]=L(this,zn,Xo).call(this,0);return[e+l,n+u,s-2*l,o-2*u]},tC=function(){const e=S(this,Ti,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of c(this,ys)){if(o.length<=12){for(let d=4,f=o.length;d<f;d+=6){const[g,y]=o.subarray(d,d+2);e[0]=Math.min(e[0],g),e[1]=Math.min(e[1],y),e[2]=Math.max(e[2],g),e[3]=Math.max(e[3],y)}continue}let l=o[4],u=o[5];for(let d=6,f=o.length;d<f;d+=6){const[g,y,m,b,_,E]=o.subarray(d,d+6);Mt.bezierBoundingBox(l,u,g,y,m,b,_,E,e),l=_,u=E}}const[n,s]=L(this,zn,Xo).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-s)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+s)),e[2]-=e[0],e[3]-=e[1]},eC=function(e){const[n,s]=L(this,zn,Xo).call(this);S(this,kd,e);const[o,l]=L(this,zn,Xo).call(this),[u,d]=[o-n,l-s],f=c(this,Ti);return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f};let z0=Hw;var Nd;const zw=class zw extends zR{constructor(e){super();k(this,Nd);S(this,Nd,e),super.updateProperties({fill:"none",stroke:Ge._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=c(this,Nd).realScale),super.updateSVGProperty(e,n)}clone(){const e=new zw(c(this,Nd));return e.updateAll(this),e}};Nd=new WeakMap;let Db=zw;var hy,nC;const Eh=class Eh extends Pb{constructor(e){super({...e,name:"inkEditor"});k(this,hy);this._willKeepAspectRatio=!0}static initialize(e,n){Ge.initialize(e,n),this._defaultDrawingOptions=new Db(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return se(this,"typesMap",new Map([[ue.INK_THICKNESS,"stroke-width"],[ue.INK_COLOR,"stroke"],[ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,o,l){return new UR(e,n,s,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,o,l,u){return z0.deserialize(e,n,s,o,l,u)}static async deserialize(e,n,s){let o=null;if(e instanceof Aw){const{data:{inkLists:u,rect:d,rotation:f,id:g,color:y,opacity:m,borderStyle:{rawWidth:b},popupRef:_},parent:{page:{pageNumber:E}}}=e;o=e={annotationType:Kt.INK,color:Array.from(y),thickness:b,opacity:m,paths:{points:u},boxes:null,pageIndex:E-1,rect:d.slice(0),rotation:f,id:g,deleted:!1,popupRef:_}}const l=await super.deserialize(e,n,s);return l.annotationElementId=e.id||null,l._initialData=o,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=Eh.getDefaultDrawingOptions({stroke:Mt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":d}}=this,f={annotationType:Kt.INK,color:Ge._colorManager.convert(l),opacity:u,thickness:d,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?f:this.annotationElementId&&!L(this,hy,nC).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}};hy=new WeakSet,nC=function(e){const{color:n,thickness:s,opacity:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((u,d)=>u!==n[d])||e.thickness!==s||e.opacity!==o||e.pageIndex!==l},lt(Eh,"_type","ink"),lt(Eh,"_editorType",Kt.INK),lt(Eh,"_defaultDrawingOptions",null);let Fb=Eh;var $e,qn,Cl,va,kl,Ld,wo,Ao,vs,Rd,ye,Yf,Kf,L0,jb,R0,qb,P0,iC;const ep=class ep extends Ge{constructor(e){super({...e,name:"stampEditor"});k(this,ye);k(this,$e,null);k(this,qn,null);k(this,Cl,null);k(this,va,null);k(this,kl,null);k(this,Ld,"");k(this,wo,null);k(this,Ao,null);k(this,vs,!1);k(this,Rd,!1);S(this,va,e.bitmapUrl),S(this,kl,e.bitmapFile)}static initialize(e,n){Ge.initialize(e,n)}static get supportedTypes(){return se(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return se(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Kt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,d=await s.guess({name:"altText",request:{data:o,width:l,height:u,channels:o.length/(l*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;c(this,qn)&&(S(this,$e,null),this._uiManager.imageManager.deleteId(c(this,qn)),(e=c(this,wo))==null||e.remove(),S(this,wo,null),c(this,Ao)&&(clearTimeout(c(this,Ao)),S(this,Ao,null))),super.remove()}rebuild(){if(!this.parent){c(this,qn)&&L(this,ye,L0).call(this);return}super.rebuild(),this.div!==null&&(c(this,qn)&&c(this,wo)===null&&L(this,ye,L0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,Cl)||c(this,$e)||c(this,va)||c(this,kl)||c(this,qn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,$e)?L(this,ye,jb).call(this):L(this,ye,L0).call(this),this.width&&!this.annotationElementId){const[s,o]=this.parentDimensions;this.setAt(e*s,n*o,this.width*s,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Ao)!==null&&clearTimeout(c(this,Ao)),S(this,Ao,setTimeout(()=>{S(this,Ao,null),L(this,ye,qb).call(this)},200))}copyCanvas(e,n,s=!1){var b;e||(e=224);const{width:o,height:l}=c(this,$e),u=new D1;let d=c(this,$e),f=o,g=l,y=null;if(n){if(o>n||l>n){const W=Math.min(n/o,n/l);f=Math.floor(o*W),g=Math.floor(l*W)}y=document.createElement("canvas");const _=y.width=Math.ceil(f*u.sx),E=y.height=Math.ceil(g*u.sy);c(this,vs)||(d=L(this,ye,R0).call(this,_,E));const x=y.getContext("2d");x.filter=this._uiManager.hcmFilter;let N="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":(b=window.matchMedia)!=null&&b.call(window,"(prefers-color-scheme: dark)").matches&&(N="#8f8f9d",I="#42414d");const B=15,j=B*u.sx,T=B*u.sy,P=new OffscreenCanvas(j*2,T*2),M=P.getContext("2d");M.fillStyle=N,M.fillRect(0,0,j*2,T*2),M.fillStyle=I,M.fillRect(0,0,j,T),M.fillRect(j,T,j,T),x.fillStyle=x.createPattern(P,"repeat"),x.fillRect(0,0,_,E),x.drawImage(d,0,0,d.width,d.height,0,0,_,E)}let m=null;if(s){let _,E;if(u.symmetric&&d.width<e&&d.height<e)_=d.width,E=d.height;else if(d=c(this,$e),o>e||l>e){const I=Math.min(e/o,e/l);_=Math.floor(o*I),E=Math.floor(l*I),c(this,vs)||(d=L(this,ye,R0).call(this,_,E))}const N=new OffscreenCanvas(_,E).getContext("2d",{willReadFrequently:!0});N.drawImage(d,0,0,d.width,d.height,0,0,_,E),m={width:_,height:E,data:N.getImageData(0,0,_,E).data}}return{canvas:y,width:f,height:g,imageData:m}}getImageForAltText(){return c(this,wo)}static async deserialize(e,n,s){var E;let o=null;if(e instanceof Ex){const{data:{rect:x,rotation:N,id:I,structParent:B,popupRef:j},container:T,parent:{page:{pageNumber:P}}}=e,M=T.querySelector("canvas"),W=s.imageManager.getFromCanvas(T.id,M);M.remove();const nt=((E=await n._structTree.getAriaAttributes(`${fw}${I}`))==null?void 0:E.get("aria-label"))||"";o=e={annotationType:Kt.STAMP,bitmapId:W.id,bitmap:W.bitmap,pageIndex:P-1,rect:x.slice(0),rotation:N,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:nt},isSvg:!1,structParent:B,popupRef:j}}const l=await super.deserialize(e,n,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:m}=e;g&&s.imageManager.isValidId(g)?(S(l,qn,g),d&&S(l,$e,d)):S(l,va,f),S(l,vs,y);const[b,_]=l.pageDimensions;return l.width=(u[2]-u[0])/b,l.height=(u[3]-u[1])/_,l.annotationElementId=e.id||null,m&&(l.altTextData=m),l._initialData=o,S(l,Rd,!!o),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Kt.STAMP,bitmapId:c(this,qn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,vs),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=L(this,ye,P0).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=L(this,ye,iC).call(this,s);if(d.isSame)return null;d.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const u=c(this,vs)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(c(this,qn)))n.stamps.set(c(this,qn),{area:u,serialized:s}),s.bitmap=L(this,ye,P0).call(this,!1);else if(c(this,vs)){const d=n.stamps.get(c(this,qn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=L(this,ye,P0).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};$e=new WeakMap,qn=new WeakMap,Cl=new WeakMap,va=new WeakMap,kl=new WeakMap,Ld=new WeakMap,wo=new WeakMap,Ao=new WeakMap,vs=new WeakMap,Rd=new WeakMap,ye=new WeakSet,Yf=function(e,n=!1){if(!e){this.remove();return}S(this,$e,e.bitmap),n||(S(this,qn,e.id),S(this,vs,e.isSvg)),e.file&&S(this,Ld,e.file.name),L(this,ye,jb).call(this)},Kf=function(){if(S(this,Cl,null),this._uiManager.enableWaiting(!1),!!c(this,wo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,$e)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,$e)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},L0=function(){if(c(this,qn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,qn)).then(s=>L(this,ye,Yf).call(this,s,!0)).finally(()=>L(this,ye,Kf).call(this));return}if(c(this,va)){const s=c(this,va);S(this,va,null),this._uiManager.enableWaiting(!0),S(this,Cl,this._uiManager.imageManager.getFromUrl(s).then(o=>L(this,ye,Yf).call(this,o)).finally(()=>L(this,ye,Kf).call(this)));return}if(c(this,kl)){const s=c(this,kl);S(this,kl,null),this._uiManager.enableWaiting(!0),S(this,Cl,this._uiManager.imageManager.getFromFile(s).then(o=>L(this,ye,Yf).call(this,o)).finally(()=>L(this,ye,Kf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=ep.supportedTypesStr;const n=this._uiManager._signal;S(this,Cl,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),L(this,ye,Yf).call(this,o)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>L(this,ye,Kf).call(this))),e.click()},jb=function(){var y;const{div:e}=this;let{width:n,height:s}=c(this,$e);const[o,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,s=this.height*l;else if(n>u*o||s>u*l){const m=Math.min(u*o/n,u*l/s);n*=m,s*=m}const[d,f]=this.parentDimensions;this.setDims(n*d/o,s*f/l),this._uiManager.enableWaiting(!1);const g=S(this,wo,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/o,this.height=s/l,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),L(this,ye,qb).call(this),c(this,Rd)||(this.parent.addUndoableEditor(this),S(this,Rd,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Ld)&&g.setAttribute("aria-label",c(this,Ld))},R0=function(e,n){const{width:s,height:o}=c(this,$e);let l=s,u=o,d=c(this,$e);for(;l>2*e||u>2*n;){const f=l,g=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(l,u);y.getContext("2d").drawImage(d,0,0,f,g,0,0,l,u),d=y.transferToImageBitmap()}return d},qb=function(){const[e,n]=this.parentDimensions,{width:s,height:o}=this,l=new D1,u=Math.ceil(s*e*l.sx),d=Math.ceil(o*n*l.sy),f=c(this,wo);if(!f||f.width===u&&f.height===d)return;f.width=u,f.height=d;const g=c(this,vs)?c(this,$e):L(this,ye,R0).call(this,u,d),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,u,d)},P0=function(e){if(e){if(c(this,vs)){const o=this._uiManager.imageManager.getSvgUrl(c(this,qn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,$e),n.getContext("2d").drawImage(c(this,$e),0,0),n.toDataURL()}if(c(this,vs)){const[n,s]=this.pageDimensions,o=Math.round(this.width*n*Dl.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Dl.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,l);return u.getContext("2d").drawImage(c(this,$e),0,0,c(this,$e).width,c(this,$e).height,0,0,o,l),u.transferToImageBitmap()}return structuredClone(c(this,$e))},iC=function(e){var u;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,o=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},lt(ep,"_type","stamp"),lt(ep,"_editorType",Kt.STAMP);let Bb=ep;var bc,Pd,_o,Nl,ba,Ys,Ll,Id,wc,Mr,wa,ii,Aa,Ot,Rl,je,sC,io,zb,Ub,I0;const _r=class _r{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:g}){k(this,je);k(this,bc);k(this,Pd,!1);k(this,_o,null);k(this,Nl,null);k(this,ba,null);k(this,Ys,new Map);k(this,Ll,!1);k(this,Id,!1);k(this,wc,!1);k(this,Mr,null);k(this,wa,null);k(this,ii,null);k(this,Aa,null);k(this,Ot);const y=[...c(_r,Rl).values()];if(!_r._initialized){_r._initialized=!0;for(const m of y)m.initialize(g,t)}t.registerEditorTypes(y),S(this,Ot,t),this.pageIndex=e,this.div=n,S(this,bc,o),S(this,_o,l),this.viewport=f,S(this,ii,d),this.drawLayer=u,this._structTree=s,c(this,Ot).addLayer(this)}get isEmpty(){return c(this,Ys).size===0}get isInvisible(){return this.isEmpty&&c(this,Ot).getMode()===Kt.NONE}updateToolbar(t){c(this,Ot).updateToolbar(t)}updateMode(t=c(this,Ot).getMode()){switch(L(this,je,I0).call(this),t){case Kt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Kt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Kt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of c(_r,Rl).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,ii))==null?void 0:e.div)}setEditingState(t){c(this,Ot).setEditingState(t)}addCommands(t){c(this,Ot).addCommands(t)}cleanUndoStack(t){c(this,Ot).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,_o))==null||e.div.classList.toggle("disabled",!t)}async enable(){S(this,wc,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of c(this,Ys).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,Ot).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!c(this,_o)){S(this,wc,!1);return}const e=c(this,_o).getEditableAnnotations();for(const n of e){if(n.hide(),c(this,Ot).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}S(this,wc,!1)}disable(){var s;S(this,Id,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of c(this,Ys).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(s=this.getEditableAnnotation(o.annotationElementId))==null||s.show(),o.remove()}if(c(this,_o)){const o=c(this,_o).getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(c(this,Ot).isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=t.get(u),d&&(c(this,Ot).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}L(this,je,I0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(_r,Rl).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,Id,!1)}getEditableAnnotation(t){var e;return((e=c(this,_o))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,Ot).getActive()!==t&&c(this,Ot).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,ii))!=null&&t.div&&!c(this,Aa)){S(this,Aa,new AbortController);const e=c(this,Ot).combinedSignal(c(this,Aa));c(this,ii).div.addEventListener("pointerdown",L(this,je,sC).bind(this),{signal:e}),c(this,ii).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,ii))!=null&&t.div&&c(this,Aa)&&(c(this,Aa).abort(),S(this,Aa,null),c(this,ii).div.classList.remove("highlighting"))}enableClick(){if(c(this,Nl))return;S(this,Nl,new AbortController);const t=c(this,Ot).combinedSignal(c(this,Nl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,Nl))==null||t.abort(),S(this,Nl,null)}attach(t){c(this,Ys).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,Ot).isDeletedAnnotationElement(e)&&c(this,Ot).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Ys).delete(t.id),(e=c(this,bc))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,Id)&&t.annotationElementId&&c(this,Ot).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,Ot).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,Ot).addDeletedAnnotationElement(t.annotationElementId),Ge.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,Ot).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,wc)),c(this,Ot).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,ba)&&(t._focusEventsAllowed=!1,S(this,ba,setTimeout(()=>{S(this,ba,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,Ot)._signal}),e.focus())},0))),t._structTreeParentId=(n=c(this,bc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return c(this,Ot).getId()}combinedSignal(t){return c(this,Ot).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,je,io))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){c(this,Ot).updateToolbar(t),c(this,Ot).updateMode(t);const{offsetX:n,offsetY:s}=L(this,je,Ub).call(this),o=this.getNextId(),l=L(this,je,zb).call(this,{parent:this,id:o,x:n,y:s,uiManager:c(this,Ot),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=c(_r,Rl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,Ot)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),o=L(this,je,zb).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:c(this,Ot),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(L(this,je,Ub).call(this),!0)}setSelected(t){c(this,Ot).setSelected(t)}toggleSelected(t){c(this,Ot).toggleSelected(t)}unselect(t){c(this,Ot).unselect(t)}pointerup(t){var n;const{isMac:e}=Ci.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&c(this,Ll)&&(S(this,Ll,!1),!((n=c(this,je,io))!=null&&n.isDrawer&&c(this,je,io).supportMultipleDrawings))){if(!c(this,Pd)){S(this,Pd,!0);return}if(c(this,Ot).getMode()===Kt.STAMP){c(this,Ot).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var s;if(c(this,Ot).getMode()===Kt.HIGHLIGHT&&this.enableTextSelection(),c(this,Ll)){S(this,Ll,!1);return}const{isMac:e}=Ci.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(S(this,Ll,!0),(s=c(this,je,io))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=c(this,Ot).getActive();S(this,Pd,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),c(this,Mr)){c(this,je,io).startDrawing(this,c(this,Ot),!1,t);return}c(this,Ot).setCurrentDrawingSession(this),S(this,Mr,new AbortController);const e=c(this,Ot).combinedSignal(c(this,Mr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(S(this,wa,null),this.commitOrRemove())},{signal:e}),c(this,je,io).startDrawing(this,c(this,Ot),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&S(this,wa,e);return}c(this,wa)&&setTimeout(()=>{var e;(e=c(this,wa))==null||e.focus(),S(this,wa,null)},0)}endDrawingSession(t=!1){return c(this,Mr)?(c(this,Ot).setCurrentDrawingSession(null),c(this,Mr).abort(),S(this,Mr,null),S(this,wa,null),c(this,je,io).endDrawing(t)):null}findNewParent(t,e,n){const s=c(this,Ot).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return c(this,Mr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Mr)&&c(this,je,io).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,Ot).getActive())==null?void 0:t.parent)===this&&(c(this,Ot).commitOrRemove(),c(this,Ot).setActiveEditor(null)),c(this,ba)&&(clearTimeout(c(this,ba)),S(this,ba,null));for(const n of c(this,Ys).values())(e=c(this,bc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Ys).clear(),c(this,Ot).removeLayer(this)}render({viewport:t}){this.viewport=t,Ec(this.div,t);for(const e of c(this,Ot).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,Ot).commitOrRemove(),L(this,je,I0).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ec(this.div,{rotation:n}),e!==n)for(const s of c(this,Ys).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,Ot).viewParameters.realScale}};bc=new WeakMap,Pd=new WeakMap,_o=new WeakMap,Nl=new WeakMap,ba=new WeakMap,Ys=new WeakMap,Ll=new WeakMap,Id=new WeakMap,wc=new WeakMap,Mr=new WeakMap,wa=new WeakMap,ii=new WeakMap,Aa=new WeakMap,Ot=new WeakMap,Rl=new WeakMap,je=new WeakSet,sC=function(t){c(this,Ot).unselectAll();const{target:e}=t;if(e===c(this,ii).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,ii).div.contains(e)){const{isMac:n}=Ci.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,Ot).showAllEditors("highlight",!0,!0),c(this,ii).div.classList.add("free"),this.toggleDrawing(),H0.startHighlighting(this,c(this,Ot).direction==="ltr",{target:c(this,ii).div,x:t.x,y:t.y}),c(this,ii).div.addEventListener("pointerup",()=>{c(this,ii).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Ot)._signal}),t.preventDefault()}},io=function(){return c(_r,Rl).get(c(this,Ot).getMode())},zb=function(t){const e=c(this,je,io);return e?new e.prototype.constructor(t):null},Ub=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+s),f=(o+u)/2-t,g=(l+d)/2-e,[y,m]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:m}},I0=function(){for(const t of c(this,Ys).values())t.isEmpty()&&t.remove()},lt(_r,"_initialized",!1),k(_r,Rl,new Map([_b,Fb,Bb,H0].map(t=>[t._editorType,t])));let Hb=_r;var Dr,Dg,xi,Ac,dy,rC,Co,Gb,oC,Vb;const Jn=class Jn{constructor({pageIndex:t}){k(this,Co);k(this,Dr,null);k(this,Dg,0);k(this,xi,new Map);k(this,Ac,new Map);this.pageIndex=t}setParent(t){if(!c(this,Dr)){S(this,Dr,t);return}if(c(this,Dr)!==t){if(c(this,xi).size>0)for(const e of c(this,xi).values())e.remove(),t.append(e);S(this,Dr,t)}}static get _svgFactory(){return se(this,"_svgFactory",new ww)}draw(t,e=!1,n=!1){const s=wi(this,Dg)._++,o=L(this,Co,Gb).call(this),l=Jn._svgFactory.createElement("defs");o.append(l);const u=Jn._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,Ac).set(s,u);const f=n?L(this,Co,oC).call(this,l,d):null,g=Jn._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),c(this,xi).set(s,o),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=wi(this,Dg)._++,s=L(this,Co,Gb).call(this),o=Jn._svgFactory.createElement("defs");s.append(o);const l=Jn._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Jn._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const m=Jn._svgFactory.createElement("rect");y.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const b=Jn._svgFactory.createElement("use");y.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=Jn._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return s.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(s,t),c(this,xi).set(n,s),n}finalizeDraw(t,e){c(this,Ac).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:s,rootClass:o,path:l}=e,u=typeof t=="number"?c(this,xi).get(t):t;if(u){if(n&&L(this,Co,Vb).call(this,u,n),s&&L(d=Jn,dy,rC).call(d,u,s),o){const{classList:f}=u;for(const[g,y]of Object.entries(o))f.toggle(g,y)}if(l){const g=u.firstChild.firstChild;L(this,Co,Vb).call(this,g,l)}}}updateParent(t,e){if(e===this)return;const n=c(this,xi).get(t);n&&(c(e,Dr).append(n),c(this,xi).delete(t),c(e,xi).set(t,n))}remove(t){c(this,Ac).delete(t),c(this,Dr)!==null&&(c(this,xi).get(t).remove(),c(this,xi).delete(t))}destroy(){S(this,Dr,null);for(const t of c(this,xi).values())t.remove();c(this,xi).clear(),c(this,Ac).clear()}};Dr=new WeakMap,Dg=new WeakMap,xi=new WeakMap,Ac=new WeakMap,dy=new WeakSet,rC=function(t,[e,n,s,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*o}%`},Co=new WeakSet,Gb=function(){const t=Jn._svgFactory.create(1,1,!0);return c(this,Dr).append(t),t.setAttribute("aria-hidden",!0),t},oC=function(t,e){const n=Jn._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Jn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),s},Vb=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},k(Jn,dy);let $b=Jn;globalThis.pdfjsTestingUtils={HighlightOutliner:Sb};$t.AbortException;$t.AnnotationEditorLayer;$t.AnnotationEditorParamsType;$t.AnnotationEditorType;$t.AnnotationEditorUIManager;$t.AnnotationLayer;$t.AnnotationMode;$t.ColorPicker;$t.DOMSVGFactory;$t.DrawLayer;$t.FeatureTest;var $R=$t.GlobalWorkerOptions;$t.ImageKind;$t.InvalidPDFException;$t.MissingPDFException;$t.OPS;$t.OutputScale;$t.PDFDataRangeTransport;$t.PDFDateString;$t.PDFWorker;$t.PasswordResponses;$t.PermissionFlag;$t.PixelsPerInch;$t.RenderingCancelledException;$t.TextLayer;$t.TouchManager;$t.UnexpectedResponseException;$t.Util;$t.VerbosityLevel;$t.XfaLayer;$t.build;$t.createValidAbsoluteUrl;$t.fetchData;var GR=$t.getDocument;$t.getFilenameFromUrl;$t.getPdfFilenameFromUrl;$t.getXfaPageViewport;$t.isDataScheme;$t.isPdfFile;$t.noContextMenu;$t.normalizeUnicode;$t.setLayerDimensions;$t.shadow;$t.stopEvent;$t.version;const VR="/pdf_notes/assets/pdf.worker-BgryrOlp.mjs";$R.workerSrc=VR;class WR{constructor(t){lt(this,"previewer");lt(this,"frame");lt(this,"context");lt(this,"pdf");lt(this,"page_num");lt(this,"total_pages");lt(this,"scale");lt(this,"zoomlevels",[.25,.5,.75,1,1.5,2]);lt(this,"mouse_engaged");lt(this,"start_x");lt(this,"start_y");lt(this,"pdf_pos",{start_x:null,start_y:null,x:null,y:null,width:null,height:null});lt(this,"thumb_max",90);this.previewer=t,this.frame=this.previewer.parentNode,this.context=this.previewer.getContext("2d"),this.page_num=1,this.scale=1,this.mouse_engaged=!1,this.start_x=null,this.start_y=null,["mousedown","touchstart"].forEach(e=>this.previewer.addEventListener(e,this.mouse_down.bind(this))),["mouseup","touchend"].forEach(e=>window.addEventListener(e,this.mouse_up.bind(this))),["mousemove","touchmove"].forEach(e=>this.previewer.addEventListener(e,this.mouse_move.bind(this))),window.addEventListener("resize",this.load_pdf_page.bind(this))}async load_new_pdf(t){console.log("load_new_pdf",t),this.file=t,this.page_num=1,this.scale=1;try{this.loadingTask=GR(this.file),await this.load_pdf()}catch(e){console.log(e.message)}}async load_pdf(){try{this.pdf=await this.loadingTask.promise,console.log(this.pdf),this.total_pages=await this.pdf._pdfInfo.numPages,console.log("load_pdf total_pages",this.total_pages),await this.load_pdf_page()}catch(t){console.log(t.message)}}async load_pdf_page(){try{let t=await this.pdf.getPage(this.page_num),e=this.scale;const n=t.getViewport({scale:e});console.log(n),this.previewer.width=n.width,this.previewer.height=n.height,this.pdf_pos.width=n.width,this.pdf_pos.height=n.height;let s=(this.frame.offsetWidth-n.width)/2,o=(this.frame.offsetHeight-n.height)/2;this.pdf_pos.x=s,this.pdf_pos.y=o,console.log(this.pdf_pos),this.position_pdf();const l=[1,0,0,1,0,0],u={canvasContext:this.context,transform:l,viewport:n};t.render(u)}catch(t){console.log(t.message)}}position_pdf(){this.previewer.style.left=`${this.pdf_pos.x}px`,this.previewer.style.top=`${this.pdf_pos.y}px`}next_page(){this.page_num<this.total_pages&&(this.page_num++,this.load_pdf_page())}prev_page(){this.page_num>1&&(this.page_num--,this.load_pdf_page())}jump_to_page(t){t<1?this.page_num=1:t>this.total_pages?this.page_num=this.total_pages:this.page_num=parseInt(t),this.load_pdf_page()}page_zoom_out(){let t=this.zoomlevels.indexOf(this.scale);t>0&&(this.scale=this.zoomlevels[t-1]),this.load_pdf_page()}page_zoom_in(){let t=this.zoomlevels.indexOf(this.scale);t<this.zoomlevels.length-1&&(this.scale=this.zoomlevels[t+1]),this.load_pdf_page()}mouse_down(t){if(t.touches){let e=this.previewer.getBoundingClientRect();this.start_x=t.touches[0].clientX-e.left,this.start_y=t.touches[0].clientY-e.top}else this.start_x=t.offsetX,this.start_y=t.offsetY;this.start_x+=t.target.offsetLeft,this.start_y+=t.target.offsetTop,this.mouse_engaged=!0,console.log("mouse_down",this.start_x,this.start_y,"pdf_pos",this.pdf_pos.x,this.pdf_pos.y),this.pdf_pos.start_x=this.pdf_pos.x,this.pdf_pos.start_y=this.pdf_pos.y}mouse_up(){this.mouse_engaged=!1}mouse_move(t){let e,n;if(t.touches){let u=this.previewer.getBoundingClientRect();e=t.touches[0].clientX-u.left,n=t.touches[0].clientY-u.top}else e=t.offsetX,n=t.offsetY;e+=t.target.offsetLeft,n+=t.target.offsetTop;let s=e-this.start_x,o=n-this.start_y,l=this.pdf_pos;if(this.mouse_engaged){console.log(t.target,e,n,s,o);let u=l.start_x+s,d=l.start_y+o;l.x=this.check_x_bounds(u),l.y=this.check_y_bounds(d),this.position_pdf()}}check_x_bounds(t){let e=this.pdf_pos,n=this.frame.offsetWidth;return e.width<=n?t<0?t=0:t+e.width>n&&(t=n-e.width):t+e.width<n?t=n-e.width:t>0&&(t=0),t}check_y_bounds(t){let e=this.pdf_pos,n=this.frame.offsetHeight;return e.height<=n?t<0?t=0:t+e.height>n&&(t=n-e.height):t+e.height<n?t=n-e.height:t>0&&(t=0),t}export_page(){let t=document.createElement("canvas");return this.previewer.width>this.previewer.height?(t.width=this.thumb_max,t.height=this.thumb_max*(this.previewer.height/this.previewer.width)):(t.height=this.thumb_max,t.width=this.thumb_max*(this.previewer.width/this.previewer.height)),console.log(t.width,t.height),t.getContext("2d").drawImage(this.previewer,0,0,this.previewer.width,this.previewer.height,0,0,t.width,t.height),t.toDataURL("image/jpeg")}}var Ef={},oh={},$m={},NE;function XR(){if(NE)return $m;NE=1,Object.defineProperty($m,"__esModule",{value:!0});var a="html",t="head",e="body",n=/<([a-zA-Z]+[0-9]?)/,s=/<head[^]*>/i,o=/<body[^]*>/i,l=function(E,x){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},u=function(E,x){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},d=typeof window=="object"&&window.DOMParser;if(typeof d=="function"){var f=new d,g="text/html";u=function(E,x){return x&&(E="<".concat(x,">").concat(E,"</").concat(x,">")),f.parseFromString(E,g)},l=u}if(typeof document=="object"&&document.implementation){var y=document.implementation.createHTMLDocument();l=function(E,x){if(x){var N=y.documentElement.querySelector(x);return N&&(N.innerHTML=E),y}return y.documentElement.innerHTML=E,y}}var m=typeof document=="object"&&document.createElement("template"),b;m&&m.content&&(b=function(E){return m.innerHTML=E,m.content.childNodes});function _(E){var x,N,I=E.match(n),B=I&&I[1]?I[1].toLowerCase():"";switch(B){case a:{var j=u(E);if(!s.test(E)){var T=j.querySelector(t);(x=T==null?void 0:T.parentNode)===null||x===void 0||x.removeChild(T)}if(!o.test(E)){var T=j.querySelector(e);(N=T==null?void 0:T.parentNode)===null||N===void 0||N.removeChild(T)}return j.querySelectorAll(a)}case t:case e:{var P=l(E).querySelectorAll(B);return o.test(E)&&s.test(E)?P[0].parentNode.childNodes:P}default:{if(b)return b(E);var T=l(E,e).querySelector(e);return T.childNodes}}}return $m.default=_,$m}var lu={},uu={},h1={},LE;function Ay(){return LE||(LE=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Doctype=a.CDATA=a.Tag=a.Style=a.Script=a.Comment=a.Directive=a.Text=a.Root=a.isTag=a.ElementType=void 0;var t;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(t=a.ElementType||(a.ElementType={}));function e(n){return n.type===t.Tag||n.type===t.Script||n.type===t.Style}a.isTag=e,a.Root=t.Root,a.Text=t.Text,a.Directive=t.Directive,a.Comment=t.Comment,a.Script=t.Script,a.Style=t.Style,a.Tag=t.Tag,a.CDATA=t.CDATA,a.Doctype=t.Doctype}(h1)),h1}var Xt={},RE;function PE(){if(RE)return Xt;RE=1;var a=Xt&&Xt.__extends||function(){var T=function(P,M){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,nt){W.__proto__=nt}||function(W,nt){for(var ht in nt)Object.prototype.hasOwnProperty.call(nt,ht)&&(W[ht]=nt[ht])},T(P,M)};return function(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");T(P,M);function W(){this.constructor=P}P.prototype=M===null?Object.create(M):(W.prototype=M.prototype,new W)}}(),t=Xt&&Xt.__assign||function(){return t=Object.assign||function(T){for(var P,M=1,W=arguments.length;M<W;M++){P=arguments[M];for(var nt in P)Object.prototype.hasOwnProperty.call(P,nt)&&(T[nt]=P[nt])}return T},t.apply(this,arguments)};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.cloneNode=Xt.hasChildren=Xt.isDocument=Xt.isDirective=Xt.isComment=Xt.isText=Xt.isCDATA=Xt.isTag=Xt.Element=Xt.Document=Xt.CDATA=Xt.NodeWithChildren=Xt.ProcessingInstruction=Xt.Comment=Xt.Text=Xt.DataNode=Xt.Node=void 0;var e=Ay(),n=function(){function T(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(T.prototype,"parentNode",{get:function(){return this.parent},set:function(P){this.parent=P},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"previousSibling",{get:function(){return this.prev},set:function(P){this.prev=P},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"nextSibling",{get:function(){return this.next},set:function(P){this.next=P},enumerable:!1,configurable:!0}),T.prototype.cloneNode=function(P){return P===void 0&&(P=!1),B(this,P)},T}();Xt.Node=n;var s=function(T){a(P,T);function P(M){var W=T.call(this)||this;return W.data=M,W}return Object.defineProperty(P.prototype,"nodeValue",{get:function(){return this.data},set:function(M){this.data=M},enumerable:!1,configurable:!0}),P}(n);Xt.DataNode=s;var o=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.Text,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),P}(s);Xt.Text=o;var l=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.Comment,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),P}(s);Xt.Comment=l;var u=function(T){a(P,T);function P(M,W){var nt=T.call(this,W)||this;return nt.name=M,nt.type=e.ElementType.Directive,nt}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),P}(s);Xt.ProcessingInstruction=u;var d=function(T){a(P,T);function P(M){var W=T.call(this)||this;return W.children=M,W}return Object.defineProperty(P.prototype,"firstChild",{get:function(){var M;return(M=this.children[0])!==null&&M!==void 0?M:null},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"childNodes",{get:function(){return this.children},set:function(M){this.children=M},enumerable:!1,configurable:!0}),P}(n);Xt.NodeWithChildren=d;var f=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.CDATA,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),P}(d);Xt.CDATA=f;var g=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.Root,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),P}(d);Xt.Document=g;var y=function(T){a(P,T);function P(M,W,nt,ht){nt===void 0&&(nt=[]),ht===void 0&&(ht=M==="script"?e.ElementType.Script:M==="style"?e.ElementType.Style:e.ElementType.Tag);var O=T.call(this,nt)||this;return O.name=M,O.attribs=W,O.type=ht,O}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"tagName",{get:function(){return this.name},set:function(M){this.name=M},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"attributes",{get:function(){var M=this;return Object.keys(this.attribs).map(function(W){var nt,ht;return{name:W,value:M.attribs[W],namespace:(nt=M["x-attribsNamespace"])===null||nt===void 0?void 0:nt[W],prefix:(ht=M["x-attribsPrefix"])===null||ht===void 0?void 0:ht[W]}})},enumerable:!1,configurable:!0}),P}(d);Xt.Element=y;function m(T){return(0,e.isTag)(T)}Xt.isTag=m;function b(T){return T.type===e.ElementType.CDATA}Xt.isCDATA=b;function _(T){return T.type===e.ElementType.Text}Xt.isText=_;function E(T){return T.type===e.ElementType.Comment}Xt.isComment=E;function x(T){return T.type===e.ElementType.Directive}Xt.isDirective=x;function N(T){return T.type===e.ElementType.Root}Xt.isDocument=N;function I(T){return Object.prototype.hasOwnProperty.call(T,"children")}Xt.hasChildren=I;function B(T,P){P===void 0&&(P=!1);var M;if(_(T))M=new o(T.data);else if(E(T))M=new l(T.data);else if(m(T)){var W=P?j(T.children):[],nt=new y(T.name,t({},T.attribs),W);W.forEach(function(q){return q.parent=nt}),T.namespace!=null&&(nt.namespace=T.namespace),T["x-attribsNamespace"]&&(nt["x-attribsNamespace"]=t({},T["x-attribsNamespace"])),T["x-attribsPrefix"]&&(nt["x-attribsPrefix"]=t({},T["x-attribsPrefix"])),M=nt}else if(b(T)){var W=P?j(T.children):[],ht=new f(W);W.forEach(function(X){return X.parent=ht}),M=ht}else if(N(T)){var W=P?j(T.children):[],O=new g(W);W.forEach(function(X){return X.parent=O}),T["x-mode"]&&(O["x-mode"]=T["x-mode"]),M=O}else if(x(T)){var et=new u(T.name,T.data);T["x-name"]!=null&&(et["x-name"]=T["x-name"],et["x-publicId"]=T["x-publicId"],et["x-systemId"]=T["x-systemId"]),M=et}else throw new Error("Not implemented yet: ".concat(T.type));return M.startIndex=T.startIndex,M.endIndex=T.endIndex,T.sourceCodeLocation!=null&&(M.sourceCodeLocation=T.sourceCodeLocation),M}Xt.cloneNode=B;function j(T){for(var P=T.map(function(W){return B(W,!0)}),M=1;M<P.length;M++)P[M].prev=P[M-1],P[M-1].next=P[M];return P}return Xt}var IE;function YR(){return IE||(IE=1,function(a){var t=uu&&uu.__createBinding||(Object.create?function(u,d,f,g){g===void 0&&(g=f);var y=Object.getOwnPropertyDescriptor(d,f);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(u,g,y)}:function(u,d,f,g){g===void 0&&(g=f),u[g]=d[f]}),e=uu&&uu.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&t(d,u,f)};Object.defineProperty(a,"__esModule",{value:!0}),a.DomHandler=void 0;var n=Ay(),s=PE();e(PE(),a);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function u(d,f,g){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof f=="function"&&(g=f,f=o),typeof d=="object"&&(f=d,d=void 0),this.callback=d??null,this.options=f??o,this.elementCB=g??null}return u.prototype.onparserinit=function(d){this.parser=d},u.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(d){this.handleCallback(d)},u.prototype.onclosetag=function(){this.lastNode=null;var d=this.tagStack.pop();this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(d)},u.prototype.onopentag=function(d,f){var g=this.options.xmlMode?n.ElementType.Tag:void 0,y=new s.Element(d,f,void 0,g);this.addNode(y),this.tagStack.push(y)},u.prototype.ontext=function(d){var f=this.lastNode;if(f&&f.type===n.ElementType.Text)f.data+=d,this.options.withEndIndices&&(f.endIndex=this.parser.endIndex);else{var g=new s.Text(d);this.addNode(g),this.lastNode=g}},u.prototype.oncomment=function(d){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=d;return}var f=new s.Comment(d);this.addNode(f),this.lastNode=f},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var d=new s.Text(""),f=new s.CDATA([d]);this.addNode(f),d.parent=f,this.lastNode=d},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(d,f){var g=new s.ProcessingInstruction(d,f);this.addNode(g)},u.prototype.handleCallback=function(d){if(typeof this.callback=="function")this.callback(d,this.dom);else if(d)throw d},u.prototype.addNode=function(d){var f=this.tagStack[this.tagStack.length-1],g=f.children[f.children.length-1];this.options.withStartIndices&&(d.startIndex=this.parser.startIndex),this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),f.children.push(d),g&&(d.prev=g,g.next=d),d.parent=f,this.lastNode=null},u}();a.DomHandler=l,a.default=l}(uu)),uu}var d1={},OE;function KR(){return OE||(OE=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.CASE_SENSITIVE_TAG_NAMES_MAP=a.CASE_SENSITIVE_TAG_NAMES=void 0,a.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],a.CASE_SENSITIVE_TAG_NAMES_MAP=a.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,e){return t[e.toLowerCase()]=e,t},{})}(d1)),d1}var ME;function QR(){if(ME)return lu;ME=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.formatDOM=lu.formatAttributes=void 0;var a=YR(),t=KR();function e(l){return t.CASE_SENSITIVE_TAG_NAMES_MAP[l]}function n(l){for(var u={},d=0,f=l.length;d<f;d++){var g=l[d];u[g.name]=g.value}return u}lu.formatAttributes=n;function s(l){l=l.toLowerCase();var u=e(l);return u||l}function o(l,u,d){u===void 0&&(u=null);for(var f=[],g,y=0,m=l.length;y<m;y++){var b=l[y];switch(b.nodeType){case 1:{var _=s(b.nodeName);g=new a.Element(_,n(b.attributes)),g.children=o(_==="template"?b.content.childNodes:b.childNodes,g);break}case 3:g=new a.Text(b.nodeValue);break;case 8:g=new a.Comment(b.nodeValue);break;default:continue}var E=f[y-1]||null;E&&(E.next=g),g.parent=u,g.prev=E,g.next=null,f.push(g)}return d&&(g=new a.ProcessingInstruction(d.substring(0,d.indexOf(" ")).toLowerCase(),d),g.next=f[0]||null,g.parent=u,f.unshift(g),f[1]&&(f[1].prev=f[0])),f}return lu.formatDOM=o,lu}var DE;function ZR(){if(DE)return oh;DE=1;var a=oh&&oh.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(oh,"__esModule",{value:!0});var t=a(XR()),e=QR(),n=/<(![a-zA-Z\s]+)>/;function s(o){if(typeof o!="string")throw new TypeError("First argument must be a string");if(!o)return[];var l=o.match(n),u=l?l[1]:void 0;return(0,e.formatDOM)((0,t.default)(o),null,u)}return oh.default=s,oh}var Gm={},Hs={},Sf={},FE;function JR(){if(FE)return Sf;FE=1;var a=0;Sf.SAME=a;var t=1;return Sf.CAMELCASE=t,Sf.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1},Sf}var BE;function tP(){if(BE)return Hs;BE=1;const a=0,t=1,e=2,n=3,s=4,o=5,l=6;function u(T){return f.hasOwnProperty(T)?f[T]:null}function d(T,P,M,W,nt,ht,O){this.acceptsBooleans=P===e||P===n||P===s,this.attributeName=W,this.attributeNamespace=nt,this.mustUseProperty=M,this.propertyName=T,this.type=P,this.sanitizeURL=ht,this.removeEmptyString=O}const f={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(T=>{f[T]=new d(T,a,!1,T,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([T,P])=>{f[T]=new d(T,t,!1,P,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(T=>{f[T]=new d(T,e,!1,T.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(T=>{f[T]=new d(T,e,!1,T,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(T=>{f[T]=new d(T,n,!1,T.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(T=>{f[T]=new d(T,n,!0,T,null,!1,!1)}),["capture","download"].forEach(T=>{f[T]=new d(T,s,!1,T,null,!1,!1)}),["cols","rows","size","span"].forEach(T=>{f[T]=new d(T,l,!1,T,null,!1,!1)}),["rowSpan","start"].forEach(T=>{f[T]=new d(T,o,!1,T.toLowerCase(),null,!1,!1)});const y=/[\-\:]([a-z])/g,m=T=>T[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(T=>{const P=T.replace(y,m);f[P]=new d(P,t,!1,T,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(T=>{const P=T.replace(y,m);f[P]=new d(P,t,!1,T,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(T=>{const P=T.replace(y,m);f[P]=new d(P,t,!1,T,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(T=>{f[T]=new d(T,t,!1,T.toLowerCase(),null,!1,!1)});const b="xlinkHref";f[b]=new d("xlinkHref",t,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(T=>{f[T]=new d(T,t,!1,T.toLowerCase(),null,!0,!0)});const{CAMELCASE:_,SAME:E,possibleStandardNames:x}=JR(),I=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD"+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",B=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+I+"]*$")),j=Object.keys(x).reduce((T,P)=>{const M=x[P];return M===E?T[P]=P:M===_?T[P.toLowerCase()]=P:T[P]=M,T},{});return Hs.BOOLEAN=n,Hs.BOOLEANISH_STRING=e,Hs.NUMERIC=o,Hs.OVERLOADED_BOOLEAN=s,Hs.POSITIVE_NUMERIC=l,Hs.RESERVED=a,Hs.STRING=t,Hs.getPropertyInfo=u,Hs.isCustomAttribute=B,Hs.possibleStandardNames=j,Hs}var Tf={},ah={},f1,jE;function eP(){if(jE)return f1;jE=1;var a=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,e=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,f="/",g="*",y="",m="comment",b="declaration";f1=function(E,x){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];x=x||{};var N=1,I=1;function B(q){var X=q.match(t);X&&(N+=X.length);var rt=q.lastIndexOf(d);I=~rt?q.length-rt:I+q.length}function j(){var q={line:N,column:I};return function(X){return X.position=new T(q),W(),X}}function T(q){this.start=q,this.end={line:N,column:I},this.source=x.source}T.prototype.content=E;function P(q){var X=new Error(x.source+":"+N+":"+I+": "+q);if(X.reason=q,X.filename=x.source,X.line=N,X.column=I,X.source=E,!x.silent)throw X}function M(q){var X=q.exec(E);if(X){var rt=X[0];return B(rt),E=E.slice(rt.length),X}}function W(){M(e)}function nt(q){var X;for(q=q||[];X=ht();)X!==!1&&q.push(X);return q}function ht(){var q=j();if(!(f!=E.charAt(0)||g!=E.charAt(1))){for(var X=2;y!=E.charAt(X)&&(g!=E.charAt(X)||f!=E.charAt(X+1));)++X;if(X+=2,y===E.charAt(X-1))return P("End of comment missing");var rt=E.slice(2,X-2);return I+=2,B(rt),E=E.slice(X),I+=2,q({type:m,comment:rt})}}function O(){var q=j(),X=M(n);if(X){if(ht(),!M(s))return P("property missing ':'");var rt=M(o),V=q({type:b,property:_(X[0].replace(a,y)),value:rt?_(rt[0].replace(a,y)):y});return M(l),V}}function et(){var q=[];nt(q);for(var X;X=O();)X!==!1&&(q.push(X),nt(q));return q}return W(),et()};function _(E){return E?E.replace(u,y):y}return f1}var qE;function nP(){if(qE)return ah;qE=1;var a=ah&&ah.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ah,"__esModule",{value:!0});var t=a(eP());function e(n,s){var o=null;if(!n||typeof n!="string")return o;var l=(0,t.default)(n),u=typeof s=="function";return l.forEach(function(d){if(d.type==="declaration"){var f=d.property,g=d.value;u?s(f,g,d):g&&(o=o||{},o[f]=g)}}),o}return ah.default=e,ah}var xf={},HE;function iP(){if(HE)return xf;HE=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.camelCase=void 0;var a=/^--[a-zA-Z0-9-]+$/,t=/-([a-z])/g,e=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(f){return!f||e.test(f)||a.test(f)},l=function(f,g){return g.toUpperCase()},u=function(f,g){return"".concat(g,"-")},d=function(f,g){return g===void 0&&(g={}),o(f)?f:(f=f.toLowerCase(),g.reactCompat?f=f.replace(s,u):f=f.replace(n,u),f.replace(t,l))};return xf.camelCase=d,xf}var Cf,zE;function sP(){if(zE)return Cf;zE=1;var a=Cf&&Cf.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=a(nP()),e=iP();function n(s,o){var l={};return!s||typeof s!="string"||(0,t.default)(s,function(u,d){u&&d&&(l[(0,e.camelCase)(u,o)]=d)}),l}return n.default=n,Cf=n,Cf}var UE;function aC(){return UE||(UE=1,function(a){var t=Tf&&Tf.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.returnFirstArg=a.canTextBeChildOfNode=a.ELEMENTS_WITH_NO_TEXT_CHILDREN=a.PRESERVE_CUSTOM_ATTRIBUTES=a.setStyleProp=a.isCustomComponent=void 0;var e=Bg(),n=t(sP()),s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(g,y){return g.includes("-")?!s.has(g):!!(y&&typeof y.is=="string")}a.isCustomComponent=o;var l={reactCompat:!0};function u(g,y){if(typeof g=="string"){if(!g.trim()){y.style={};return}try{y.style=(0,n.default)(g,l)}catch{y.style={}}}}a.setStyleProp=u,a.PRESERVE_CUSTOM_ATTRIBUTES=Number(e.version.split(".")[0])>=16,a.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var d=function(g){return!a.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(g.name)};a.canTextBeChildOfNode=d;var f=function(g){return g};a.returnFirstArg=f}(Tf)),Tf}var $E;function lC(){if($E)return Gm;$E=1,Object.defineProperty(Gm,"__esModule",{value:!0});var a=tP(),t=aC(),e=["checked","value"],n=["input","select","textarea"],s={reset:!0,submit:!0};function o(u,d){u===void 0&&(u={});var f={},g=!!(u.type&&s[u.type]);for(var y in u){var m=u[y];if((0,a.isCustomAttribute)(y)){f[y]=m;continue}var b=y.toLowerCase(),_=l(b);if(_){var E=(0,a.getPropertyInfo)(_);switch(e.includes(_)&&n.includes(d)&&!g&&(_=l("default"+b)),f[_]=m,E&&E.type){case a.BOOLEAN:f[_]=!0;break;case a.OVERLOADED_BOOLEAN:m===""&&(f[_]=!0);break}continue}t.PRESERVE_CUSTOM_ATTRIBUTES&&(f[y]=m)}return(0,t.setStyleProp)(u.style,f),f}Gm.default=o;function l(u){return a.possibleStandardNames[u]}return Gm}var lh={},GE;function rP(){if(GE)return lh;GE=1;var a=lh&&lh.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(lh,"__esModule",{value:!0});var t=Bg(),e=a(lC()),n=aC(),s={cloneElement:t.cloneElement,createElement:t.createElement,isValidElement:t.isValidElement};function o(u,d){d===void 0&&(d={});for(var f=[],g=typeof d.replace=="function",y=d.transform||n.returnFirstArg,m=d.library||s,b=m.cloneElement,_=m.createElement,E=m.isValidElement,x=u.length,N=0;N<x;N++){var I=u[N];if(g){var B=d.replace(I,N);if(E(B)){x>1&&(B=b(B,{key:B.key||N})),f.push(y(B,I,N));continue}}if(I.type==="text"){var j=!I.data.trim().length;if(j&&I.parent&&!(0,n.canTextBeChildOfNode)(I.parent)||d.trim&&j)continue;f.push(y(I.data,I,N));continue}var T=I,P={};l(T)?((0,n.setStyleProp)(T.attribs.style,T.attribs),P=T.attribs):T.attribs&&(P=(0,e.default)(T.attribs,T.name));var M=void 0;switch(I.type){case"script":case"style":I.children[0]&&(P.dangerouslySetInnerHTML={__html:I.children[0].data});break;case"tag":I.name==="textarea"&&I.children[0]?P.defaultValue=I.children[0].data:I.children&&I.children.length&&(M=o(I.children,d));break;default:continue}x>1&&(P.key=N),f.push(y(_(I.name,P,M),I,N))}return f.length===1?f[0]:f}lh.default=o;function l(u){return n.PRESERVE_CUSTOM_ATTRIBUTES&&u.type==="tag"&&(0,n.isCustomComponent)(u.name,u.attribs)}return lh}var cu={},Yt={},VE;function WE(){if(VE)return Yt;VE=1;var a=Yt&&Yt.__extends||function(){var T=function(P,M){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,nt){W.__proto__=nt}||function(W,nt){for(var ht in nt)Object.prototype.hasOwnProperty.call(nt,ht)&&(W[ht]=nt[ht])},T(P,M)};return function(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");T(P,M);function W(){this.constructor=P}P.prototype=M===null?Object.create(M):(W.prototype=M.prototype,new W)}}(),t=Yt&&Yt.__assign||function(){return t=Object.assign||function(T){for(var P,M=1,W=arguments.length;M<W;M++){P=arguments[M];for(var nt in P)Object.prototype.hasOwnProperty.call(P,nt)&&(T[nt]=P[nt])}return T},t.apply(this,arguments)};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.cloneNode=Yt.hasChildren=Yt.isDocument=Yt.isDirective=Yt.isComment=Yt.isText=Yt.isCDATA=Yt.isTag=Yt.Element=Yt.Document=Yt.CDATA=Yt.NodeWithChildren=Yt.ProcessingInstruction=Yt.Comment=Yt.Text=Yt.DataNode=Yt.Node=void 0;var e=Ay(),n=function(){function T(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(T.prototype,"parentNode",{get:function(){return this.parent},set:function(P){this.parent=P},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"previousSibling",{get:function(){return this.prev},set:function(P){this.prev=P},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"nextSibling",{get:function(){return this.next},set:function(P){this.next=P},enumerable:!1,configurable:!0}),T.prototype.cloneNode=function(P){return P===void 0&&(P=!1),B(this,P)},T}();Yt.Node=n;var s=function(T){a(P,T);function P(M){var W=T.call(this)||this;return W.data=M,W}return Object.defineProperty(P.prototype,"nodeValue",{get:function(){return this.data},set:function(M){this.data=M},enumerable:!1,configurable:!0}),P}(n);Yt.DataNode=s;var o=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.Text,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),P}(s);Yt.Text=o;var l=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.Comment,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),P}(s);Yt.Comment=l;var u=function(T){a(P,T);function P(M,W){var nt=T.call(this,W)||this;return nt.name=M,nt.type=e.ElementType.Directive,nt}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),P}(s);Yt.ProcessingInstruction=u;var d=function(T){a(P,T);function P(M){var W=T.call(this)||this;return W.children=M,W}return Object.defineProperty(P.prototype,"firstChild",{get:function(){var M;return(M=this.children[0])!==null&&M!==void 0?M:null},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"childNodes",{get:function(){return this.children},set:function(M){this.children=M},enumerable:!1,configurable:!0}),P}(n);Yt.NodeWithChildren=d;var f=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.CDATA,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),P}(d);Yt.CDATA=f;var g=function(T){a(P,T);function P(){var M=T!==null&&T.apply(this,arguments)||this;return M.type=e.ElementType.Root,M}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),P}(d);Yt.Document=g;var y=function(T){a(P,T);function P(M,W,nt,ht){nt===void 0&&(nt=[]),ht===void 0&&(ht=M==="script"?e.ElementType.Script:M==="style"?e.ElementType.Style:e.ElementType.Tag);var O=T.call(this,nt)||this;return O.name=M,O.attribs=W,O.type=ht,O}return Object.defineProperty(P.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"tagName",{get:function(){return this.name},set:function(M){this.name=M},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"attributes",{get:function(){var M=this;return Object.keys(this.attribs).map(function(W){var nt,ht;return{name:W,value:M.attribs[W],namespace:(nt=M["x-attribsNamespace"])===null||nt===void 0?void 0:nt[W],prefix:(ht=M["x-attribsPrefix"])===null||ht===void 0?void 0:ht[W]}})},enumerable:!1,configurable:!0}),P}(d);Yt.Element=y;function m(T){return(0,e.isTag)(T)}Yt.isTag=m;function b(T){return T.type===e.ElementType.CDATA}Yt.isCDATA=b;function _(T){return T.type===e.ElementType.Text}Yt.isText=_;function E(T){return T.type===e.ElementType.Comment}Yt.isComment=E;function x(T){return T.type===e.ElementType.Directive}Yt.isDirective=x;function N(T){return T.type===e.ElementType.Root}Yt.isDocument=N;function I(T){return Object.prototype.hasOwnProperty.call(T,"children")}Yt.hasChildren=I;function B(T,P){P===void 0&&(P=!1);var M;if(_(T))M=new o(T.data);else if(E(T))M=new l(T.data);else if(m(T)){var W=P?j(T.children):[],nt=new y(T.name,t({},T.attribs),W);W.forEach(function(q){return q.parent=nt}),T.namespace!=null&&(nt.namespace=T.namespace),T["x-attribsNamespace"]&&(nt["x-attribsNamespace"]=t({},T["x-attribsNamespace"])),T["x-attribsPrefix"]&&(nt["x-attribsPrefix"]=t({},T["x-attribsPrefix"])),M=nt}else if(b(T)){var W=P?j(T.children):[],ht=new f(W);W.forEach(function(X){return X.parent=ht}),M=ht}else if(N(T)){var W=P?j(T.children):[],O=new g(W);W.forEach(function(X){return X.parent=O}),T["x-mode"]&&(O["x-mode"]=T["x-mode"]),M=O}else if(x(T)){var et=new u(T.name,T.data);T["x-name"]!=null&&(et["x-name"]=T["x-name"],et["x-publicId"]=T["x-publicId"],et["x-systemId"]=T["x-systemId"]),M=et}else throw new Error("Not implemented yet: ".concat(T.type));return M.startIndex=T.startIndex,M.endIndex=T.endIndex,T.sourceCodeLocation!=null&&(M.sourceCodeLocation=T.sourceCodeLocation),M}Yt.cloneNode=B;function j(T){for(var P=T.map(function(W){return B(W,!0)}),M=1;M<P.length;M++)P[M].prev=P[M-1],P[M-1].next=P[M];return P}return Yt}var XE;function oP(){return XE||(XE=1,function(a){var t=cu&&cu.__createBinding||(Object.create?function(u,d,f,g){g===void 0&&(g=f);var y=Object.getOwnPropertyDescriptor(d,f);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(u,g,y)}:function(u,d,f,g){g===void 0&&(g=f),u[g]=d[f]}),e=cu&&cu.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&t(d,u,f)};Object.defineProperty(a,"__esModule",{value:!0}),a.DomHandler=void 0;var n=Ay(),s=WE();e(WE(),a);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function u(d,f,g){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof f=="function"&&(g=f,f=o),typeof d=="object"&&(f=d,d=void 0),this.callback=d??null,this.options=f??o,this.elementCB=g??null}return u.prototype.onparserinit=function(d){this.parser=d},u.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(d){this.handleCallback(d)},u.prototype.onclosetag=function(){this.lastNode=null;var d=this.tagStack.pop();this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(d)},u.prototype.onopentag=function(d,f){var g=this.options.xmlMode?n.ElementType.Tag:void 0,y=new s.Element(d,f,void 0,g);this.addNode(y),this.tagStack.push(y)},u.prototype.ontext=function(d){var f=this.lastNode;if(f&&f.type===n.ElementType.Text)f.data+=d,this.options.withEndIndices&&(f.endIndex=this.parser.endIndex);else{var g=new s.Text(d);this.addNode(g),this.lastNode=g}},u.prototype.oncomment=function(d){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=d;return}var f=new s.Comment(d);this.addNode(f),this.lastNode=f},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var d=new s.Text(""),f=new s.CDATA([d]);this.addNode(f),d.parent=f,this.lastNode=d},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(d,f){var g=new s.ProcessingInstruction(d,f);this.addNode(g)},u.prototype.handleCallback=function(d){if(typeof this.callback=="function")this.callback(d,this.dom);else if(d)throw d},u.prototype.addNode=function(d){var f=this.tagStack[this.tagStack.length-1],g=f.children[f.children.length-1];this.options.withStartIndices&&(d.startIndex=this.parser.startIndex),this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),f.children.push(d),g&&(d.prev=g,g.next=d),d.parent=f,this.lastNode=null},u}();a.DomHandler=l,a.default=l}(cu)),cu}var YE;function aP(){return YE||(YE=1,function(a){var t=Ef&&Ef.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(a,"__esModule",{value:!0}),a.htmlToDOM=a.domToReact=a.attributesToProps=a.Text=a.ProcessingInstruction=a.Element=a.Comment=void 0;var e=t(ZR());a.htmlToDOM=e.default;var n=t(lC());a.attributesToProps=n.default;var s=t(rP());a.domToReact=s.default;var o=oP();Object.defineProperty(a,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(a,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(a,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(a,"Text",{enumerable:!0,get:function(){return o.Text}});var l={lowerCaseAttributeNames:!1};function u(d,f){if(typeof d!="string")throw new TypeError("First argument must be a string");return d?(0,s.default)((0,e.default)(d,(f==null?void 0:f.htmlparser2)||l),f):[]}a.default=u}(Ef)),Ef}var lP=aP();const KE=Fg(lP),uP=KE.default||KE;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:uC,setPrototypeOf:QE,isFrozen:cP,getPrototypeOf:hP,getOwnPropertyDescriptor:dP}=Object;let{freeze:Li,seal:er,create:cC}=Object,{apply:Wb,construct:Xb}=typeof Reflect<"u"&&Reflect;Li||(Li=function(t){return t});er||(er=function(t){return t});Wb||(Wb=function(t,e,n){return t.apply(e,n)});Xb||(Xb=function(t,e){return new t(...e)});const Vm=Es(Array.prototype.forEach),ZE=Es(Array.prototype.pop),kf=Es(Array.prototype.push),O0=Es(String.prototype.toLowerCase),p1=Es(String.prototype.toString),JE=Es(String.prototype.match),Nf=Es(String.prototype.replace),fP=Es(String.prototype.indexOf),pP=Es(String.prototype.trim),Ar=Es(Object.prototype.hasOwnProperty),Ai=Es(RegExp.prototype.test),Lf=gP(TypeError);function Es(a){return function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];return Wb(a,t,n)}}function gP(a){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xb(a,e)}}function oe(a,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O0;QE&&QE(a,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const o=e(s);o!==s&&(cP(t)||(t[n]=o),s=o)}a[s]=!0}return a}function mP(a){for(let t=0;t<a.length;t++)Ar(a,t)||(a[t]=null);return a}function pu(a){const t=cC(null);for(const[e,n]of uC(a))Ar(a,e)&&(Array.isArray(n)?t[e]=mP(n):n&&typeof n=="object"&&n.constructor===Object?t[e]=pu(n):t[e]=n);return t}function Rf(a,t){for(;a!==null;){const n=dP(a,t);if(n){if(n.get)return Es(n.get);if(typeof n.value=="function")return Es(n.value)}a=hP(a)}function e(){return null}return e}const tS=Li(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),g1=Li(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),m1=Li(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yP=Li(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),y1=Li(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vP=Li(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),eS=Li(["#text"]),nS=Li(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),v1=Li(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),iS=Li(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Wm=Li(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bP=er(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wP=er(/<%[\w\W]*|[\w\W]*%>/gm),AP=er(/\${[\w\W]*}/gm),_P=er(/^data-[\-\w.\u00B7-\uFFFF]/),EP=er(/^aria-[\-\w]+$/),hC=er(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),SP=er(/^(?:\w+script|data):/i),TP=er(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dC=er(/^html$/i),xP=er(/^[a-z][.\w]*(-[.\w]+)+$/i);var sS=Object.freeze({__proto__:null,MUSTACHE_EXPR:bP,ERB_EXPR:wP,TMPLIT_EXPR:AP,DATA_ATTR:_P,ARIA_ATTR:EP,IS_ALLOWED_URI:hC,IS_SCRIPT_OR_DATA:SP,ATTR_WHITESPACE:TP,DOCTYPE_NAME:dC,CUSTOM_ELEMENT:xP});const Pf={element:1,text:3,progressingInstruction:7,comment:8,document:9},CP=function(){return typeof window>"u"?null:window},kP=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(n=e.getAttribute(s));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function fC(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CP();const t=kt=>fC(kt);if(t.version="3.1.6",t.removed=[],!a||!a.document||a.document.nodeType!==Pf.document)return t.isSupported=!1,t;let{document:e}=a;const n=e,s=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:l,Node:u,Element:d,NodeFilter:f,NamedNodeMap:g=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:y,DOMParser:m,trustedTypes:b}=a,_=d.prototype,E=Rf(_,"cloneNode"),x=Rf(_,"remove"),N=Rf(_,"nextSibling"),I=Rf(_,"childNodes"),B=Rf(_,"parentNode");if(typeof l=="function"){const kt=e.createElement("template");kt.content&&kt.content.ownerDocument&&(e=kt.content.ownerDocument)}let j,T="";const{implementation:P,createNodeIterator:M,createDocumentFragment:W,getElementsByTagName:nt}=e,{importNode:ht}=n;let O={};t.isSupported=typeof uC=="function"&&typeof B=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:et,ERB_EXPR:q,TMPLIT_EXPR:X,DATA_ATTR:rt,ARIA_ATTR:V,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:Z,CUSTOM_ELEMENT:ot}=sS;let{IS_ALLOWED_URI:J}=sS,D=null;const U=oe({},[...tS,...g1,...m1,...y1,...eS]);let st=null;const gt=oe({},[...nS,...v1,...iS,...Wm]);let at=Object.seal(cC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,yt=null,bt=!0,Nt=!0,Ht=!1,te=!0,Jt=!1,re=!0,pe=!1,qe=!1,Ss=!1,ai=!1,ir=!1,Ts=!1,li=!0,ui=!1;const Ur="user-content-";let sr=!0,dn=!1,Un={},Qi=null;const Ri=oe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Pi=null;const rr=oe({},["audio","video","img","source","image","track"]);let Ve=null;const Zi=oe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),or="http://www.w3.org/1998/Math/MathML",ar="http://www.w3.org/2000/svg",wn="http://www.w3.org/1999/xhtml";let ci=wn,xs=!1,Ii=null;const Ji=oe({},[or,ar,wn],p1);let Ze=null;const Cs=["application/xhtml+xml","text/html"],Oi="text/html";let he=null,hi=null;const ks=e.createElement("form"),lr=function($){return $ instanceof RegExp||$ instanceof Function},Ns=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(hi&&hi===$)){if((!$||typeof $!="object")&&($={}),$=pu($),Ze=Cs.indexOf($.PARSER_MEDIA_TYPE)===-1?Oi:$.PARSER_MEDIA_TYPE,he=Ze==="application/xhtml+xml"?p1:O0,D=Ar($,"ALLOWED_TAGS")?oe({},$.ALLOWED_TAGS,he):U,st=Ar($,"ALLOWED_ATTR")?oe({},$.ALLOWED_ATTR,he):gt,Ii=Ar($,"ALLOWED_NAMESPACES")?oe({},$.ALLOWED_NAMESPACES,p1):Ji,Ve=Ar($,"ADD_URI_SAFE_ATTR")?oe(pu(Zi),$.ADD_URI_SAFE_ATTR,he):Zi,Pi=Ar($,"ADD_DATA_URI_TAGS")?oe(pu(rr),$.ADD_DATA_URI_TAGS,he):rr,Qi=Ar($,"FORBID_CONTENTS")?oe({},$.FORBID_CONTENTS,he):Ri,vt=Ar($,"FORBID_TAGS")?oe({},$.FORBID_TAGS,he):{},yt=Ar($,"FORBID_ATTR")?oe({},$.FORBID_ATTR,he):{},Un=Ar($,"USE_PROFILES")?$.USE_PROFILES:!1,bt=$.ALLOW_ARIA_ATTR!==!1,Nt=$.ALLOW_DATA_ATTR!==!1,Ht=$.ALLOW_UNKNOWN_PROTOCOLS||!1,te=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jt=$.SAFE_FOR_TEMPLATES||!1,re=$.SAFE_FOR_XML!==!1,pe=$.WHOLE_DOCUMENT||!1,ai=$.RETURN_DOM||!1,ir=$.RETURN_DOM_FRAGMENT||!1,Ts=$.RETURN_TRUSTED_TYPE||!1,Ss=$.FORCE_BODY||!1,li=$.SANITIZE_DOM!==!1,ui=$.SANITIZE_NAMED_PROPS||!1,sr=$.KEEP_CONTENT!==!1,dn=$.IN_PLACE||!1,J=$.ALLOWED_URI_REGEXP||hC,ci=$.NAMESPACE||wn,at=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&lr($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(at.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&lr($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(at.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(at.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jt&&(Nt=!1),ir&&(ai=!0),Un&&(D=oe({},eS),st=[],Un.html===!0&&(oe(D,tS),oe(st,nS)),Un.svg===!0&&(oe(D,g1),oe(st,v1),oe(st,Wm)),Un.svgFilters===!0&&(oe(D,m1),oe(st,v1),oe(st,Wm)),Un.mathMl===!0&&(oe(D,y1),oe(st,iS),oe(st,Wm))),$.ADD_TAGS&&(D===U&&(D=pu(D)),oe(D,$.ADD_TAGS,he)),$.ADD_ATTR&&(st===gt&&(st=pu(st)),oe(st,$.ADD_ATTR,he)),$.ADD_URI_SAFE_ATTR&&oe(Ve,$.ADD_URI_SAFE_ATTR,he),$.FORBID_CONTENTS&&(Qi===Ri&&(Qi=pu(Qi)),oe(Qi,$.FORBID_CONTENTS,he)),sr&&(D["#text"]=!0),pe&&oe(D,["html","head","body"]),D.table&&(oe(D,["tbody"]),delete vt.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw Lf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Lf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=$.TRUSTED_TYPES_POLICY,T=j.createHTML("")}else j===void 0&&(j=kP(b,s)),j!==null&&typeof T=="string"&&(T=j.createHTML(""));Li&&Li($),hi=$}},ur=oe({},["mi","mo","mn","ms","mtext"]),di=oe({},["foreignobject","annotation-xml"]),Lo=oe({},["title","style","font","a","script"]),An=oe({},[...g1,...m1,...yP]),$r=oe({},[...y1,...vP]),cr=function($){let ft=B($);(!ft||!ft.tagName)&&(ft={namespaceURI:ci,tagName:"template"});const wt=O0($.tagName),ge=O0(ft.tagName);return Ii[$.namespaceURI]?$.namespaceURI===ar?ft.namespaceURI===wn?wt==="svg":ft.namespaceURI===or?wt==="svg"&&(ge==="annotation-xml"||ur[ge]):!!An[wt]:$.namespaceURI===or?ft.namespaceURI===wn?wt==="math":ft.namespaceURI===ar?wt==="math"&&di[ge]:!!$r[wt]:$.namespaceURI===wn?ft.namespaceURI===ar&&!di[ge]||ft.namespaceURI===or&&!ur[ge]?!1:!$r[wt]&&(Lo[wt]||!An[wt]):!!(Ze==="application/xhtml+xml"&&Ii[$.namespaceURI]):!1},$n=function($){kf(t.removed,{element:$});try{B($).removeChild($)}catch{x($)}},fi=function($,ft){try{kf(t.removed,{attribute:ft.getAttributeNode($),from:ft})}catch{kf(t.removed,{attribute:null,from:ft})}if(ft.removeAttribute($),$==="is"&&!st[$])if(ai||ir)try{$n(ft)}catch{}else try{ft.setAttribute($,"")}catch{}},ts=function($){let ft=null,wt=null;if(Ss)$="<remove></remove>"+$;else{const Gt=JE($,/^[\r\n\t ]+/);wt=Gt&&Gt[0]}Ze==="application/xhtml+xml"&&ci===wn&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const ge=j?j.createHTML($):$;if(ci===wn)try{ft=new m().parseFromString(ge,Ze)}catch{}if(!ft||!ft.documentElement){ft=P.createDocument(ci,"template",null);try{ft.documentElement.innerHTML=xs?T:ge}catch{}}const Xe=ft.body||ft.documentElement;return $&&wt&&Xe.insertBefore(e.createTextNode(wt),Xe.childNodes[0]||null),ci===wn?nt.call(ft,pe?"html":"body")[0]:pe?ft.documentElement:Xe},ke=function($){return M.call($.ownerDocument||$,$,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Gr=function($){return $ instanceof y&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof g)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},Pa=function($){return typeof u=="function"&&$ instanceof u},pi=function($,ft,wt){O[$]&&Vm(O[$],ge=>{ge.call(t,ft,wt,hi)})},Ia=function($){let ft=null;if(pi("beforeSanitizeElements",$,null),Gr($))return $n($),!0;const wt=he($.nodeName);if(pi("uponSanitizeElement",$,{tagName:wt,allowedTags:D}),$.hasChildNodes()&&!Pa($.firstElementChild)&&Ai(/<[/\w]/g,$.innerHTML)&&Ai(/<[/\w]/g,$.textContent)||$.nodeType===Pf.progressingInstruction||re&&$.nodeType===Pf.comment&&Ai(/<[/\w]/g,$.data))return $n($),!0;if(!D[wt]||vt[wt]){if(!vt[wt]&&We(wt)&&(at.tagNameCheck instanceof RegExp&&Ai(at.tagNameCheck,wt)||at.tagNameCheck instanceof Function&&at.tagNameCheck(wt)))return!1;if(sr&&!Qi[wt]){const ge=B($)||$.parentNode,Xe=I($)||$.childNodes;if(Xe&&ge){const Gt=Xe.length;for(let on=Gt-1;on>=0;--on){const _n=E(Xe[on],!0);_n.__removalCount=($.__removalCount||0)+1,ge.insertBefore(_n,N($))}}}return $n($),!0}return $ instanceof d&&!cr($)||(wt==="noscript"||wt==="noembed"||wt==="noframes")&&Ai(/<\/no(script|embed|frames)/i,$.innerHTML)?($n($),!0):(Jt&&$.nodeType===Pf.text&&(ft=$.textContent,Vm([et,q,X],ge=>{ft=Nf(ft,ge," ")}),$.textContent!==ft&&(kf(t.removed,{element:$.cloneNode()}),$.textContent=ft)),pi("afterSanitizeElements",$,null),!1)},Mi=function($,ft,wt){if(li&&(ft==="id"||ft==="name")&&(wt in e||wt in ks))return!1;if(!(Nt&&!yt[ft]&&Ai(rt,ft))){if(!(bt&&Ai(V,ft))){if(!st[ft]||yt[ft]){if(!(We($)&&(at.tagNameCheck instanceof RegExp&&Ai(at.tagNameCheck,$)||at.tagNameCheck instanceof Function&&at.tagNameCheck($))&&(at.attributeNameCheck instanceof RegExp&&Ai(at.attributeNameCheck,ft)||at.attributeNameCheck instanceof Function&&at.attributeNameCheck(ft))||ft==="is"&&at.allowCustomizedBuiltInElements&&(at.tagNameCheck instanceof RegExp&&Ai(at.tagNameCheck,wt)||at.tagNameCheck instanceof Function&&at.tagNameCheck(wt))))return!1}else if(!Ve[ft]){if(!Ai(J,Nf(wt,Z,""))){if(!((ft==="src"||ft==="xlink:href"||ft==="href")&&$!=="script"&&fP(wt,"data:")===0&&Pi[$])){if(!(Ht&&!Ai(K,Nf(wt,Z,"")))){if(wt)return!1}}}}}}return!0},We=function($){return $!=="annotation-xml"&&JE($,ot)},Ro=function($){pi("beforeSanitizeAttributes",$,null);const{attributes:ft}=$;if(!ft)return;const wt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:st};let ge=ft.length;for(;ge--;){const Xe=ft[ge],{name:Gt,namespaceURI:on,value:_n}=Xe,gi=he(Gt);let Ne=Gt==="value"?_n:pP(_n);if(wt.attrName=gi,wt.attrValue=Ne,wt.keepAttr=!0,wt.forceKeepAttr=void 0,pi("uponSanitizeAttribute",$,wt),Ne=wt.attrValue,re&&Ai(/((--!?|])>)|<\/(style|title)/i,Ne)){fi(Gt,$);continue}if(wt.forceKeepAttr||(fi(Gt,$),!wt.keepAttr))continue;if(!te&&Ai(/\/>/i,Ne)){fi(Gt,$);continue}Jt&&Vm([et,q,X],Gn=>{Ne=Nf(Ne,Gn," ")});const hr=he($.nodeName);if(Mi(hr,gi,Ne)){if(ui&&(gi==="id"||gi==="name")&&(fi(Gt,$),Ne=Ur+Ne),j&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!on)switch(b.getAttributeType(hr,gi)){case"TrustedHTML":{Ne=j.createHTML(Ne);break}case"TrustedScriptURL":{Ne=j.createScriptURL(Ne);break}}try{on?$.setAttributeNS(on,Gt,Ne):$.setAttribute(Gt,Ne),Gr($)?$n($):ZE(t.removed)}catch{}}}pi("afterSanitizeAttributes",$,null)},zl=function kt($){let ft=null;const wt=ke($);for(pi("beforeSanitizeShadowDOM",$,null);ft=wt.nextNode();)pi("uponSanitizeShadowNode",ft,null),!Ia(ft)&&(ft.content instanceof o&&kt(ft.content),Ro(ft));pi("afterSanitizeShadowDOM",$,null)};return t.sanitize=function(kt){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=null,wt=null,ge=null,Xe=null;if(xs=!kt,xs&&(kt="<!-->"),typeof kt!="string"&&!Pa(kt))if(typeof kt.toString=="function"){if(kt=kt.toString(),typeof kt!="string")throw Lf("dirty is not a string, aborting")}else throw Lf("toString is not a function");if(!t.isSupported)return kt;if(qe||Ns($),t.removed=[],typeof kt=="string"&&(dn=!1),dn){if(kt.nodeName){const _n=he(kt.nodeName);if(!D[_n]||vt[_n])throw Lf("root node is forbidden and cannot be sanitized in-place")}}else if(kt instanceof u)ft=ts("<!---->"),wt=ft.ownerDocument.importNode(kt,!0),wt.nodeType===Pf.element&&wt.nodeName==="BODY"||wt.nodeName==="HTML"?ft=wt:ft.appendChild(wt);else{if(!ai&&!Jt&&!pe&&kt.indexOf("<")===-1)return j&&Ts?j.createHTML(kt):kt;if(ft=ts(kt),!ft)return ai?null:Ts?T:""}ft&&Ss&&$n(ft.firstChild);const Gt=ke(dn?kt:ft);for(;ge=Gt.nextNode();)Ia(ge)||(ge.content instanceof o&&zl(ge.content),Ro(ge));if(dn)return kt;if(ai){if(ir)for(Xe=W.call(ft.ownerDocument);ft.firstChild;)Xe.appendChild(ft.firstChild);else Xe=ft;return(st.shadowroot||st.shadowrootmode)&&(Xe=ht.call(n,Xe,!0)),Xe}let on=pe?ft.outerHTML:ft.innerHTML;return pe&&D["!doctype"]&&ft.ownerDocument&&ft.ownerDocument.doctype&&ft.ownerDocument.doctype.name&&Ai(dC,ft.ownerDocument.doctype.name)&&(on="<!DOCTYPE "+ft.ownerDocument.doctype.name+`>
`+on),Jt&&Vm([et,q,X],_n=>{on=Nf(on,_n," ")}),j&&Ts?j.createHTML(on):on},t.setConfig=function(){let kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ns(kt),qe=!0},t.clearConfig=function(){hi=null,qe=!1},t.isValidAttribute=function(kt,$,ft){hi||Ns({});const wt=he(kt),ge=he($);return Mi(wt,ge,ft)},t.addHook=function(kt,$){typeof $=="function"&&(O[kt]=O[kt]||[],kf(O[kt],$))},t.removeHook=function(kt){if(O[kt])return ZE(O[kt])},t.removeHooks=function(kt){O[kt]&&(O[kt]=[])},t.removeAllHooks=function(){O={}},t}var NP=fC(),pC=typeof global=="object"&&global&&global.Object===Object&&global,LP=typeof self=="object"&&self&&self.Object===Object&&self,ko=pC||LP||Function("return this")(),Fl=ko.Symbol,gC=Object.prototype,RP=gC.hasOwnProperty,PP=gC.toString,If=Fl?Fl.toStringTag:void 0;function IP(a){var t=RP.call(a,If),e=a[If];try{a[If]=void 0;var n=!0}catch{}var s=PP.call(a);return n&&(t?a[If]=e:delete a[If]),s}var OP=Object.prototype,MP=OP.toString;function DP(a){return MP.call(a)}var FP="[object Null]",BP="[object Undefined]",rS=Fl?Fl.toStringTag:void 0;function Bd(a){return a==null?a===void 0?BP:FP:rS&&rS in Object(a)?IP(a):DP(a)}function Ta(a){return a!=null&&typeof a=="object"}var xc=Array.isArray;function ql(a){var t=typeof a;return a!=null&&(t=="object"||t=="function")}function mC(a){return a}var jP="[object AsyncFunction]",qP="[object Function]",HP="[object GeneratorFunction]",zP="[object Proxy]";function _w(a){if(!ql(a))return!1;var t=Bd(a);return t==qP||t==HP||t==jP||t==zP}var b1=ko["__core-js_shared__"],oS=function(){var a=/[^.]+$/.exec(b1&&b1.keys&&b1.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function UP(a){return!!oS&&oS in a}var $P=Function.prototype,GP=$P.toString;function Rc(a){if(a!=null){try{return GP.call(a)}catch{}try{return a+""}catch{}}return""}var VP=/[\\^$.*+?()[\]{}|]/g,WP=/^\[object .+?Constructor\]$/,XP=Function.prototype,YP=Object.prototype,KP=XP.toString,QP=YP.hasOwnProperty,ZP=RegExp("^"+KP.call(QP).replace(VP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JP(a){if(!ql(a)||UP(a))return!1;var t=_w(a)?ZP:WP;return t.test(Rc(a))}function tI(a,t){return a==null?void 0:a[t]}function Pc(a,t){var e=tI(a,t);return JP(e)?e:void 0}var Yb=Pc(ko,"WeakMap"),aS=Object.create,eI=function(){function a(){}return function(t){if(!ql(t))return{};if(aS)return aS(t);a.prototype=t;var e=new a;return a.prototype=void 0,e}}();function nI(a,t,e){switch(e.length){case 0:return a.call(t);case 1:return a.call(t,e[0]);case 2:return a.call(t,e[0],e[1]);case 3:return a.call(t,e[0],e[1],e[2])}return a.apply(t,e)}function iI(a,t){var e=-1,n=a.length;for(t||(t=Array(n));++e<n;)t[e]=a[e];return t}var sI=800,rI=16,oI=Date.now;function aI(a){var t=0,e=0;return function(){var n=oI(),s=rI-(n-e);if(e=n,s>0){if(++t>=sI)return arguments[0]}else t=0;return a.apply(void 0,arguments)}}function lI(a){return function(){return a}}var U0=function(){try{var a=Pc(Object,"defineProperty");return a({},"",{}),a}catch{}}(),uI=U0?function(a,t){return U0(a,"toString",{configurable:!0,enumerable:!1,value:lI(t),writable:!0})}:mC,cI=aI(uI);function hI(a,t){for(var e=-1,n=a==null?0:a.length;++e<n&&t(a[e],e,a)!==!1;);return a}var dI=9007199254740991,fI=/^(?:0|[1-9]\d*)$/;function yC(a,t){var e=typeof a;return t=t??dI,!!t&&(e=="number"||e!="symbol"&&fI.test(a))&&a>-1&&a%1==0&&a<t}function Ew(a,t,e){t=="__proto__"&&U0?U0(a,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):a[t]=e}function zg(a,t){return a===t||a!==a&&t!==t}var pI=Object.prototype,gI=pI.hasOwnProperty;function vC(a,t,e){var n=a[t];(!(gI.call(a,t)&&zg(n,e))||e===void 0&&!(t in a))&&Ew(a,t,e)}function mI(a,t,e,n){var s=!e;e||(e={});for(var o=-1,l=t.length;++o<l;){var u=t[o],d=void 0;d===void 0&&(d=a[u]),s?Ew(e,u,d):vC(e,u,d)}return e}var lS=Math.max;function yI(a,t,e){return t=lS(t===void 0?a.length-1:t,0),function(){for(var n=arguments,s=-1,o=lS(n.length-t,0),l=Array(o);++s<o;)l[s]=n[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=n[s];return u[t]=e(l),nI(a,this,u)}}function vI(a,t){return cI(yI(a,t,mC),a+"")}var bI=9007199254740991;function bC(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=bI}function _y(a){return a!=null&&bC(a.length)&&!_w(a)}function wI(a,t,e){if(!ql(e))return!1;var n=typeof t;return(n=="number"?_y(e)&&yC(t,e.length):n=="string"&&t in e)?zg(e[t],a):!1}function AI(a){return vI(function(t,e){var n=-1,s=e.length,o=s>1?e[s-1]:void 0,l=s>2?e[2]:void 0;for(o=a.length>3&&typeof o=="function"?(s--,o):void 0,l&&wI(e[0],e[1],l)&&(o=s<3?void 0:o,s=1),t=Object(t);++n<s;){var u=e[n];u&&a(t,u,n,o)}return t})}var _I=Object.prototype;function Sw(a){var t=a&&a.constructor,e=typeof t=="function"&&t.prototype||_I;return a===e}function EI(a,t){for(var e=-1,n=Array(a);++e<a;)n[e]=t(e);return n}var SI="[object Arguments]";function uS(a){return Ta(a)&&Bd(a)==SI}var wC=Object.prototype,TI=wC.hasOwnProperty,xI=wC.propertyIsEnumerable,Kb=uS(function(){return arguments}())?uS:function(a){return Ta(a)&&TI.call(a,"callee")&&!xI.call(a,"callee")};function CI(){return!1}var AC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cS=AC&&typeof module=="object"&&module&&!module.nodeType&&module,kI=cS&&cS.exports===AC,hS=kI?ko.Buffer:void 0,NI=hS?hS.isBuffer:void 0,op=NI||CI,LI="[object Arguments]",RI="[object Array]",PI="[object Boolean]",II="[object Date]",OI="[object Error]",MI="[object Function]",DI="[object Map]",FI="[object Number]",BI="[object Object]",jI="[object RegExp]",qI="[object Set]",HI="[object String]",zI="[object WeakMap]",UI="[object ArrayBuffer]",$I="[object DataView]",GI="[object Float32Array]",VI="[object Float64Array]",WI="[object Int8Array]",XI="[object Int16Array]",YI="[object Int32Array]",KI="[object Uint8Array]",QI="[object Uint8ClampedArray]",ZI="[object Uint16Array]",JI="[object Uint32Array]",Ie={};Ie[GI]=Ie[VI]=Ie[WI]=Ie[XI]=Ie[YI]=Ie[KI]=Ie[QI]=Ie[ZI]=Ie[JI]=!0;Ie[LI]=Ie[RI]=Ie[UI]=Ie[PI]=Ie[$I]=Ie[II]=Ie[OI]=Ie[MI]=Ie[DI]=Ie[FI]=Ie[BI]=Ie[jI]=Ie[qI]=Ie[HI]=Ie[zI]=!1;function tO(a){return Ta(a)&&bC(a.length)&&!!Ie[Bd(a)]}function Tw(a){return function(t){return a(t)}}var _C=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tp=_C&&typeof module=="object"&&module&&!module.nodeType&&module,eO=tp&&tp.exports===_C,w1=eO&&pC.process,Od=function(){try{var a=tp&&tp.require&&tp.require("util").types;return a||w1&&w1.binding&&w1.binding("util")}catch{}}(),dS=Od&&Od.isTypedArray,xw=dS?Tw(dS):tO,nO=Object.prototype,iO=nO.hasOwnProperty;function EC(a,t){var e=xc(a),n=!e&&Kb(a),s=!e&&!n&&op(a),o=!e&&!n&&!s&&xw(a),l=e||n||s||o,u=l?EI(a.length,String):[],d=u.length;for(var f in a)(t||iO.call(a,f))&&!(l&&(f=="length"||s&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||yC(f,d)))&&u.push(f);return u}function SC(a,t){return function(e){return a(t(e))}}var sO=SC(Object.keys,Object),rO=Object.prototype,oO=rO.hasOwnProperty;function aO(a){if(!Sw(a))return sO(a);var t=[];for(var e in Object(a))oO.call(a,e)&&e!="constructor"&&t.push(e);return t}function lO(a){return _y(a)?EC(a):aO(a)}function uO(a){var t=[];if(a!=null)for(var e in Object(a))t.push(e);return t}var cO=Object.prototype,hO=cO.hasOwnProperty;function dO(a){if(!ql(a))return uO(a);var t=Sw(a),e=[];for(var n in a)n=="constructor"&&(t||!hO.call(a,n))||e.push(n);return e}function TC(a){return _y(a)?EC(a,!0):dO(a)}var ap=Pc(Object,"create");function fO(){this.__data__=ap?ap(null):{},this.size=0}function pO(a){var t=this.has(a)&&delete this.__data__[a];return this.size-=t?1:0,t}var gO="__lodash_hash_undefined__",mO=Object.prototype,yO=mO.hasOwnProperty;function vO(a){var t=this.__data__;if(ap){var e=t[a];return e===gO?void 0:e}return yO.call(t,a)?t[a]:void 0}var bO=Object.prototype,wO=bO.hasOwnProperty;function AO(a){var t=this.__data__;return ap?t[a]!==void 0:wO.call(t,a)}var _O="__lodash_hash_undefined__";function EO(a,t){var e=this.__data__;return this.size+=this.has(a)?0:1,e[a]=ap&&t===void 0?_O:t,this}function Cc(a){var t=-1,e=a==null?0:a.length;for(this.clear();++t<e;){var n=a[t];this.set(n[0],n[1])}}Cc.prototype.clear=fO;Cc.prototype.delete=pO;Cc.prototype.get=vO;Cc.prototype.has=AO;Cc.prototype.set=EO;function SO(){this.__data__=[],this.size=0}function Ey(a,t){for(var e=a.length;e--;)if(zg(a[e][0],t))return e;return-1}var TO=Array.prototype,xO=TO.splice;function CO(a){var t=this.__data__,e=Ey(t,a);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():xO.call(t,e,1),--this.size,!0}function kO(a){var t=this.__data__,e=Ey(t,a);return e<0?void 0:t[e][1]}function NO(a){return Ey(this.__data__,a)>-1}function LO(a,t){var e=this.__data__,n=Ey(e,a);return n<0?(++this.size,e.push([a,t])):e[n][1]=t,this}function ka(a){var t=-1,e=a==null?0:a.length;for(this.clear();++t<e;){var n=a[t];this.set(n[0],n[1])}}ka.prototype.clear=SO;ka.prototype.delete=CO;ka.prototype.get=kO;ka.prototype.has=NO;ka.prototype.set=LO;var lp=Pc(ko,"Map");function RO(){this.size=0,this.__data__={hash:new Cc,map:new(lp||ka),string:new Cc}}function PO(a){var t=typeof a;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?a!=="__proto__":a===null}function Sy(a,t){var e=a.__data__;return PO(t)?e[typeof t=="string"?"string":"hash"]:e.map}function IO(a){var t=Sy(this,a).delete(a);return this.size-=t?1:0,t}function OO(a){return Sy(this,a).get(a)}function MO(a){return Sy(this,a).has(a)}function DO(a,t){var e=Sy(this,a),n=e.size;return e.set(a,t),this.size+=e.size==n?0:1,this}function Ic(a){var t=-1,e=a==null?0:a.length;for(this.clear();++t<e;){var n=a[t];this.set(n[0],n[1])}}Ic.prototype.clear=RO;Ic.prototype.delete=IO;Ic.prototype.get=OO;Ic.prototype.has=MO;Ic.prototype.set=DO;function FO(a,t){for(var e=-1,n=t.length,s=a.length;++e<n;)a[s+e]=t[e];return a}var xC=SC(Object.getPrototypeOf,Object),BO="[object Object]",jO=Function.prototype,qO=Object.prototype,CC=jO.toString,HO=qO.hasOwnProperty,zO=CC.call(Object);function UO(a){if(!Ta(a)||Bd(a)!=BO)return!1;var t=xC(a);if(t===null)return!0;var e=HO.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&CC.call(e)==zO}function $O(){this.__data__=new ka,this.size=0}function GO(a){var t=this.__data__,e=t.delete(a);return this.size=t.size,e}function VO(a){return this.__data__.get(a)}function WO(a){return this.__data__.has(a)}var XO=200;function YO(a,t){var e=this.__data__;if(e instanceof ka){var n=e.__data__;if(!lp||n.length<XO-1)return n.push([a,t]),this.size=++e.size,this;e=this.__data__=new Ic(n)}return e.set(a,t),this.size=e.size,this}function Eo(a){var t=this.__data__=new ka(a);this.size=t.size}Eo.prototype.clear=$O;Eo.prototype.delete=GO;Eo.prototype.get=VO;Eo.prototype.has=WO;Eo.prototype.set=YO;var kC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fS=kC&&typeof module=="object"&&module&&!module.nodeType&&module,KO=fS&&fS.exports===kC,pS=KO?ko.Buffer:void 0,gS=pS?pS.allocUnsafe:void 0;function NC(a,t){if(t)return a.slice();var e=a.length,n=gS?gS(e):new a.constructor(e);return a.copy(n),n}function QO(a,t){for(var e=-1,n=a==null?0:a.length,s=0,o=[];++e<n;){var l=a[e];t(l,e,a)&&(o[s++]=l)}return o}function ZO(){return[]}var JO=Object.prototype,tM=JO.propertyIsEnumerable,mS=Object.getOwnPropertySymbols,eM=mS?function(a){return a==null?[]:(a=Object(a),QO(mS(a),function(t){return tM.call(a,t)}))}:ZO;function nM(a,t,e){var n=t(a);return xc(a)?n:FO(n,e(a))}function Qb(a){return nM(a,lO,eM)}var Zb=Pc(ko,"DataView"),Jb=Pc(ko,"Promise"),tw=Pc(ko,"Set"),yS="[object Map]",iM="[object Object]",vS="[object Promise]",bS="[object Set]",wS="[object WeakMap]",AS="[object DataView]",sM=Rc(Zb),rM=Rc(lp),oM=Rc(Jb),aM=Rc(tw),lM=Rc(Yb),Fr=Bd;(Zb&&Fr(new Zb(new ArrayBuffer(1)))!=AS||lp&&Fr(new lp)!=yS||Jb&&Fr(Jb.resolve())!=vS||tw&&Fr(new tw)!=bS||Yb&&Fr(new Yb)!=wS)&&(Fr=function(a){var t=Bd(a),e=t==iM?a.constructor:void 0,n=e?Rc(e):"";if(n)switch(n){case sM:return AS;case rM:return yS;case oM:return vS;case aM:return bS;case lM:return wS}return t});var uM=Object.prototype,cM=uM.hasOwnProperty;function hM(a){var t=a.length,e=new a.constructor(t);return t&&typeof a[0]=="string"&&cM.call(a,"index")&&(e.index=a.index,e.input=a.input),e}var $0=ko.Uint8Array;function Cw(a){var t=new a.constructor(a.byteLength);return new $0(t).set(new $0(a)),t}function dM(a,t){var e=Cw(a.buffer);return new a.constructor(e,a.byteOffset,a.byteLength)}var fM=/\w*$/;function pM(a){var t=new a.constructor(a.source,fM.exec(a));return t.lastIndex=a.lastIndex,t}var _S=Fl?Fl.prototype:void 0,ES=_S?_S.valueOf:void 0;function gM(a){return ES?Object(ES.call(a)):{}}function LC(a,t){var e=t?Cw(a.buffer):a.buffer;return new a.constructor(e,a.byteOffset,a.length)}var mM="[object Boolean]",yM="[object Date]",vM="[object Map]",bM="[object Number]",wM="[object RegExp]",AM="[object Set]",_M="[object String]",EM="[object Symbol]",SM="[object ArrayBuffer]",TM="[object DataView]",xM="[object Float32Array]",CM="[object Float64Array]",kM="[object Int8Array]",NM="[object Int16Array]",LM="[object Int32Array]",RM="[object Uint8Array]",PM="[object Uint8ClampedArray]",IM="[object Uint16Array]",OM="[object Uint32Array]";function MM(a,t,e){var n=a.constructor;switch(t){case SM:return Cw(a);case mM:case yM:return new n(+a);case TM:return dM(a);case xM:case CM:case kM:case NM:case LM:case RM:case PM:case IM:case OM:return LC(a,e);case vM:return new n;case bM:case _M:return new n(a);case wM:return pM(a);case AM:return new n;case EM:return gM(a)}}function RC(a){return typeof a.constructor=="function"&&!Sw(a)?eI(xC(a)):{}}var DM="[object Map]";function FM(a){return Ta(a)&&Fr(a)==DM}var SS=Od&&Od.isMap,BM=SS?Tw(SS):FM,jM="[object Set]";function qM(a){return Ta(a)&&Fr(a)==jM}var TS=Od&&Od.isSet,HM=TS?Tw(TS):qM,zM=1,PC="[object Arguments]",UM="[object Array]",$M="[object Boolean]",GM="[object Date]",VM="[object Error]",IC="[object Function]",WM="[object GeneratorFunction]",XM="[object Map]",YM="[object Number]",OC="[object Object]",KM="[object RegExp]",QM="[object Set]",ZM="[object String]",JM="[object Symbol]",t2="[object WeakMap]",e2="[object ArrayBuffer]",n2="[object DataView]",i2="[object Float32Array]",s2="[object Float64Array]",r2="[object Int8Array]",o2="[object Int16Array]",a2="[object Int32Array]",l2="[object Uint8Array]",u2="[object Uint8ClampedArray]",c2="[object Uint16Array]",h2="[object Uint32Array]",Ce={};Ce[PC]=Ce[UM]=Ce[e2]=Ce[n2]=Ce[$M]=Ce[GM]=Ce[i2]=Ce[s2]=Ce[r2]=Ce[o2]=Ce[a2]=Ce[XM]=Ce[YM]=Ce[OC]=Ce[KM]=Ce[QM]=Ce[ZM]=Ce[JM]=Ce[l2]=Ce[u2]=Ce[c2]=Ce[h2]=!0;Ce[VM]=Ce[IC]=Ce[t2]=!1;function M0(a,t,e,n,s,o){var l,u=t&zM;if(l!==void 0)return l;if(!ql(a))return a;var d=xc(a);if(d)l=hM(a);else{var f=Fr(a),g=f==IC||f==WM;if(op(a))return NC(a,u);if(f==OC||f==PC||g&&!s)l=g?{}:RC(a);else{if(!Ce[f])return s?a:{};l=MM(a,f,u)}}o||(o=new Eo);var y=o.get(a);if(y)return y;o.set(a,l),HM(a)?a.forEach(function(_){l.add(M0(_,t,e,_,a,o))}):BM(a)&&a.forEach(function(_,E){l.set(E,M0(_,t,e,E,a,o))});var m=Qb,b=d?void 0:m(a);return hI(b||a,function(_,E){b&&(E=_,_=a[E]),vC(l,E,M0(_,t,e,E,a,o))}),l}var d2=1,f2=4;function xh(a){return M0(a,d2|f2)}var p2="__lodash_hash_undefined__";function g2(a){return this.__data__.set(a,p2),this}function m2(a){return this.__data__.has(a)}function G0(a){var t=-1,e=a==null?0:a.length;for(this.__data__=new Ic;++t<e;)this.add(a[t])}G0.prototype.add=G0.prototype.push=g2;G0.prototype.has=m2;function y2(a,t){for(var e=-1,n=a==null?0:a.length;++e<n;)if(t(a[e],e,a))return!0;return!1}function v2(a,t){return a.has(t)}var b2=1,w2=2;function MC(a,t,e,n,s,o){var l=e&b2,u=a.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var f=o.get(a),g=o.get(t);if(f&&g)return f==t&&g==a;var y=-1,m=!0,b=e&w2?new G0:void 0;for(o.set(a,t),o.set(t,a);++y<u;){var _=a[y],E=t[y];if(n)var x=l?n(E,_,y,t,a,o):n(_,E,y,a,t,o);if(x!==void 0){if(x)continue;m=!1;break}if(b){if(!y2(t,function(N,I){if(!v2(b,I)&&(_===N||s(_,N,e,n,o)))return b.push(I)})){m=!1;break}}else if(!(_===E||s(_,E,e,n,o))){m=!1;break}}return o.delete(a),o.delete(t),m}function A2(a){var t=-1,e=Array(a.size);return a.forEach(function(n,s){e[++t]=[s,n]}),e}function _2(a){var t=-1,e=Array(a.size);return a.forEach(function(n){e[++t]=n}),e}var E2=1,S2=2,T2="[object Boolean]",x2="[object Date]",C2="[object Error]",k2="[object Map]",N2="[object Number]",L2="[object RegExp]",R2="[object Set]",P2="[object String]",I2="[object Symbol]",O2="[object ArrayBuffer]",M2="[object DataView]",xS=Fl?Fl.prototype:void 0,A1=xS?xS.valueOf:void 0;function D2(a,t,e,n,s,o,l){switch(e){case M2:if(a.byteLength!=t.byteLength||a.byteOffset!=t.byteOffset)return!1;a=a.buffer,t=t.buffer;case O2:return!(a.byteLength!=t.byteLength||!o(new $0(a),new $0(t)));case T2:case x2:case N2:return zg(+a,+t);case C2:return a.name==t.name&&a.message==t.message;case L2:case P2:return a==t+"";case k2:var u=A2;case R2:var d=n&E2;if(u||(u=_2),a.size!=t.size&&!d)return!1;var f=l.get(a);if(f)return f==t;n|=S2,l.set(a,t);var g=MC(u(a),u(t),n,s,o,l);return l.delete(a),g;case I2:if(A1)return A1.call(a)==A1.call(t)}return!1}var F2=1,B2=Object.prototype,j2=B2.hasOwnProperty;function q2(a,t,e,n,s,o){var l=e&F2,u=Qb(a),d=u.length,f=Qb(t),g=f.length;if(d!=g&&!l)return!1;for(var y=d;y--;){var m=u[y];if(!(l?m in t:j2.call(t,m)))return!1}var b=o.get(a),_=o.get(t);if(b&&_)return b==t&&_==a;var E=!0;o.set(a,t),o.set(t,a);for(var x=l;++y<d;){m=u[y];var N=a[m],I=t[m];if(n)var B=l?n(I,N,m,t,a,o):n(N,I,m,a,t,o);if(!(B===void 0?N===I||s(N,I,e,n,o):B)){E=!1;break}x||(x=m=="constructor")}if(E&&!x){var j=a.constructor,T=t.constructor;j!=T&&"constructor"in a&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof T=="function"&&T instanceof T)&&(E=!1)}return o.delete(a),o.delete(t),E}var H2=1,CS="[object Arguments]",kS="[object Array]",Xm="[object Object]",z2=Object.prototype,NS=z2.hasOwnProperty;function U2(a,t,e,n,s,o){var l=xc(a),u=xc(t),d=l?kS:Fr(a),f=u?kS:Fr(t);d=d==CS?Xm:d,f=f==CS?Xm:f;var g=d==Xm,y=f==Xm,m=d==f;if(m&&op(a)){if(!op(t))return!1;l=!0,g=!1}if(m&&!g)return o||(o=new Eo),l||xw(a)?MC(a,t,e,n,s,o):D2(a,t,d,e,n,s,o);if(!(e&H2)){var b=g&&NS.call(a,"__wrapped__"),_=y&&NS.call(t,"__wrapped__");if(b||_){var E=b?a.value():a,x=_?t.value():t;return o||(o=new Eo),s(E,x,e,n,o)}}return m?(o||(o=new Eo),q2(a,t,e,n,s,o)):!1}function DC(a,t,e,n,s){return a===t?!0:a==null||t==null||!Ta(a)&&!Ta(t)?a!==a&&t!==t:U2(a,t,e,n,DC,s)}function $2(a){return function(t,e,n){for(var s=-1,o=Object(t),l=n(t),u=l.length;u--;){var d=l[++s];if(e(o[d],d,o)===!1)break}return t}}var G2=$2();function ew(a,t,e){(e!==void 0&&!zg(a[t],e)||e===void 0&&!(t in a))&&Ew(a,t,e)}function V2(a){return Ta(a)&&_y(a)}function nw(a,t){if(!(t==="constructor"&&typeof a[t]=="function")&&t!="__proto__")return a[t]}function W2(a){return mI(a,TC(a))}function X2(a,t,e,n,s,o,l){var u=nw(a,e),d=nw(t,e),f=l.get(d);if(f){ew(a,e,f);return}var g=o?o(u,d,e+"",a,t,l):void 0,y=g===void 0;if(y){var m=xc(d),b=!m&&op(d),_=!m&&!b&&xw(d);g=d,m||b||_?xc(u)?g=u:V2(u)?g=iI(u):b?(y=!1,g=NC(d,!0)):_?(y=!1,g=LC(d,!0)):g=[]:UO(d)||Kb(d)?(g=u,Kb(u)?g=W2(u):(!ql(u)||_w(u))&&(g=RC(d))):y=!1}y&&(l.set(d,g),s(g,d,n,o,l),l.delete(d)),ew(a,e,g)}function FC(a,t,e,n,s){a!==t&&G2(t,function(o,l){if(s||(s=new Eo),ql(o))X2(a,t,l,e,FC,n,s);else{var u=n?n(nw(a,l),o,l+"",a,t,s):void 0;u===void 0&&(u=o),ew(a,l,u)}},TC)}function kw(a,t){return DC(a,t)}var _c=AI(function(a,t,e){FC(a,t,e)}),Dt=(a=>(a[a.TYPE=3]="TYPE",a[a.LEVEL=12]="LEVEL",a[a.ATTRIBUTE=13]="ATTRIBUTE",a[a.BLOT=14]="BLOT",a[a.INLINE=7]="INLINE",a[a.BLOCK=11]="BLOCK",a[a.BLOCK_BLOT=10]="BLOCK_BLOT",a[a.INLINE_BLOT=6]="INLINE_BLOT",a[a.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",a[a.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",a[a.ANY=15]="ANY",a))(Dt||{});class To{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const s=Dt.TYPE&Dt.ATTRIBUTE;this.scope=n.scope!=null?n.scope&Dt.LEVEL|s:Dt.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Ch extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const BC=class iw{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(t,e,n){const s=this.query(e);if(s==null)throw new Ch(`Unable to create ${e} blot`);const o=s,l=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:o.create(n),u=new o(t,l,n);return iw.blots.set(u.domNode,u),u}find(t,e=!1){return iw.find(t,e)}query(t,e=Dt.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&Dt.LEVEL&Dt.BLOCK?n=this.types.block:t&Dt.LEVEL&Dt.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&e&Dt.LEVEL&n.scope&&e&Dt.TYPE&n.scope?n:null}register(...t){return t.map(e=>{const n="blotName"in e,s="attrName"in e;if(!n&&!s)throw new Ch("Invalid definition");if(n&&e.blotName==="abstract")throw new Ch("Cannot register abstract class");const o=n?e.blotName:s?e.attrName:void 0;return this.types[o]=e,s?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):n&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(l=>l.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(l=>{(this.tags[l]==null||e.className==null)&&(this.tags[l]=e)}))),e})}};BC.blots=new WeakMap;let Md=BC;function LS(a,t){return(a.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class Y2 extends To{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){LS(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(LS(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const Na=Y2;function _1(a){const t=a.split("-"),e=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+e}class K2 extends To{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[_1(this.keyName)]=e,!0):!1}remove(t){t.style[_1(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[_1(this.keyName)];return this.canAdd(t,e)?e:""}}const Hl=K2;class Q2{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Md.find(this.domNode);if(t==null)return;const e=To.keys(this.domNode),n=Na.keys(this.domNode),s=Hl.keys(this.domNode);e.concat(n).concat(s).forEach(o=>{const l=t.scroll.query(o,Dt.ATTRIBUTE);l instanceof To&&(this.attributes[l.attrName]=l)})}copy(t){Object.keys(this.attributes).forEach(e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Ty=Q2,jC=class{constructor(t,e){this.scroll=t,this.domNode=e,Md.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new Ch("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?(typeof t=="string"?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof t=="number"&&(n=t),typeof n=="number"?e=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?e=document.createElement(n):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),Md.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,s){const o=this.isolate(t,e);if(this.scroll.query(n,Dt.BLOT)!=null&&s)o.wrap(n,s);else if(this.scroll.query(n,Dt.ATTRIBUTE)!=null){const l=this.scroll.create(this.statics.scope);o.wrap(l),l.format(n,s)}}insertAt(t,e,n){const s=n==null?this.scroll.create("text",e):this.scroll.create(e,n),o=this.split(t);this.parent.insertBefore(s,o||void 0)}isolate(t,e){const n=this.split(t);if(n==null)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new Ch(`Cannot wrap ${t}`);return n.appendChild(this),n}};jC.blotName="abstract";let qC=jC;const HC=class extends qC{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};HC.scope=Dt.INLINE_BLOT;let Z2=HC;const oi=Z2;class J2{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),s=0;for(;n;){if(n===t)return s;s+=1,n=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;n!=null;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let s=n();for(;s;){const o=s.length();if(t<o||e&&t===o&&(s.next==null||s.next.length()!==0))return[s,t];t-=o,s=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[s,o]=this.find(t);let l=t-o;const u=this.iterator(s);let d=u();for(;d&&l<t+e;){const f=d.length();t>l?n(d,t-l,Math.min(e,l+f-t)):n(d,0,Math.min(f,t+e-l)),l+=f,d=u()}}map(t){return this.reduce((e,n)=>(e.push(t(n)),e),[])}reduce(t,e){const n=this.iterator();let s=n();for(;s;)e=t(e,s),s=n();return e}}function RS(a,t){const e=t.find(a);if(e)return e;try{return t.create(a)}catch{const n=t.create(Dt.INLINE);return Array.from(a.childNodes).forEach(s=>{n.domNode.appendChild(s)}),a.parentNode&&a.parentNode.replaceChild(n.domNode,a),n.attach(),n}}const zC=class tl extends qC{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,tl.uiClass&&this.uiNode.classList.add(tl.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new J2,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=RS(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof Ch)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(n,s,o)=>{n.deleteAt(s,o)})}descendant(t,e=0){const[n,s]=this.children.find(e);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof tl?n.descendant(t,s):[null,-1]}descendants(t,e=0,n=Number.MAX_VALUE){let s=[],o=n;return this.children.forEachAt(e,n,(l,u,d)=>{(t.blotName==null&&t(l)||t.blotName!=null&&l instanceof t)&&s.push(l),l instanceof tl&&(s=s.concat(l.descendants(t,u,o))),o-=d}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(n=>e instanceof n)||(e.statics.scope===Dt.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof tl?e.unwrap():e.remove())})}formatAt(t,e,n,s){this.children.forEachAt(t,e,(o,l,u)=>{o.formatAt(l,u,n,s)})}insertAt(t,e,n){const[s,o]=this.children.find(t);if(s)s.insertAt(o,e,n);else{const l=n==null?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(l)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(n=>{t.insertBefore(n,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[n,s]=this.children.find(t,e),o=[[this,t]];return n instanceof tl?o.concat(n.path(s,e)):(n!=null&&o.push([n,s]),o)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;return n instanceof tl&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,o,l)=>{const u=s.split(o,e);u!=null&&n.appendChild(u)}),n}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],s=[];t.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(n.push(...o.addedNodes),s.push(...o.removedNodes))}),s.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const l=this.scroll.find(o);l!=null&&(l.domNode.parentNode==null||l.domNode.parentNode===this.domNode)&&l.detach()}),n.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,l)=>o===l?0:o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let l=null;o.nextSibling!=null&&(l=this.scroll.find(o.nextSibling));const u=RS(o,this.scroll);(u.next!==l||u.next==null)&&(u.parent!=null&&u.parent.removeChild(this),this.insertBefore(u,l||void 0))}),this.enforceAllowedChildren()}};zC.uiClass="";let tD=zC;const qr=tD;function eD(a,t){if(Object.keys(a).length!==Object.keys(t).length)return!1;for(const e in a)if(a[e]!==t[e])return!1;return!0}const mh=class yh extends qr{static create(t){return super.create(t)}static formats(t,e){const n=e.query(yh.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Ty(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(n=>{n instanceof yh||(n=n.wrap(yh.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,Dt.INLINE);if(n==null)return;n instanceof To?this.attributes.attribute(n,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,s){this.formats()[n]!=null||this.scroll.query(n,Dt.ATTRIBUTE)?this.isolate(t,e).format(n,s):super.formatAt(t,e,n,s)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const n=this.next;n instanceof yh&&n.prev===this&&eD(e,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,e){const n=super.wrap(t,e);return n instanceof yh&&this.attributes.move(n),n}};mh.allowedChildren=[mh,oi],mh.blotName="inline",mh.scope=Dt.INLINE_BLOT,mh.tagName="SPAN";let nD=mh;const Nw=nD,vh=class sw extends qr{static create(t){return super.create(t)}static formats(t,e){const n=e.query(sw.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Ty(this.domNode)}format(t,e){const n=this.scroll.query(t,Dt.BLOCK);n!=null&&(n instanceof To?this.attributes.attribute(n,e):t===this.statics.blotName&&!e?this.replaceWith(sw.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,s){this.scroll.query(n,Dt.BLOCK)!=null?this.format(n,s):super.formatAt(t,e,n,s)}insertAt(t,e,n){if(n==null||this.scroll.query(e,Dt.INLINE)!=null)super.insertAt(t,e,n);else{const s=this.split(t);if(s!=null){const o=this.scroll.create(e,n);s.parent.insertBefore(o,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};vh.blotName="block",vh.scope=Dt.BLOCK_BLOT,vh.tagName="P",vh.allowedChildren=[Nw,vh,oi];let iD=vh;const up=iD,rw=class extends qr{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,s){super.formatAt(t,e,n,s),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};rw.blotName="container",rw.scope=Dt.BLOCK_BLOT;let sD=rw;const xy=sD;class rD extends oi{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,s){t===0&&e===this.length()?this.format(n,s):super.formatAt(t,e,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const nr=rD,oD={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},aD=100,bh=class extends qr{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,oD),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=Dt.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(t,e)}formatAt(t,e,n,s){this.update(),super.formatAt(t,e,n,s)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());const o=(d,f=!0)=>{d==null||d===this||d.domNode.parentNode!=null&&(n.has(d.domNode)||n.set(d.domNode,[]),f&&o(d.parent))},l=d=>{n.has(d.domNode)&&(d instanceof qr&&d.children.forEach(l),n.delete(d.domNode),d.optimize(e))};let u=t;for(let d=0;u.length>0;d+=1){if(d>=aD)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(f=>{const g=this.find(f.target,!0);g!=null&&(g.domNode===f.target&&(f.type==="childList"?(o(this.find(f.previousSibling,!1)),Array.from(f.addedNodes).forEach(y=>{const m=this.find(y,!1);o(m,!1),m instanceof qr&&m.children.forEach(b=>{o(b,!1)})})):f.type==="attributes"&&o(g.prev)),o(g))}),this.children.forEach(l),u=Array.from(this.observer.takeRecords()),s=u.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map(s=>{const o=this.find(s.target,!0);return o==null?null:n.has(o.domNode)?(n.get(o.domNode).push(s),null):(n.set(o.domNode,[s]),o)}).forEach(s=>{s!=null&&s!==this&&n.has(s.domNode)&&s.update(n.get(s.domNode)||[],e)}),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};bh.blotName="scroll",bh.defaultChild=up,bh.allowedChildren=[up,xy],bh.scope=Dt.BLOCK_BLOT,bh.tagName="DIV";let lD=bh;const Lw=lD,ow=class UC extends oi{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){n==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof UC&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};ow.blotName="text",ow.scope=Dt.INLINE_BLOT;let uD=ow;const V0=uD,cD=Object.freeze(Object.defineProperty({__proto__:null,Attributor:To,AttributorStore:Ty,BlockBlot:up,ClassAttributor:Na,ContainerBlot:xy,EmbedBlot:nr,InlineBlot:Nw,LeafBlot:oi,ParentBlot:qr,Registry:Md,Scope:Dt,ScrollBlot:Lw,StyleAttributor:Hl,TextBlot:V0},Symbol.toStringTag,{value:"Module"}));var Ym={exports:{}},E1,PS;function hD(){if(PS)return E1;PS=1;var a=-1,t=1,e=0;function n(O,et,q,X,rt){if(O===et)return O?[[e,O]]:[];if(q!=null){var V=nt(O,et,q);if(V)return V}var K=u(O,et),Z=O.substring(0,K);O=O.substring(K),et=et.substring(K),K=f(O,et);var ot=O.substring(O.length-K);O=O.substring(0,O.length-K),et=et.substring(0,et.length-K);var J=s(O,et);return Z&&J.unshift([e,Z]),ot&&J.push([e,ot]),I(J,rt),X&&y(J),J}function s(O,et){var q;if(!O)return[[t,et]];if(!et)return[[a,O]];var X=O.length>et.length?O:et,rt=O.length>et.length?et:O,V=X.indexOf(rt);if(V!==-1)return q=[[t,X.substring(0,V)],[e,rt],[t,X.substring(V+rt.length)]],O.length>et.length&&(q[0][0]=q[2][0]=a),q;if(rt.length===1)return[[a,O],[t,et]];var K=g(O,et);if(K){var Z=K[0],ot=K[1],J=K[2],D=K[3],U=K[4],st=n(Z,J),gt=n(ot,D);return st.concat([[e,U]],gt)}return o(O,et)}function o(O,et){for(var q=O.length,X=et.length,rt=Math.ceil((q+X)/2),V=rt,K=2*rt,Z=new Array(K),ot=new Array(K),J=0;J<K;J++)Z[J]=-1,ot[J]=-1;Z[V+1]=0,ot[V+1]=0;for(var D=q-X,U=D%2!==0,st=0,gt=0,at=0,vt=0,yt=0;yt<rt;yt++){for(var bt=-yt+st;bt<=yt-gt;bt+=2){var Nt=V+bt,Ht;bt===-yt||bt!==yt&&Z[Nt-1]<Z[Nt+1]?Ht=Z[Nt+1]:Ht=Z[Nt-1]+1;for(var te=Ht-bt;Ht<q&&te<X&&O.charAt(Ht)===et.charAt(te);)Ht++,te++;if(Z[Nt]=Ht,Ht>q)gt+=2;else if(te>X)st+=2;else if(U){var Jt=V+D-bt;if(Jt>=0&&Jt<K&&ot[Jt]!==-1){var re=q-ot[Jt];if(Ht>=re)return l(O,et,Ht,te)}}}for(var pe=-yt+at;pe<=yt-vt;pe+=2){var Jt=V+pe,re;pe===-yt||pe!==yt&&ot[Jt-1]<ot[Jt+1]?re=ot[Jt+1]:re=ot[Jt-1]+1;for(var qe=re-pe;re<q&&qe<X&&O.charAt(q-re-1)===et.charAt(X-qe-1);)re++,qe++;if(ot[Jt]=re,re>q)vt+=2;else if(qe>X)at+=2;else if(!U){var Nt=V+D-pe;if(Nt>=0&&Nt<K&&Z[Nt]!==-1){var Ht=Z[Nt],te=V+Ht-Nt;if(re=q-re,Ht>=re)return l(O,et,Ht,te)}}}}return[[a,O],[t,et]]}function l(O,et,q,X){var rt=O.substring(0,q),V=et.substring(0,X),K=O.substring(q),Z=et.substring(X),ot=n(rt,V),J=n(K,Z);return ot.concat(J)}function u(O,et){if(!O||!et||O.charAt(0)!==et.charAt(0))return 0;for(var q=0,X=Math.min(O.length,et.length),rt=X,V=0;q<rt;)O.substring(V,rt)==et.substring(V,rt)?(q=rt,V=q):X=rt,rt=Math.floor((X-q)/2+q);return B(O.charCodeAt(rt-1))&&rt--,rt}function d(O,et){var q=O.length,X=et.length;if(q==0||X==0)return 0;q>X?O=O.substring(q-X):q<X&&(et=et.substring(0,q));var rt=Math.min(q,X);if(O==et)return rt;for(var V=0,K=1;;){var Z=O.substring(rt-K),ot=et.indexOf(Z);if(ot==-1)return V;K+=ot,(ot==0||O.substring(rt-K)==et.substring(0,K))&&(V=K,K++)}}function f(O,et){if(!O||!et||O.slice(-1)!==et.slice(-1))return 0;for(var q=0,X=Math.min(O.length,et.length),rt=X,V=0;q<rt;)O.substring(O.length-rt,O.length-V)==et.substring(et.length-rt,et.length-V)?(q=rt,V=q):X=rt,rt=Math.floor((X-q)/2+q);return j(O.charCodeAt(O.length-rt))&&rt--,rt}function g(O,et){var q=O.length>et.length?O:et,X=O.length>et.length?et:O;if(q.length<4||X.length*2<q.length)return null;function rt(gt,at,vt){for(var yt=gt.substring(vt,vt+Math.floor(gt.length/4)),bt=-1,Nt="",Ht,te,Jt,re;(bt=at.indexOf(yt,bt+1))!==-1;){var pe=u(gt.substring(vt),at.substring(bt)),qe=f(gt.substring(0,vt),at.substring(0,bt));Nt.length<qe+pe&&(Nt=at.substring(bt-qe,bt)+at.substring(bt,bt+pe),Ht=gt.substring(0,vt-qe),te=gt.substring(vt+pe),Jt=at.substring(0,bt-qe),re=at.substring(bt+pe))}return Nt.length*2>=gt.length?[Ht,te,Jt,re,Nt]:null}var V=rt(q,X,Math.ceil(q.length/4)),K=rt(q,X,Math.ceil(q.length/2)),Z;if(!V&&!K)return null;K?V?Z=V[4].length>K[4].length?V:K:Z=K:Z=V;var ot,J,D,U;O.length>et.length?(ot=Z[0],J=Z[1],D=Z[2],U=Z[3]):(D=Z[0],U=Z[1],ot=Z[2],J=Z[3]);var st=Z[4];return[ot,J,D,U,st]}function y(O){for(var et=!1,q=[],X=0,rt=null,V=0,K=0,Z=0,ot=0,J=0;V<O.length;)O[V][0]==e?(q[X++]=V,K=ot,Z=J,ot=0,J=0,rt=O[V][1]):(O[V][0]==t?ot+=O[V][1].length:J+=O[V][1].length,rt&&rt.length<=Math.max(K,Z)&&rt.length<=Math.max(ot,J)&&(O.splice(q[X-1],0,[a,rt]),O[q[X-1]+1][0]=t,X--,X--,V=X>0?q[X-1]:-1,K=0,Z=0,ot=0,J=0,rt=null,et=!0)),V++;for(et&&I(O),N(O),V=1;V<O.length;){if(O[V-1][0]==a&&O[V][0]==t){var D=O[V-1][1],U=O[V][1],st=d(D,U),gt=d(U,D);st>=gt?(st>=D.length/2||st>=U.length/2)&&(O.splice(V,0,[e,U.substring(0,st)]),O[V-1][1]=D.substring(0,D.length-st),O[V+1][1]=U.substring(st),V++):(gt>=D.length/2||gt>=U.length/2)&&(O.splice(V,0,[e,D.substring(0,gt)]),O[V-1][0]=t,O[V-1][1]=U.substring(0,U.length-gt),O[V+1][0]=a,O[V+1][1]=D.substring(gt),V++),V++}V++}}var m=/[^a-zA-Z0-9]/,b=/\s/,_=/[\r\n]/,E=/\n\r?\n$/,x=/^\r?\n\r?\n/;function N(O){function et(gt,at){if(!gt||!at)return 6;var vt=gt.charAt(gt.length-1),yt=at.charAt(0),bt=vt.match(m),Nt=yt.match(m),Ht=bt&&vt.match(b),te=Nt&&yt.match(b),Jt=Ht&&vt.match(_),re=te&&yt.match(_),pe=Jt&&gt.match(E),qe=re&&at.match(x);return pe||qe?5:Jt||re?4:bt&&!Ht&&te?3:Ht||te?2:bt||Nt?1:0}for(var q=1;q<O.length-1;){if(O[q-1][0]==e&&O[q+1][0]==e){var X=O[q-1][1],rt=O[q][1],V=O[q+1][1],K=f(X,rt);if(K){var Z=rt.substring(rt.length-K);X=X.substring(0,X.length-K),rt=Z+rt.substring(0,rt.length-K),V=Z+V}for(var ot=X,J=rt,D=V,U=et(X,rt)+et(rt,V);rt.charAt(0)===V.charAt(0);){X+=rt.charAt(0),rt=rt.substring(1)+V.charAt(0),V=V.substring(1);var st=et(X,rt)+et(rt,V);st>=U&&(U=st,ot=X,J=rt,D=V)}O[q-1][1]!=ot&&(ot?O[q-1][1]=ot:(O.splice(q-1,1),q--),O[q][1]=J,D?O[q+1][1]=D:(O.splice(q+1,1),q--))}q++}}function I(O,et){O.push([e,""]);for(var q=0,X=0,rt=0,V="",K="",Z;q<O.length;){if(q<O.length-1&&!O[q][1]){O.splice(q,1);continue}switch(O[q][0]){case t:rt++,K+=O[q][1],q++;break;case a:X++,V+=O[q][1],q++;break;case e:var ot=q-rt-X-1;if(et){if(ot>=0&&P(O[ot][1])){var J=O[ot][1].slice(-1);if(O[ot][1]=O[ot][1].slice(0,-1),V=J+V,K=J+K,!O[ot][1]){O.splice(ot,1),q--;var D=ot-1;O[D]&&O[D][0]===t&&(rt++,K=O[D][1]+K,D--),O[D]&&O[D][0]===a&&(X++,V=O[D][1]+V,D--),ot=D}}if(T(O[q][1])){var J=O[q][1].charAt(0);O[q][1]=O[q][1].slice(1),V+=J,K+=J}}if(q<O.length-1&&!O[q][1]){O.splice(q,1);break}if(V.length>0||K.length>0){V.length>0&&K.length>0&&(Z=u(K,V),Z!==0&&(ot>=0?O[ot][1]+=K.substring(0,Z):(O.splice(0,0,[e,K.substring(0,Z)]),q++),K=K.substring(Z),V=V.substring(Z)),Z=f(K,V),Z!==0&&(O[q][1]=K.substring(K.length-Z)+O[q][1],K=K.substring(0,K.length-Z),V=V.substring(0,V.length-Z)));var U=rt+X;V.length===0&&K.length===0?(O.splice(q-U,U),q=q-U):V.length===0?(O.splice(q-U,U,[t,K]),q=q-U+1):K.length===0?(O.splice(q-U,U,[a,V]),q=q-U+1):(O.splice(q-U,U,[a,V],[t,K]),q=q-U+2)}q!==0&&O[q-1][0]===e?(O[q-1][1]+=O[q][1],O.splice(q,1)):q++,rt=0,X=0,V="",K="";break}}O[O.length-1][1]===""&&O.pop();var st=!1;for(q=1;q<O.length-1;)O[q-1][0]===e&&O[q+1][0]===e&&(O[q][1].substring(O[q][1].length-O[q-1][1].length)===O[q-1][1]?(O[q][1]=O[q-1][1]+O[q][1].substring(0,O[q][1].length-O[q-1][1].length),O[q+1][1]=O[q-1][1]+O[q+1][1],O.splice(q-1,1),st=!0):O[q][1].substring(0,O[q+1][1].length)==O[q+1][1]&&(O[q-1][1]+=O[q+1][1],O[q][1]=O[q][1].substring(O[q+1][1].length)+O[q+1][1],O.splice(q+1,1),st=!0)),q++;st&&I(O,et)}function B(O){return O>=55296&&O<=56319}function j(O){return O>=56320&&O<=57343}function T(O){return j(O.charCodeAt(0))}function P(O){return B(O.charCodeAt(O.length-1))}function M(O){for(var et=[],q=0;q<O.length;q++)O[q][1].length>0&&et.push(O[q]);return et}function W(O,et,q,X){return P(O)||T(X)?null:M([[e,O],[a,et],[t,q],[e,X]])}function nt(O,et,q){var X=typeof q=="number"?{index:q,length:0}:q.oldRange,rt=typeof q=="number"?null:q.newRange,V=O.length,K=et.length;if(X.length===0&&(rt===null||rt.length===0)){var Z=X.index,ot=O.slice(0,Z),J=O.slice(Z),D=rt?rt.index:null;t:{var U=Z+K-V;if(D!==null&&D!==U||U<0||U>K)break t;var st=et.slice(0,U),gt=et.slice(U);if(gt!==J)break t;var at=Math.min(Z,U),vt=ot.slice(0,at),yt=st.slice(0,at);if(vt!==yt)break t;var bt=ot.slice(at),Nt=st.slice(at);return W(vt,bt,Nt,J)}t:{if(D!==null&&D!==Z)break t;var Ht=Z,st=et.slice(0,Ht),gt=et.slice(Ht);if(st!==ot)break t;var te=Math.min(V-Ht,K-Ht),Jt=J.slice(J.length-te),re=gt.slice(gt.length-te);if(Jt!==re)break t;var bt=J.slice(0,J.length-te),Nt=gt.slice(0,gt.length-te);return W(ot,bt,Nt,Jt)}}if(X.length>0&&rt&&rt.length===0)t:{var vt=O.slice(0,X.index),Jt=O.slice(X.index+X.length),at=vt.length,te=Jt.length;if(K<at+te)break t;var yt=et.slice(0,at),re=et.slice(K-te);if(vt!==yt||Jt!==re)break t;var bt=O.slice(at,V-te),Nt=et.slice(at,K-te);return W(vt,bt,Nt,Jt)}return null}function ht(O,et,q,X){return n(O,et,q,X,!0)}return ht.INSERT=t,ht.DELETE=a,ht.EQUAL=e,E1=ht,E1}var Qf={exports:{}};Qf.exports;var IS;function $C(){return IS||(IS=1,function(a,t){var e=200,n="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",l="[object Array]",u="[object Boolean]",d="[object Date]",f="[object Error]",g="[object Function]",y="[object GeneratorFunction]",m="[object Map]",b="[object Number]",_="[object Object]",E="[object Promise]",x="[object RegExp]",N="[object Set]",I="[object String]",B="[object Symbol]",j="[object WeakMap]",T="[object ArrayBuffer]",P="[object DataView]",M="[object Float32Array]",W="[object Float64Array]",nt="[object Int8Array]",ht="[object Int16Array]",O="[object Int32Array]",et="[object Uint8Array]",q="[object Uint8ClampedArray]",X="[object Uint16Array]",rt="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,K=/\w*$/,Z=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,J={};J[o]=J[l]=J[T]=J[P]=J[u]=J[d]=J[M]=J[W]=J[nt]=J[ht]=J[O]=J[m]=J[b]=J[_]=J[x]=J[N]=J[I]=J[B]=J[et]=J[q]=J[X]=J[rt]=!0,J[f]=J[g]=J[j]=!1;var D=typeof Pl=="object"&&Pl&&Pl.Object===Object&&Pl,U=typeof self=="object"&&self&&self.Object===Object&&self,st=D||U||Function("return this")(),gt=t&&!t.nodeType&&t,at=gt&&!0&&a&&!a.nodeType&&a,vt=at&&at.exports===gt;function yt(A,R){return A.set(R[0],R[1]),A}function bt(A,R){return A.add(R),A}function Nt(A,R){for(var H=-1,it=A?A.length:0;++H<it&&R(A[H],H,A)!==!1;);return A}function Ht(A,R){for(var H=-1,it=R.length,zt=A.length;++H<it;)A[zt+H]=R[H];return A}function te(A,R,H,it){for(var zt=-1,Rt=A?A.length:0;++zt<Rt;)H=R(H,A[zt],zt,A);return H}function Jt(A,R){for(var H=-1,it=Array(A);++H<A;)it[H]=R(H);return it}function re(A,R){return A==null?void 0:A[R]}function pe(A){var R=!1;if(A!=null&&typeof A.toString!="function")try{R=!!(A+"")}catch{}return R}function qe(A){var R=-1,H=Array(A.size);return A.forEach(function(it,zt){H[++R]=[zt,it]}),H}function Ss(A,R){return function(H){return A(R(H))}}function ai(A){var R=-1,H=Array(A.size);return A.forEach(function(it){H[++R]=it}),H}var ir=Array.prototype,Ts=Function.prototype,li=Object.prototype,ui=st["__core-js_shared__"],Ur=function(){var A=/[^.]+$/.exec(ui&&ui.keys&&ui.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),sr=Ts.toString,dn=li.hasOwnProperty,Un=li.toString,Qi=RegExp("^"+sr.call(dn).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ri=vt?st.Buffer:void 0,Pi=st.Symbol,rr=st.Uint8Array,Ve=Ss(Object.getPrototypeOf,Object),Zi=Object.create,or=li.propertyIsEnumerable,ar=ir.splice,wn=Object.getOwnPropertySymbols,ci=Ri?Ri.isBuffer:void 0,xs=Ss(Object.keys,Object),Ii=Wt(st,"DataView"),Ji=Wt(st,"Map"),Ze=Wt(st,"Promise"),Cs=Wt(st,"Set"),Oi=Wt(st,"WeakMap"),he=Wt(Object,"create"),hi=Oe(Ii),ks=Oe(Ji),lr=Oe(Ze),Ns=Oe(Cs),ur=Oe(Oi),di=Pi?Pi.prototype:void 0,Lo=di?di.valueOf:void 0;function An(A){var R=-1,H=A?A.length:0;for(this.clear();++R<H;){var it=A[R];this.set(it[0],it[1])}}function $r(){this.__data__=he?he(null):{}}function cr(A){return this.has(A)&&delete this.__data__[A]}function $n(A){var R=this.__data__;if(he){var H=R[A];return H===n?void 0:H}return dn.call(R,A)?R[A]:void 0}function fi(A){var R=this.__data__;return he?R[A]!==void 0:dn.call(R,A)}function ts(A,R){var H=this.__data__;return H[A]=he&&R===void 0?n:R,this}An.prototype.clear=$r,An.prototype.delete=cr,An.prototype.get=$n,An.prototype.has=fi,An.prototype.set=ts;function ke(A){var R=-1,H=A?A.length:0;for(this.clear();++R<H;){var it=A[R];this.set(it[0],it[1])}}function Gr(){this.__data__=[]}function Pa(A){var R=this.__data__,H=hr(R,A);if(H<0)return!1;var it=R.length-1;return H==it?R.pop():ar.call(R,H,1),!0}function pi(A){var R=this.__data__,H=hr(R,A);return H<0?void 0:R[H][1]}function Ia(A){return hr(this.__data__,A)>-1}function Mi(A,R){var H=this.__data__,it=hr(H,A);return it<0?H.push([A,R]):H[it][1]=R,this}ke.prototype.clear=Gr,ke.prototype.delete=Pa,ke.prototype.get=pi,ke.prototype.has=Ia,ke.prototype.set=Mi;function We(A){var R=-1,H=A?A.length:0;for(this.clear();++R<H;){var it=A[R];this.set(it[0],it[1])}}function Ro(){this.__data__={hash:new An,map:new(Ji||ke),string:new An}}function zl(A){return dr(this,A).delete(A)}function kt(A){return dr(this,A).get(A)}function $(A){return dr(this,A).has(A)}function ft(A,R){return dr(this,A).set(A,R),this}We.prototype.clear=Ro,We.prototype.delete=zl,We.prototype.get=kt,We.prototype.has=$,We.prototype.set=ft;function wt(A){this.__data__=new ke(A)}function ge(){this.__data__=new ke}function Xe(A){return this.__data__.delete(A)}function Gt(A){return this.__data__.get(A)}function on(A){return this.__data__.has(A)}function _n(A,R){var H=this.__data__;if(H instanceof ke){var it=H.__data__;if(!Ji||it.length<e-1)return it.push([A,R]),this;H=this.__data__=new We(it)}return H.set(A,R),this}wt.prototype.clear=ge,wt.prototype.delete=Xe,wt.prototype.get=Gt,wt.prototype.has=on,wt.prototype.set=_n;function gi(A,R){var H=Fi(A)||Is(A)?Jt(A.length,String):[],it=H.length,zt=!!it;for(var Rt in A)dn.call(A,Rt)&&!(zt&&(Rt=="length"||Fc(Rt,it)))&&H.push(Rt);return H}function Ne(A,R,H){var it=A[R];(!(dn.call(A,R)&&Yr(it,H))||H===void 0&&!(R in A))&&(A[R]=H)}function hr(A,R){for(var H=A.length;H--;)if(Yr(A[H][0],R))return H;return-1}function Gn(A,R){return A&&Io(R,Yl(R),A)}function Vr(A,R,H,it,zt,Rt,ae){var le;if(it&&(le=Rt?it(A,zt,Rt,ae):it(A)),le!==void 0)return le;if(!yi(A))return A;var be=Fi(A);if(be){if(le=$l(A),!R)return Mc(A,le)}else{var ce=Ps(A),Je=ce==g||ce==y;if(Kr(A))return Oa(A,R);if(ce==_||ce==o||Je&&!Rt){if(pe(A))return Rt?A:{};if(le=es(Je?{}:A),!R)return Oo(A,Gn(le,A))}else{if(!J[ce])return Rt?A:{};le=Dc(A,ce,Vr,R)}}ae||(ae=new wt);var In=ae.get(A);if(In)return In;if(ae.set(A,le),!be)var Me=H?Gd(A):Yl(A);return Nt(Me||A,function(tn,an){Me&&(an=tn,tn=A[an]),Ne(le,an,Vr(tn,R,H,it,an,A,ae))}),le}function Di(A){return yi(A)?Zi(A):{}}function qd(A,R,H){var it=R(A);return Fi(A)?it:Ht(it,H(A))}function mi(A){return Un.call(A)}function Hd(A){if(!yi(A)||Ma(A))return!1;var R=Vl(A)||pe(A)?Qi:Z;return R.test(Oe(A))}function zd(A){if(!ns(A))return xs(A);var R=[];for(var H in Object(A))dn.call(A,H)&&H!="constructor"&&R.push(H);return R}function Oa(A,R){if(R)return A.slice();var H=new A.constructor(A.length);return A.copy(H),H}function Wr(A){var R=new A.constructor(A.byteLength);return new rr(R).set(new rr(A)),R}function Ls(A,R){var H=R?Wr(A.buffer):A.buffer;return new A.constructor(H,A.byteOffset,A.byteLength)}function Xr(A,R,H){var it=R?H(qe(A),!0):qe(A);return te(it,yt,new A.constructor)}function Po(A){var R=new A.constructor(A.source,K.exec(A));return R.lastIndex=A.lastIndex,R}function Ud(A,R,H){var it=R?H(ai(A),!0):ai(A);return te(it,bt,new A.constructor)}function $d(A){return Lo?Object(Lo.call(A)):{}}function Ul(A,R){var H=R?Wr(A.buffer):A.buffer;return new A.constructor(H,A.byteOffset,A.length)}function Mc(A,R){var H=-1,it=A.length;for(R||(R=Array(it));++H<it;)R[H]=A[H];return R}function Io(A,R,H,it){H||(H={});for(var zt=-1,Rt=R.length;++zt<Rt;){var ae=R[zt],le=void 0;Ne(H,ae,le===void 0?A[ae]:le)}return H}function Oo(A,R){return Io(A,Rs(A),R)}function Gd(A){return qd(A,Yl,Rs)}function dr(A,R){var H=A.__data__;return Gl(R)?H[typeof R=="string"?"string":"hash"]:H.map}function Wt(A,R){var H=re(A,R);return Hd(H)?H:void 0}var Rs=wn?Ss(wn,Object):Mo,Ps=mi;(Ii&&Ps(new Ii(new ArrayBuffer(1)))!=P||Ji&&Ps(new Ji)!=m||Ze&&Ps(Ze.resolve())!=E||Cs&&Ps(new Cs)!=N||Oi&&Ps(new Oi)!=j)&&(Ps=function(A){var R=Un.call(A),H=R==_?A.constructor:void 0,it=H?Oe(H):void 0;if(it)switch(it){case hi:return P;case ks:return m;case lr:return E;case Ns:return N;case ur:return j}return R});function $l(A){var R=A.length,H=A.constructor(R);return R&&typeof A[0]=="string"&&dn.call(A,"index")&&(H.index=A.index,H.input=A.input),H}function es(A){return typeof A.constructor=="function"&&!ns(A)?Di(Ve(A)):{}}function Dc(A,R,H,it){var zt=A.constructor;switch(R){case T:return Wr(A);case u:case d:return new zt(+A);case P:return Ls(A,it);case M:case W:case nt:case ht:case O:case et:case q:case X:case rt:return Ul(A,it);case m:return Xr(A,it,H);case b:case I:return new zt(A);case x:return Po(A);case N:return Ud(A,it,H);case B:return $d(A)}}function Fc(A,R){return R=R??s,!!R&&(typeof A=="number"||ot.test(A))&&A>-1&&A%1==0&&A<R}function Gl(A){var R=typeof A;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?A!=="__proto__":A===null}function Ma(A){return!!Ur&&Ur in A}function ns(A){var R=A&&A.constructor,H=typeof R=="function"&&R.prototype||li;return A===H}function Oe(A){if(A!=null){try{return sr.call(A)}catch{}try{return A+""}catch{}}return""}function is(A){return Vr(A,!0,!0)}function Yr(A,R){return A===R||A!==A&&R!==R}function Is(A){return Bc(A)&&dn.call(A,"callee")&&(!or.call(A,"callee")||Un.call(A)==o)}var Fi=Array.isArray;function Da(A){return A!=null&&Wl(A.length)&&!Vl(A)}function Bc(A){return Xl(A)&&Da(A)}var Kr=ci||Do;function Vl(A){var R=yi(A)?Un.call(A):"";return R==g||R==y}function Wl(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=s}function yi(A){var R=typeof A;return!!A&&(R=="object"||R=="function")}function Xl(A){return!!A&&typeof A=="object"}function Yl(A){return Da(A)?gi(A):zd(A)}function Mo(){return[]}function Do(){return!1}a.exports=is}(Qf,Qf.exports)),Qf.exports}var Zf={exports:{}};Zf.exports;var OS;function GC(){return OS||(OS=1,function(a,t){var e=200,n="__lodash_hash_undefined__",s=1,o=2,l=9007199254740991,u="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",g="[object Boolean]",y="[object Date]",m="[object Error]",b="[object Function]",_="[object GeneratorFunction]",E="[object Map]",x="[object Number]",N="[object Null]",I="[object Object]",B="[object Promise]",j="[object Proxy]",T="[object RegExp]",P="[object Set]",M="[object String]",W="[object Symbol]",nt="[object Undefined]",ht="[object WeakMap]",O="[object ArrayBuffer]",et="[object DataView]",q="[object Float32Array]",X="[object Float64Array]",rt="[object Int8Array]",V="[object Int16Array]",K="[object Int32Array]",Z="[object Uint8Array]",ot="[object Uint8ClampedArray]",J="[object Uint16Array]",D="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,st=/^\[object .+?Constructor\]$/,gt=/^(?:0|[1-9]\d*)$/,at={};at[q]=at[X]=at[rt]=at[V]=at[K]=at[Z]=at[ot]=at[J]=at[D]=!0,at[u]=at[d]=at[O]=at[g]=at[et]=at[y]=at[m]=at[b]=at[E]=at[x]=at[I]=at[T]=at[P]=at[M]=at[ht]=!1;var vt=typeof Pl=="object"&&Pl&&Pl.Object===Object&&Pl,yt=typeof self=="object"&&self&&self.Object===Object&&self,bt=vt||yt||Function("return this")(),Nt=t&&!t.nodeType&&t,Ht=Nt&&!0&&a&&!a.nodeType&&a,te=Ht&&Ht.exports===Nt,Jt=te&&vt.process,re=function(){try{return Jt&&Jt.binding&&Jt.binding("util")}catch{}}(),pe=re&&re.isTypedArray;function qe(A,R){for(var H=-1,it=A==null?0:A.length,zt=0,Rt=[];++H<it;){var ae=A[H];R(ae,H,A)&&(Rt[zt++]=ae)}return Rt}function Ss(A,R){for(var H=-1,it=R.length,zt=A.length;++H<it;)A[zt+H]=R[H];return A}function ai(A,R){for(var H=-1,it=A==null?0:A.length;++H<it;)if(R(A[H],H,A))return!0;return!1}function ir(A,R){for(var H=-1,it=Array(A);++H<A;)it[H]=R(H);return it}function Ts(A){return function(R){return A(R)}}function li(A,R){return A.has(R)}function ui(A,R){return A==null?void 0:A[R]}function Ur(A){var R=-1,H=Array(A.size);return A.forEach(function(it,zt){H[++R]=[zt,it]}),H}function sr(A,R){return function(H){return A(R(H))}}function dn(A){var R=-1,H=Array(A.size);return A.forEach(function(it){H[++R]=it}),H}var Un=Array.prototype,Qi=Function.prototype,Ri=Object.prototype,Pi=bt["__core-js_shared__"],rr=Qi.toString,Ve=Ri.hasOwnProperty,Zi=function(){var A=/[^.]+$/.exec(Pi&&Pi.keys&&Pi.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),or=Ri.toString,ar=RegExp("^"+rr.call(Ve).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wn=te?bt.Buffer:void 0,ci=bt.Symbol,xs=bt.Uint8Array,Ii=Ri.propertyIsEnumerable,Ji=Un.splice,Ze=ci?ci.toStringTag:void 0,Cs=Object.getOwnPropertySymbols,Oi=wn?wn.isBuffer:void 0,he=sr(Object.keys,Object),hi=Rs(bt,"DataView"),ks=Rs(bt,"Map"),lr=Rs(bt,"Promise"),Ns=Rs(bt,"Set"),ur=Rs(bt,"WeakMap"),di=Rs(Object,"create"),Lo=Oe(hi),An=Oe(ks),$r=Oe(lr),cr=Oe(Ns),$n=Oe(ur),fi=ci?ci.prototype:void 0,ts=fi?fi.valueOf:void 0;function ke(A){var R=-1,H=A==null?0:A.length;for(this.clear();++R<H;){var it=A[R];this.set(it[0],it[1])}}function Gr(){this.__data__=di?di(null):{},this.size=0}function Pa(A){var R=this.has(A)&&delete this.__data__[A];return this.size-=R?1:0,R}function pi(A){var R=this.__data__;if(di){var H=R[A];return H===n?void 0:H}return Ve.call(R,A)?R[A]:void 0}function Ia(A){var R=this.__data__;return di?R[A]!==void 0:Ve.call(R,A)}function Mi(A,R){var H=this.__data__;return this.size+=this.has(A)?0:1,H[A]=di&&R===void 0?n:R,this}ke.prototype.clear=Gr,ke.prototype.delete=Pa,ke.prototype.get=pi,ke.prototype.has=Ia,ke.prototype.set=Mi;function We(A){var R=-1,H=A==null?0:A.length;for(this.clear();++R<H;){var it=A[R];this.set(it[0],it[1])}}function Ro(){this.__data__=[],this.size=0}function zl(A){var R=this.__data__,H=Oa(R,A);if(H<0)return!1;var it=R.length-1;return H==it?R.pop():Ji.call(R,H,1),--this.size,!0}function kt(A){var R=this.__data__,H=Oa(R,A);return H<0?void 0:R[H][1]}function $(A){return Oa(this.__data__,A)>-1}function ft(A,R){var H=this.__data__,it=Oa(H,A);return it<0?(++this.size,H.push([A,R])):H[it][1]=R,this}We.prototype.clear=Ro,We.prototype.delete=zl,We.prototype.get=kt,We.prototype.has=$,We.prototype.set=ft;function wt(A){var R=-1,H=A==null?0:A.length;for(this.clear();++R<H;){var it=A[R];this.set(it[0],it[1])}}function ge(){this.size=0,this.__data__={hash:new ke,map:new(ks||We),string:new ke}}function Xe(A){var R=Wt(this,A).delete(A);return this.size-=R?1:0,R}function Gt(A){return Wt(this,A).get(A)}function on(A){return Wt(this,A).has(A)}function _n(A,R){var H=Wt(this,A),it=H.size;return H.set(A,R),this.size+=H.size==it?0:1,this}wt.prototype.clear=ge,wt.prototype.delete=Xe,wt.prototype.get=Gt,wt.prototype.has=on,wt.prototype.set=_n;function gi(A){var R=-1,H=A==null?0:A.length;for(this.__data__=new wt;++R<H;)this.add(A[R])}function Ne(A){return this.__data__.set(A,n),this}function hr(A){return this.__data__.has(A)}gi.prototype.add=gi.prototype.push=Ne,gi.prototype.has=hr;function Gn(A){var R=this.__data__=new We(A);this.size=R.size}function Vr(){this.__data__=new We,this.size=0}function Di(A){var R=this.__data__,H=R.delete(A);return this.size=R.size,H}function qd(A){return this.__data__.get(A)}function mi(A){return this.__data__.has(A)}function Hd(A,R){var H=this.__data__;if(H instanceof We){var it=H.__data__;if(!ks||it.length<e-1)return it.push([A,R]),this.size=++H.size,this;H=this.__data__=new wt(it)}return H.set(A,R),this.size=H.size,this}Gn.prototype.clear=Vr,Gn.prototype.delete=Di,Gn.prototype.get=qd,Gn.prototype.has=mi,Gn.prototype.set=Hd;function zd(A,R){var H=Is(A),it=!H&&Yr(A),zt=!H&&!it&&Da(A),Rt=!H&&!it&&!zt&&Xl(A),ae=H||it||zt||Rt,le=ae?ir(A.length,String):[],be=le.length;for(var ce in A)Ve.call(A,ce)&&!(ae&&(ce=="length"||zt&&(ce=="offset"||ce=="parent")||Rt&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||Dc(ce,be)))&&le.push(ce);return le}function Oa(A,R){for(var H=A.length;H--;)if(is(A[H][0],R))return H;return-1}function Wr(A,R,H){var it=R(A);return Is(A)?it:Ss(it,H(A))}function Ls(A){return A==null?A===void 0?nt:N:Ze&&Ze in Object(A)?Ps(A):ns(A)}function Xr(A){return yi(A)&&Ls(A)==u}function Po(A,R,H,it,zt){return A===R?!0:A==null||R==null||!yi(A)&&!yi(R)?A!==A&&R!==R:Ud(A,R,H,it,Po,zt)}function Ud(A,R,H,it,zt,Rt){var ae=Is(A),le=Is(R),be=ae?d:es(A),ce=le?d:es(R);be=be==u?I:be,ce=ce==u?I:ce;var Je=be==I,In=ce==I,Me=be==ce;if(Me&&Da(A)){if(!Da(R))return!1;ae=!0,Je=!1}if(Me&&!Je)return Rt||(Rt=new Gn),ae||Xl(A)?Io(A,R,H,it,zt,Rt):Oo(A,R,be,H,it,zt,Rt);if(!(H&s)){var tn=Je&&Ve.call(A,"__wrapped__"),an=In&&Ve.call(R,"__wrapped__");if(tn||an){var Ye=tn?A.value():A,Vn=an?R.value():R;return Rt||(Rt=new Gn),zt(Ye,Vn,H,it,Rt)}}return Me?(Rt||(Rt=new Gn),Gd(A,R,H,it,zt,Rt)):!1}function $d(A){if(!Wl(A)||Gl(A))return!1;var R=Kr(A)?ar:st;return R.test(Oe(A))}function Ul(A){return yi(A)&&Vl(A.length)&&!!at[Ls(A)]}function Mc(A){if(!Ma(A))return he(A);var R=[];for(var H in Object(A))Ve.call(A,H)&&H!="constructor"&&R.push(H);return R}function Io(A,R,H,it,zt,Rt){var ae=H&s,le=A.length,be=R.length;if(le!=be&&!(ae&&be>le))return!1;var ce=Rt.get(A);if(ce&&Rt.get(R))return ce==R;var Je=-1,In=!0,Me=H&o?new gi:void 0;for(Rt.set(A,R),Rt.set(R,A);++Je<le;){var tn=A[Je],an=R[Je];if(it)var Ye=ae?it(an,tn,Je,R,A,Rt):it(tn,an,Je,A,R,Rt);if(Ye!==void 0){if(Ye)continue;In=!1;break}if(Me){if(!ai(R,function(Vn,fr){if(!li(Me,fr)&&(tn===Vn||zt(tn,Vn,H,it,Rt)))return Me.push(fr)})){In=!1;break}}else if(!(tn===an||zt(tn,an,H,it,Rt))){In=!1;break}}return Rt.delete(A),Rt.delete(R),In}function Oo(A,R,H,it,zt,Rt,ae){switch(H){case et:if(A.byteLength!=R.byteLength||A.byteOffset!=R.byteOffset)return!1;A=A.buffer,R=R.buffer;case O:return!(A.byteLength!=R.byteLength||!Rt(new xs(A),new xs(R)));case g:case y:case x:return is(+A,+R);case m:return A.name==R.name&&A.message==R.message;case T:case M:return A==R+"";case E:var le=Ur;case P:var be=it&s;if(le||(le=dn),A.size!=R.size&&!be)return!1;var ce=ae.get(A);if(ce)return ce==R;it|=o,ae.set(A,R);var Je=Io(le(A),le(R),it,zt,Rt,ae);return ae.delete(A),Je;case W:if(ts)return ts.call(A)==ts.call(R)}return!1}function Gd(A,R,H,it,zt,Rt){var ae=H&s,le=dr(A),be=le.length,ce=dr(R),Je=ce.length;if(be!=Je&&!ae)return!1;for(var In=be;In--;){var Me=le[In];if(!(ae?Me in R:Ve.call(R,Me)))return!1}var tn=Rt.get(A);if(tn&&Rt.get(R))return tn==R;var an=!0;Rt.set(A,R),Rt.set(R,A);for(var Ye=ae;++In<be;){Me=le[In];var Vn=A[Me],fr=R[Me];if(it)var Fa=ae?it(fr,Vn,Me,R,A,Rt):it(Vn,fr,Me,A,R,Rt);if(!(Fa===void 0?Vn===fr||zt(Vn,fr,H,it,Rt):Fa)){an=!1;break}Ye||(Ye=Me=="constructor")}if(an&&!Ye){var jc=A.constructor,Ba=R.constructor;jc!=Ba&&"constructor"in A&&"constructor"in R&&!(typeof jc=="function"&&jc instanceof jc&&typeof Ba=="function"&&Ba instanceof Ba)&&(an=!1)}return Rt.delete(A),Rt.delete(R),an}function dr(A){return Wr(A,Yl,$l)}function Wt(A,R){var H=A.__data__;return Fc(R)?H[typeof R=="string"?"string":"hash"]:H.map}function Rs(A,R){var H=ui(A,R);return $d(H)?H:void 0}function Ps(A){var R=Ve.call(A,Ze),H=A[Ze];try{A[Ze]=void 0;var it=!0}catch{}var zt=or.call(A);return it&&(R?A[Ze]=H:delete A[Ze]),zt}var $l=Cs?function(A){return A==null?[]:(A=Object(A),qe(Cs(A),function(R){return Ii.call(A,R)}))}:Mo,es=Ls;(hi&&es(new hi(new ArrayBuffer(1)))!=et||ks&&es(new ks)!=E||lr&&es(lr.resolve())!=B||Ns&&es(new Ns)!=P||ur&&es(new ur)!=ht)&&(es=function(A){var R=Ls(A),H=R==I?A.constructor:void 0,it=H?Oe(H):"";if(it)switch(it){case Lo:return et;case An:return E;case $r:return B;case cr:return P;case $n:return ht}return R});function Dc(A,R){return R=R??l,!!R&&(typeof A=="number"||gt.test(A))&&A>-1&&A%1==0&&A<R}function Fc(A){var R=typeof A;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?A!=="__proto__":A===null}function Gl(A){return!!Zi&&Zi in A}function Ma(A){var R=A&&A.constructor,H=typeof R=="function"&&R.prototype||Ri;return A===H}function ns(A){return or.call(A)}function Oe(A){if(A!=null){try{return rr.call(A)}catch{}try{return A+""}catch{}}return""}function is(A,R){return A===R||A!==A&&R!==R}var Yr=Xr(function(){return arguments}())?Xr:function(A){return yi(A)&&Ve.call(A,"callee")&&!Ii.call(A,"callee")},Is=Array.isArray;function Fi(A){return A!=null&&Vl(A.length)&&!Kr(A)}var Da=Oi||Do;function Bc(A,R){return Po(A,R)}function Kr(A){if(!Wl(A))return!1;var R=Ls(A);return R==b||R==_||R==f||R==j}function Vl(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=l}function Wl(A){var R=typeof A;return A!=null&&(R=="object"||R=="function")}function yi(A){return A!=null&&typeof A=="object"}var Xl=pe?Ts(pe):Ul;function Yl(A){return Fi(A)?zd(A):Mc(A)}function Mo(){return[]}function Do(){return!1}a.exports=Bc}(Zf,Zf.exports)),Zf.exports}var Km={},MS;function dD(){if(MS)return Km;MS=1,Object.defineProperty(Km,"__esModule",{value:!0});const a=$C(),t=GC();var e;return function(n){function s(d={},f={},g=!1){typeof d!="object"&&(d={}),typeof f!="object"&&(f={});let y=a(f);g||(y=Object.keys(y).reduce((m,b)=>(y[b]!=null&&(m[b]=y[b]),m),{}));for(const m in d)d[m]!==void 0&&f[m]===void 0&&(y[m]=d[m]);return Object.keys(y).length>0?y:void 0}n.compose=s;function o(d={},f={}){typeof d!="object"&&(d={}),typeof f!="object"&&(f={});const g=Object.keys(d).concat(Object.keys(f)).reduce((y,m)=>(t(d[m],f[m])||(y[m]=f[m]===void 0?null:f[m]),y),{});return Object.keys(g).length>0?g:void 0}n.diff=o;function l(d={},f={}){d=d||{};const g=Object.keys(f).reduce((y,m)=>(f[m]!==d[m]&&d[m]!==void 0&&(y[m]=f[m]),y),{});return Object.keys(d).reduce((y,m)=>(d[m]!==f[m]&&f[m]===void 0&&(y[m]=null),y),g)}n.invert=l;function u(d,f,g=!1){if(typeof d!="object")return f;if(typeof f!="object")return;if(!g)return f;const y=Object.keys(f).reduce((m,b)=>(d[b]===void 0&&(m[b]=f[b]),m),{});return Object.keys(y).length>0?y:void 0}n.transform=u}(e||(e={})),Km.default=e,Km}var Qm={},DS;function VC(){if(DS)return Qm;DS=1,Object.defineProperty(Qm,"__esModule",{value:!0});var a;return function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e}(a||(a={})),Qm.default=a,Qm}var Zm={},FS;function fD(){if(FS)return Zm;FS=1,Object.defineProperty(Zm,"__esModule",{value:!0});const a=VC();class t{constructor(n){this.ops=n,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(n){n||(n=1/0);const s=this.ops[this.index];if(s){const o=this.offset,l=a.default.length(s);if(n>=l-o?(n=l-o,this.index+=1,this.offset=0):this.offset+=n,typeof s.delete=="number")return{delete:n};{const u={};return s.attributes&&(u.attributes=s.attributes),typeof s.retain=="number"?u.retain=n:typeof s.retain=="object"&&s.retain!==null?u.retain=s.retain:typeof s.insert=="string"?u.insert=s.insert.substr(o,n):u.insert=s.insert,u}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?a.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const n=this.ops[this.index];return n?typeof n.delete=="number"?"delete":typeof n.retain=="number"||typeof n.retain=="object"&&n.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const n=this.offset,s=this.index,o=this.next(),l=this.ops.slice(this.index);return this.offset=n,this.index=s,[o].concat(l)}}else return[]}}return Zm.default=t,Zm}var BS;function pD(){return BS||(BS=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=hD(),n=$C(),s=GC(),o=dD();t.AttributeMap=o.default;const l=VC();t.Op=l.default;const u=fD();t.OpIterator=u.default;const d="\0",f=(y,m)=>{if(typeof y!="object"||y===null)throw new Error(`cannot retain a ${typeof y}`);if(typeof m!="object"||m===null)throw new Error(`cannot retain a ${typeof m}`);const b=Object.keys(y)[0];if(!b||b!==Object.keys(m)[0])throw new Error(`embed types not matched: ${b} != ${Object.keys(m)[0]}`);return[b,y[b],m[b]]};class g{constructor(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]}static registerEmbed(m,b){this.handlers[m]=b}static unregisterEmbed(m){delete this.handlers[m]}static getHandler(m){const b=this.handlers[m];if(!b)throw new Error(`no handlers for embed type "${m}"`);return b}insert(m,b){const _={};return typeof m=="string"&&m.length===0?this:(_.insert=m,b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(_.attributes=b),this.push(_))}delete(m){return m<=0?this:this.push({delete:m})}retain(m,b){if(typeof m=="number"&&m<=0)return this;const _={retain:m};return b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(_.attributes=b),this.push(_)}push(m){let b=this.ops.length,_=this.ops[b-1];if(m=n(m),typeof _=="object"){if(typeof m.delete=="number"&&typeof _.delete=="number")return this.ops[b-1]={delete:_.delete+m.delete},this;if(typeof _.delete=="number"&&m.insert!=null&&(b-=1,_=this.ops[b-1],typeof _!="object"))return this.ops.unshift(m),this;if(s(m.attributes,_.attributes)){if(typeof m.insert=="string"&&typeof _.insert=="string")return this.ops[b-1]={insert:_.insert+m.insert},typeof m.attributes=="object"&&(this.ops[b-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof _.retain=="number")return this.ops[b-1]={retain:_.retain+m.retain},typeof m.attributes=="object"&&(this.ops[b-1].attributes=m.attributes),this}}return b===this.ops.length?this.ops.push(m):this.ops.splice(b,0,m),this}chop(){const m=this.ops[this.ops.length-1];return m&&typeof m.retain=="number"&&!m.attributes&&this.ops.pop(),this}filter(m){return this.ops.filter(m)}forEach(m){this.ops.forEach(m)}map(m){return this.ops.map(m)}partition(m){const b=[],_=[];return this.forEach(E=>{(m(E)?b:_).push(E)}),[b,_]}reduce(m,b){return this.ops.reduce(m,b)}changeLength(){return this.reduce((m,b)=>b.insert?m+l.default.length(b):b.delete?m-b.delete:m,0)}length(){return this.reduce((m,b)=>m+l.default.length(b),0)}slice(m=0,b=1/0){const _=[],E=new u.default(this.ops);let x=0;for(;x<b&&E.hasNext();){let N;x<m?N=E.next(m-x):(N=E.next(b-x),_.push(N)),x+=l.default.length(N)}return new g(_)}compose(m){const b=new u.default(this.ops),_=new u.default(m.ops),E=[],x=_.peek();if(x!=null&&typeof x.retain=="number"&&x.attributes==null){let I=x.retain;for(;b.peekType()==="insert"&&b.peekLength()<=I;)I-=b.peekLength(),E.push(b.next());x.retain-I>0&&_.next(x.retain-I)}const N=new g(E);for(;b.hasNext()||_.hasNext();)if(_.peekType()==="insert")N.push(_.next());else if(b.peekType()==="delete")N.push(b.next());else{const I=Math.min(b.peekLength(),_.peekLength()),B=b.next(I),j=_.next(I);if(j.retain){const T={};if(typeof B.retain=="number")T.retain=typeof j.retain=="number"?I:j.retain;else if(typeof j.retain=="number")B.retain==null?T.insert=B.insert:T.retain=B.retain;else{const M=B.retain==null?"insert":"retain",[W,nt,ht]=f(B[M],j.retain),O=g.getHandler(W);T[M]={[W]:O.compose(nt,ht,M==="retain")}}const P=o.default.compose(B.attributes,j.attributes,typeof B.retain=="number");if(P&&(T.attributes=P),N.push(T),!_.hasNext()&&s(N.ops[N.ops.length-1],T)){const M=new g(b.rest());return N.concat(M).chop()}}else typeof j.delete=="number"&&(typeof B.retain=="number"||typeof B.retain=="object"&&B.retain!==null)&&N.push(j)}return N.chop()}concat(m){const b=new g(this.ops.slice());return m.ops.length>0&&(b.push(m.ops[0]),b.ops=b.ops.concat(m.ops.slice(1))),b}diff(m,b){if(this.ops===m.ops)return new g;const _=[this,m].map(B=>B.map(j=>{if(j.insert!=null)return typeof j.insert=="string"?j.insert:d;const T=B===m?"on":"with";throw new Error("diff() called "+T+" non-document")}).join("")),E=new g,x=e(_[0],_[1],b,!0),N=new u.default(this.ops),I=new u.default(m.ops);return x.forEach(B=>{let j=B[1].length;for(;j>0;){let T=0;switch(B[0]){case e.INSERT:T=Math.min(I.peekLength(),j),E.push(I.next(T));break;case e.DELETE:T=Math.min(j,N.peekLength()),N.next(T),E.delete(T);break;case e.EQUAL:T=Math.min(N.peekLength(),I.peekLength(),j);const P=N.next(T),M=I.next(T);s(P.insert,M.insert)?E.retain(T,o.default.diff(P.attributes,M.attributes)):E.push(M).delete(T);break}j-=T}}),E.chop()}eachLine(m,b=`
`){const _=new u.default(this.ops);let E=new g,x=0;for(;_.hasNext();){if(_.peekType()!=="insert")return;const N=_.peek(),I=l.default.length(N)-_.peekLength(),B=typeof N.insert=="string"?N.insert.indexOf(b,I)-I:-1;if(B<0)E.push(_.next());else if(B>0)E.push(_.next(B));else{if(m(E,_.next(1).attributes||{},x)===!1)return;x+=1,E=new g}}E.length()>0&&m(E,{},x)}invert(m){const b=new g;return this.reduce((_,E)=>{if(E.insert)b.delete(l.default.length(E));else{if(typeof E.retain=="number"&&E.attributes==null)return b.retain(E.retain),_+E.retain;if(E.delete||typeof E.retain=="number"){const x=E.delete||E.retain;return m.slice(_,_+x).forEach(I=>{E.delete?b.push(I):E.retain&&E.attributes&&b.retain(l.default.length(I),o.default.invert(E.attributes,I.attributes))}),_+x}else if(typeof E.retain=="object"&&E.retain!==null){const x=m.slice(_,_+1),N=new u.default(x.ops).next(),[I,B,j]=f(E.retain,N.insert),T=g.getHandler(I);return b.retain({[I]:T.invert(B,j)},o.default.invert(E.attributes,N.attributes)),_+1}}return _},0),b.chop()}transform(m,b=!1){if(b=!!b,typeof m=="number")return this.transformPosition(m,b);const _=m,E=new u.default(this.ops),x=new u.default(_.ops),N=new g;for(;E.hasNext()||x.hasNext();)if(E.peekType()==="insert"&&(b||x.peekType()!=="insert"))N.retain(l.default.length(E.next()));else if(x.peekType()==="insert")N.push(x.next());else{const I=Math.min(E.peekLength(),x.peekLength()),B=E.next(I),j=x.next(I);if(B.delete)continue;if(j.delete)N.push(j);else{const T=B.retain,P=j.retain;let M=typeof P=="object"&&P!==null?P:I;if(typeof T=="object"&&T!==null&&typeof P=="object"&&P!==null){const W=Object.keys(T)[0];if(W===Object.keys(P)[0]){const nt=g.getHandler(W);nt&&(M={[W]:nt.transform(T[W],P[W],b)})}}N.retain(M,o.default.transform(B.attributes,j.attributes,b))}}return N.chop()}transformPosition(m,b=!1){b=!!b;const _=new u.default(this.ops);let E=0;for(;_.hasNext()&&E<=m;){const x=_.peekLength(),N=_.peekType();if(_.next(),N==="delete"){m-=Math.min(x,m-E);continue}else N==="insert"&&(E<m||!b)&&(m+=x);E+=x}return m}}g.Op=l.default,g.OpIterator=u.default,g.AttributeMap=o.default,g.handlers={},t.default=g,a.exports=g,a.exports.default=g}(Ym,Ym.exports)),Ym.exports}var Js=pD();const Ft=Fg(Js);class No extends nr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}No.blotName="break";No.tagName="BR";let xo=class extends V0{};function WC(a){return a.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}const so=class so extends Nw{static compare(t,e){const n=so.order.indexOf(t),s=so.order.indexOf(e);return n>=0||s>=0?n-s:t===e?0:t<e?-1:1}formatAt(t,e,n,s){if(so.compare(this.statics.blotName,n)<0&&this.scroll.query(n,Dt.BLOT)){const o=this.isolate(t,e);s&&o.wrap(n,s)}else super.formatAt(t,e,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof so&&so.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};lt(so,"allowedChildren",[so,No,nr,xo]),lt(so,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let kc=so;const jS=1;class Ki extends up{constructor(){super(...arguments);lt(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=gD(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,o){n<=0||(this.scroll.query(s,Dt.BLOCK)?e+n===this.length()&&this.format(s,o):super.formatAt(e,Math.min(n,this.length()-e-1),s,o),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const o=n.split(`
`),l=o.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let u=this;o.reduce((d,f)=>(u=u.split(d,!0),u.insertAt(0,f),f.length),e+l.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof No&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+jS),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-jS)){const o=this.clone();return e===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}const s=super.split(e,n);return this.cache={},s}}Ki.blotName="block";Ki.tagName="P";Ki.defaultChild=No;Ki.allowedChildren=[No,kc,nr,xo];class Br extends nr{attach(){super.attach(),this.attributes=new Ty(this.domNode)}delta(){return new Ft().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,Dt.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,e)}formatAt(t,e,n,s){this.format(n,s)}insertAt(t,e,n){if(n!=null){super.insertAt(t,e,n);return}const s=e.split(`
`),o=s.pop(),l=s.map(d=>{const f=this.scroll.create(Ki.blotName);return f.insertAt(0,d),f}),u=this.split(t);l.forEach(d=>{this.parent.insertBefore(d,u)}),o&&this.parent.insertBefore(this.scroll.create("text",o),u)}}Br.scope=Dt.BLOCK_BLOT;function gD(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return a.descendants(oi).reduce((e,n)=>n.length()===0?e:e.insert(n.value(),Ks(n,{},t)),new Ft).insert(`
`,Ks(a))}function Ks(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return a==null||("formats"in a&&typeof a.formats=="function"&&(t={...t,...a.formats()},e&&delete t["code-token"]),a.parent==null||a.parent.statics.blotName==="scroll"||a.parent.statics.scope!==a.statics.scope)?t:Ks(a.parent,t,e)}const zs=class zs extends nr{static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(zs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==Dt.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=zs.CONTENTS.length,n.optimize(),n.formatAt(s,zs.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof xo?this.prev:null,n=e?e.length():0,s=this.next instanceof xo?this.next:null,o=s?s.text:"",{textNode:l}=this,u=l.data.split(zs.CONTENTS).join("");l.data=zs.CONTENTS;let d;if(e)d=e,(u||s)&&(e.insertAt(e.length(),u+o),s&&s.remove());else if(s)d=s,s.insertAt(0,u);else{const f=document.createTextNode(u);d=this.scroll.create(f),this.parent.insertBefore(d,this)}if(this.remove(),t){const f=(m,b)=>e&&m===e.domNode?b:m===l?n+b-1:s&&m===s.domNode?n+u.length+b:null,g=f(t.start.node,t.start.offset),y=f(t.end.node,t.end.offset);if(g!==null&&y!==null)return{startNode:d.domNode,startOffset:g,endNode:d.domNode,endOffset:y}}return null}update(t,e){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(e.range=n)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=zs.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};lt(zs,"blotName","cursor"),lt(zs,"className","ql-cursor"),lt(zs,"tagName","span"),lt(zs,"CONTENTS","\uFEFF");let cp=zs;var S1={exports:{}},qS;function mD(){return qS||(qS=1,function(a){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(d,f,g){this.fn=d,this.context=f,this.once=g||!1}function o(d,f,g,y,m){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new s(g,y||d,m),_=e?e+f:f;return d._events[_]?d._events[_].fn?d._events[_]=[d._events[_],b]:d._events[_].push(b):(d._events[_]=b,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],g,y;if(this._eventsCount===0)return f;for(y in g=this._events)t.call(g,y)&&f.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(g)):f},u.prototype.listeners=function(f){var g=e?e+f:f,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var m=0,b=y.length,_=new Array(b);m<b;m++)_[m]=y[m].fn;return _},u.prototype.listenerCount=function(f){var g=e?e+f:f,y=this._events[g];return y?y.fn?1:y.length:0},u.prototype.emit=function(f,g,y,m,b,_){var E=e?e+f:f;if(!this._events[E])return!1;var x=this._events[E],N=arguments.length,I,B;if(x.fn){switch(x.once&&this.removeListener(f,x.fn,void 0,!0),N){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,g),!0;case 3:return x.fn.call(x.context,g,y),!0;case 4:return x.fn.call(x.context,g,y,m),!0;case 5:return x.fn.call(x.context,g,y,m,b),!0;case 6:return x.fn.call(x.context,g,y,m,b,_),!0}for(B=1,I=new Array(N-1);B<N;B++)I[B-1]=arguments[B];x.fn.apply(x.context,I)}else{var j=x.length,T;for(B=0;B<j;B++)switch(x[B].once&&this.removeListener(f,x[B].fn,void 0,!0),N){case 1:x[B].fn.call(x[B].context);break;case 2:x[B].fn.call(x[B].context,g);break;case 3:x[B].fn.call(x[B].context,g,y);break;case 4:x[B].fn.call(x[B].context,g,y,m);break;default:if(!I)for(T=1,I=new Array(N-1);T<N;T++)I[T-1]=arguments[T];x[B].fn.apply(x[B].context,I)}}return!0},u.prototype.on=function(f,g,y){return o(this,f,g,y,!1)},u.prototype.once=function(f,g,y){return o(this,f,g,y,!0)},u.prototype.removeListener=function(f,g,y,m){var b=e?e+f:f;if(!this._events[b])return this;if(!g)return l(this,b),this;var _=this._events[b];if(_.fn)_.fn===g&&(!m||_.once)&&(!y||_.context===y)&&l(this,b);else{for(var E=0,x=[],N=_.length;E<N;E++)(_[E].fn!==g||m&&!_[E].once||y&&_[E].context!==y)&&x.push(_[E]);x.length?this._events[b]=x.length===1?x[0]:x:l(this,b)}return this},u.prototype.removeAllListeners=function(f){var g;return f?(g=e?e+f:f,this._events[g]&&l(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,a.exports=u}(S1)),S1.exports}var yD=mD();const vD=Fg(yD),aw=new WeakMap,lw=["error","warn","log","info"];let uw="warn";function XC(a){if(uw&&lw.indexOf(a)<=lw.indexOf(uw)){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];console[a](...e)}}function La(a){return lw.reduce((t,e)=>(t[e]=XC.bind(console,e,a),t),{})}La.level=a=>{uw=a};XC.level=La.level;const T1=La("quill:events"),bD=["selectionchange","mousedown","mouseup","click"];bD.forEach(a=>{document.addEventListener(a,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const o=aw.get(s);o&&o.emitter&&o.emitter.handleDOM(...e)})})});class Pt extends vD{constructor(){super(),this.domListeners={},this.on("error",T1.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T1.log.call(T1,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(o=>{let{node:l,handler:u}=o;(t.target===l||l.contains(t.target))&&u(t,...n)})}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}}lt(Pt,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),lt(Pt,"sources",{API:"api",SILENT:"silent",USER:"user"});const x1=La("quill:selection");let Dd=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}};class wD{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Dd(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Pt.sources.USER),1)}),this.emitter.on(Pt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(Pt.events.SCROLL_UPDATE,(s,o)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const l=o.some(u=>u.type==="characterData"||u.type==="childList"||u.type==="attributes"&&u.target===this.root);this.update(l?Pt.sources.SILENT:s)}catch{}})}),this.emitter.on(Pt.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:o,startOffset:l,endNode:u,endOffset:d}=s.range;this.setNativeRange(o,l,u,d),this.update(Pt.sources.SILENT)}}),this.update(Pt.sources.SILENT)}handleComposition(){this.emitter.on(Pt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Pt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Pt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,Dt.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof oi){const o=s.split(n.start.offset);s.parent.insertBefore(this.cursor,o)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let s,[o,l]=this.scroll.leaf(t);if(o==null)return null;if(e>0&&l===o.length()){const[g]=this.scroll.leaf(t+1);if(g){const[y]=this.scroll.line(t),[m]=this.scroll.line(t+1);y===m&&(o=g,l=0)}}[s,l]=o.position(l,!0);const u=document.createRange();if(e>0)return u.setStart(s,l),[o,l]=this.scroll.leaf(t+e),o==null?null:([s,l]=o.position(l,!0),u.setEnd(s,l),u.getBoundingClientRect());let d="left",f;if(s instanceof Text){if(!s.data.length)return null;l<s.data.length?(u.setStart(s,l),u.setEnd(s,l+1)):(u.setStart(s,l-1),u.setEnd(s,l),d="right"),f=u.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;f=o.domNode.getBoundingClientRect(),l>0&&(d="right")}return{bottom:f.top+f.height,height:f.height,left:f[d],right:f[d],top:f.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const n=this.normalizeNative(e);return x1.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&C1(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map(l=>{const[u,d]=l,f=this.scroll.find(u,!0),g=f.offset(this.scroll);return d===0?g:f instanceof oi?g+f.index(u,d):g+f.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),o=Math.min(s,...n);return new Dd(o,s-o)}normalizeNative(t){if(!C1(this.root,t.startContainer)||!t.collapsed&&!C1(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(n=>{let{node:s,offset:o}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>o)s=s.childNodes[o],o=0;else if(s.childNodes.length===o)s=s.lastChild,s instanceof Text?o=s.data.length:s.childNodes.length>0?o=s.childNodes.length:o=s.childNodes.length+1;else break;n.node=s,n.offset=o}),e}rangeToNative(t){const e=this.scroll.length(),n=(s,o)=>{s=Math.min(e-1,s);const[l,u]=this.scroll.leaf(s);return l?l.position(u,o):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(x1.info("setNativeRange",t,e,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const l=document.getSelection();if(l!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:u}=this.getNativeRange()||{};if(u==null||o||t!==u.startContainer||e!==u.startOffset||n!==u.endContainer||s!==u.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const d=document.createRange();d.setStart(t,e),d.setEnd(n,s),l.removeAllRanges(),l.addRange(d)}}else l.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt.sources.API;if(typeof e=="string"&&(n=e,e=!1),x1.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pt.sources.USER;const e=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!kw(e,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const l=this.cursor.restore();l&&this.setNativeRange(l.startNode,l.startOffset,l.endNode,l.endOffset)}const o=[Pt.events.SELECTION_CHANGE,xh(this.lastRange),xh(e),t];this.emitter.emit(Pt.events.EDITOR_CHANGE,...o),t!==Pt.sources.SILENT&&this.emitter.emit(...o)}}}function C1(a,t){try{t.parentNode}catch{return!1}return a.contains(t)}const AD=/^[ -~]*$/;class _D{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=HS(t),s=new Ft;return SD(n.ops.slice()).reduce((l,u)=>{const d=Js.Op.length(u);let f=u.attributes||{},g=!1,y=!1;if(u.insert!=null){if(s.retain(d),typeof u.insert=="string"){const _=u.insert;y=!_.endsWith(`
`)&&(e<=l||!!this.scroll.descendant(Br,l)[0]),this.scroll.insertAt(l,_);const[E,x]=this.scroll.line(l);let N=_c({},Ks(E));if(E instanceof Ki){const[I]=E.descendant(oi,x);I&&(N=_c(N,Ks(I)))}f=Js.AttributeMap.diff(N,f)||{}}else if(typeof u.insert=="object"){const _=Object.keys(u.insert)[0];if(_==null)return l;const E=this.scroll.query(_,Dt.INLINE)!=null;if(E)(e<=l||this.scroll.descendant(Br,l)[0])&&(y=!0);else if(l>0){const[x,N]=this.scroll.descendant(oi,l-1);x instanceof xo?x.value()[N]!==`
`&&(g=!0):x instanceof nr&&x.statics.scope===Dt.INLINE_BLOT&&(g=!0)}if(this.scroll.insertAt(l,_,u.insert[_]),E){const[x]=this.scroll.descendant(oi,l);if(x){const N=_c({},Ks(x));f=Js.AttributeMap.diff(N,f)||{}}}}e+=d}else if(s.push(u),u.retain!==null&&typeof u.retain=="object"){const _=Object.keys(u.retain)[0];if(_==null)return l;this.scroll.updateEmbedAt(l,_,u.retain[_])}Object.keys(f).forEach(_=>{this.scroll.formatAt(l,d,_,f[_])});const m=g?1:0,b=y?1:0;return e+=m+b,s.retain(m),s.delete(b),l+d+m+b},0),s.reduce((l,u)=>typeof u.delete=="number"?(this.scroll.deleteAt(l,u.delete),l):l+Js.Op.length(u),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new Ft().retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(o=>{this.scroll.lines(t,Math.max(e,1)).forEach(l=>{l.format(o,n[o])})}),this.scroll.optimize();const s=new Ft().retain(t).retain(e,xh(n));return this.update(s)}formatText(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(o=>{this.scroll.formatAt(t,e,o,n[o])});const s=new Ft().retain(t).retain(e,xh(n));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new Ft)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];e===0?this.scroll.path(t).forEach(u=>{const[d]=u;d instanceof Ki?n.push(d):d instanceof oi&&s.push(d)}):(n=this.scroll.lines(t,e),s=this.scroll.descendants(oi,t,e));const[o,l]=[n,s].map(u=>{const d=u.shift();if(d==null)return{};let f=Ks(d);for(;Object.keys(f).length>0;){const g=u.shift();if(g==null)return f;f=ED(Ks(g),f)}return f});return{...o,...l}}getHTML(t,e){const[n,s]=this.scroll.line(t);if(n){const o=n.length();return n.length()>=s+e&&!(s===0&&e===o)?hp(n,s,e,!0):hp(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,e){const n=HS(e),s=new Ft().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update(new Ft().retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,e.length,s,n[s])}),this.update(new Ft().retain(t).insert(e,xh(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Ki.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof No}removeFormat(t,e){const n=this.getText(t,e),[s,o]=this.scroll.line(t+e);let l=0,u=new Ft;s!=null&&(l=s.length()-o,u=s.delta().slice(o,o+l-1).insert(`
`));const f=this.getContents(t,e+l).diff(new Ft().insert(n).concat(u)),g=new Ft().retain(t).concat(f);return this.applyDelta(g)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(AD)&&this.scroll.find(e[0].target)){const o=this.scroll.find(e[0].target),l=Ks(o),u=o.offset(this.scroll),d=e[0].oldValue.replace(cp.CONTENTS,""),f=new Ft().insert(d),g=new Ft().insert(o.value()),y=n&&{oldRange:zS(n.oldRange,-u),newRange:zS(n.newRange,-u)};t=new Ft().retain(u).concat(f.diff(g,y)).reduce((b,_)=>_.insert?b.insert(_.insert,l):b.push(_),new Ft),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!kw(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}}function wh(a,t,e){if(a.length===0){const[b]=k1(e.pop());return t<=0?`</li></${b}>`:`</li></${b}>${wh([],t-1,e)}`}const[{child:n,offset:s,length:o,indent:l,type:u},...d]=a,[f,g]=k1(u);if(l>t)return e.push(u),l===t+1?`<${f}><li${g}>${hp(n,s,o)}${wh(d,l,e)}`:`<${f}><li>${wh(a,t+1,e)}`;const y=e[e.length-1];if(l===t&&u===y)return`</li><li${g}>${hp(n,s,o)}${wh(d,l,e)}`;const[m]=k1(e.pop());return`</li></${m}>${wh(a,t-1,e)}`}function hp(a,t,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in a&&typeof a.html=="function")return a.html(t,e);if(a instanceof xo)return WC(a.value().slice(t,t+e));if(a instanceof qr){if(a.statics.blotName==="list-container"){const f=[];return a.children.forEachAt(t,e,(g,y,m)=>{const b="formats"in g&&typeof g.formats=="function"?g.formats():{};f.push({child:g,offset:y,length:m,indent:b.indent||0,type:b.list})}),wh(f,-1,[])}const s=[];if(a.children.forEachAt(t,e,(f,g,y)=>{s.push(hp(f,g,y))}),n||a.statics.blotName==="list")return s.join("");const{outerHTML:o,innerHTML:l}=a.domNode,[u,d]=o.split(`>${l}<`);return u==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${d}`:`${u}>${s.join("")}<${d}`}return a.domNode instanceof Element?a.domNode.outerHTML:""}function ED(a,t){return Object.keys(t).reduce((e,n)=>{if(a[n]==null)return e;const s=t[n];return s===a[n]?e[n]=s:Array.isArray(s)?s.indexOf(a[n])<0?e[n]=s.concat([a[n]]):e[n]=s:e[n]=[s,a[n]],e},{})}function k1(a){const t=a==="ordered"?"ol":"ul";switch(a){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function HS(a){return a.reduce((t,e)=>{if(typeof e.insert=="string"){const n=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,e.attributes)}return t.push(e)},new Ft)}function zS(a,t){let{index:e,length:n}=a;return new Dd(e+t,n)}function SD(a){const t=[];return a.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((s,o)=>{o&&t.push({insert:`
`,attributes:e.attributes}),s&&t.push({insert:s,attributes:e.attributes})}):t.push(e)}),t}class Ra{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}lt(Ra,"DEFAULTS",{});const Jm="\uFEFF";class YC extends nr{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(Jm),this.rightGuard=document.createTextNode(Jm),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,n;const s=t.data.split(Jm).join("");if(t===this.leftGuard)if(this.prev instanceof xo){const o=this.prev.length();this.prev.insertAt(o,s),e={startNode:this.prev.domNode,startOffset:o+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),e={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof xo?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),e={startNode:n,startOffset:s.length}));return t.data=Jm,e}update(t,e){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(e.range=s)}})}}class TD{constructor(t,e){lt(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof YC)&&(this.emitter.emit(Pt.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Pt.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Pt.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Pt.events.COMPOSITION_END,t),this.isComposing=!1}}const np=class np{constructor(t,e){lt(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};lt(np,"DEFAULTS",{modules:{}}),lt(np,"themes",{default:np});let Fd=np;const xD=a=>a.parentElement||a.getRootNode().host||null,CD=a=>{const t=a.getBoundingClientRect(),e="offsetWidth"in a&&Math.abs(t.width)/a.offsetWidth||1,n="offsetHeight"in a&&Math.abs(t.height)/a.offsetHeight||1;return{top:t.top,right:t.left+a.clientWidth*e,bottom:t.top+a.clientHeight*n,left:t.left}},t0=a=>{const t=parseInt(a,10);return Number.isNaN(t)?0:t},US=(a,t,e,n,s,o)=>a<e&&t>n?0:a<e?-(e-a+s):t>n?t-a>n-e?a+s-e:t-n+o:0,kD=(a,t)=>{var o,l,u;const e=a.ownerDocument;let n=t,s=a;for(;s;){const d=s===e.body,f=d?{top:0,right:((o=window.visualViewport)==null?void 0:o.width)??e.documentElement.clientWidth,bottom:((l=window.visualViewport)==null?void 0:l.height)??e.documentElement.clientHeight,left:0}:CD(s),g=getComputedStyle(s),y=US(n.left,n.right,f.left,f.right,t0(g.scrollPaddingLeft),t0(g.scrollPaddingRight)),m=US(n.top,n.bottom,f.top,f.bottom,t0(g.scrollPaddingTop),t0(g.scrollPaddingBottom));if(y||m)if(d)(u=e.defaultView)==null||u.scrollBy(y,m);else{const{scrollLeft:b,scrollTop:_}=s;m&&(s.scrollTop+=m),y&&(s.scrollLeft+=y);const E=s.scrollLeft-b,x=s.scrollTop-_;n={left:n.left-E,top:n.top-x,right:n.right-E,bottom:n.bottom-x}}s=d||g.position==="fixed"?null:xD(s)}},ND=100,LD=["block","break","cursor","inline","scroll","text"],RD=(a,t,e)=>{const n=new Md;return LD.forEach(s=>{const o=t.query(s);o&&n.register(o)}),a.forEach(s=>{let o=t.query(s);o||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let l=0;for(;o;)if(n.register(o),o="blotName"in o?o.requiredContainer??null:null,l+=1,l>ND){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},kh=La("quill"),e0=new Md;qr.uiClass="ql-ui";const Er=class Er{static debug(t){t===!0&&(t="log"),La.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return aw.get(t)||e0.find(t,e)}static import(t){return this.imports[t]==null&&kh.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,e):Object.keys(t).forEach(s=>{this.register(s,t[s],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&kh.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&e0.register(e),typeof e.register=="function"&&e.register(e0)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=PD(t,e),this.container=this.options.container,this.container==null){kh.error("Invalid Quill container",t);return}this.options.debug&&Er.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",aw.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Pt;const s=Lw.blotName,o=this.options.registry.query(s);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new _D(this.scroll),this.selection=new wD(this.scroll,this.emitter),this.composition=new TD(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Pt.events.EDITOR_CHANGE,l=>{l===Pt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Pt.events.SCROLL_UPDATE,(l,u)=>{const d=this.selection.lastRange,[f]=this.selection.getRange(),g=d&&f?{oldRange:d,newRange:f}:void 0;wr.call(this,()=>this.editor.update(null,u,g),l)}),this.emitter.on(Pt.events.SCROLL_EMBED_UPDATE,(l,u)=>{const d=this.selection.lastRange,[f]=this.selection.getRange(),g=d&&f?{oldRange:d,newRange:f}:void 0;wr.call(this,()=>{const y=new Ft().retain(l.offset(this)).retain({[l.statics.blotName]:u});return this.editor.update(y,[],g)},Er.sources.USER)}),n){const l=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Go(t,e,n),wr.call(this,()=>this.editor.deleteText(t,e),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt.sources.API;return wr.call(this,()=>{const s=this.getSelection(!0);let o=new Ft;if(s==null)return o;if(this.scroll.query(t,Dt.BLOCK))o=this.editor.formatLine(s.index,s.length,{[t]:e});else{if(s.length===0)return this.selection.format(t,e),o;o=this.editor.formatText(s.index,s.length,{[t]:e})}return this.setSelection(s,Pt.sources.SILENT),o},n)}formatLine(t,e,n,s,o){let l;return[t,e,l,o]=Go(t,e,n,s,o),wr.call(this,()=>this.editor.formatLine(t,e,l),o,t,0)}formatText(t,e,n,s,o){let l;return[t,e,l,o]=Go(t,e,n,s,o),wr.call(this,()=>this.editor.formatText(t,e,l),o,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,e):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=Go(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Go(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Go(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Er.sources.API;return wr.call(this,()=>this.editor.insertEmbed(t,e,n),s,t)}insertText(t,e,n,s,o){let l;return[t,,l,o]=Go(t,0,n,s,o),wr.call(this,()=>this.editor.insertText(t,e,l),o,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=Go(t,e,n),wr.call(this,()=>this.editor.removeFormat(t,e),n,t)}scrollRectIntoView(t){kD(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt.sources.API;return wr.call(this,()=>{t=new Ft(t);const n=this.getLength(),s=this.editor.deleteText(0,n),o=this.editor.insertContents(0,t),l=this.editor.deleteText(this.getLength()-1,1);return s.compose(o).compose(l)},e)}setSelection(t,e,n){t==null?this.selection.setRange(null,e||Er.sources.API):([t,e,,n]=Go(t,e,n),this.selection.setRange(new Dd(Math.max(0,t),e),n),n!==Pt.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt.sources.API;const n=new Ft().insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pt.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt.sources.API;return wr.call(this,()=>(t=new Ft(t),this.editor.applyDelta(t)),e,!0)}};lt(Er,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:e0,theme:"default"}),lt(Er,"events",Pt.events),lt(Er,"sources",Pt.sources),lt(Er,"version","2.0.2"),lt(Er,"imports",{delta:Ft,parchment:cD,"core/module":Ra,"core/theme":Fd});let mt=Er;function $S(a){return typeof a=="string"?document.querySelector(a):a}function N1(a){return Object.entries(a??{}).reduce((t,e)=>{let[n,s]=e;return{...t,[n]:s===!0?{}:s}},{})}function GS(a){return Object.fromEntries(Object.entries(a).filter(t=>t[1]!==void 0))}function PD(a,t){const e=$S(a);if(!e)throw new Error("Invalid Quill container");const s=!t.theme||t.theme===mt.DEFAULTS.theme?Fd:mt.import(`themes/${t.theme}`);if(!s)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:o,...l}=mt.DEFAULTS,{modules:u,...d}=s.DEFAULTS;let f=N1(t.modules);f!=null&&f.toolbar&&f.toolbar.constructor!==Object&&(f={...f,toolbar:{container:f.toolbar}});const g=_c({},N1(o),N1(u),f),y={...l,...GS(d),...GS(t)};let m=t.registry;return m?t.formats&&kh.warn('Ignoring "formats" option because "registry" is specified'):m=t.formats?RD(t.formats,y.registry,kh):y.registry,{...y,registry:m,container:e,theme:s,modules:Object.entries(g).reduce((b,_)=>{let[E,x]=_;if(!x)return b;const N=mt.import(`modules/${E}`);return N==null?(kh.error(`Cannot load ${E} module. Are you sure you registered it?`),b):{...b,[E]:_c({},N.DEFAULTS||{},x)}},{}),bounds:$S(y.bounds)}}function wr(a,t,e,n){if(!this.isEnabled()&&t===Pt.sources.USER&&!this.allowReadOnlyEdits)return new Ft;let s=e==null?null:this.getSelection();const o=this.editor.delta,l=a();if(s!=null&&(e===!0&&(e=s.index),n==null?s=VS(s,l,t):n!==0&&(s=VS(s,e,n,t)),this.setSelection(s,Pt.sources.SILENT)),l.length()>0){const u=[Pt.events.TEXT_CHANGE,l,o,t];this.emitter.emit(Pt.events.EDITOR_CHANGE,...u),t!==Pt.sources.SILENT&&this.emitter.emit(...u)}return l}function Go(a,t,e,n,s){let o={};return typeof a.index=="number"&&typeof a.length=="number"?typeof t!="number"?(s=n,n=e,e=t,t=a.length,a=a.index):(t=a.length,a=a.index):typeof t!="number"&&(s=n,n=e,e=t,t=0),typeof e=="object"?(o=e,s=n):typeof e=="string"&&(n!=null?o[e]=n:s=e),s=s||Pt.sources.API,[a,t,o,s]}function VS(a,t,e,n){const s=typeof e=="number"?e:0;if(a==null)return null;let o,l;return t&&typeof t.transformPosition=="function"?[o,l]=[a.index,a.index+a.length].map(u=>t.transformPosition(u,n!==Pt.sources.USER)):[o,l]=[a.index,a.index+a.length].map(u=>u<t||u===t&&n===Pt.sources.USER?u:s>=0?u+s:Math.max(t,u+s)),new Dd(o,l-o)}class Cy extends xy{}function WS(a){return a instanceof Ki||a instanceof Br}function XS(a){return typeof a.updateContent=="function"}class Ah extends Lw{constructor(t,e,n){let{emitter:s}=n;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Pt.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Pt.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Pt.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,s]=this.line(t),[o]=this.line(t+e);if(super.deleteAt(t,e),o!=null&&n!==o&&s>0){if(n instanceof Br||o instanceof Br){this.optimize();return}const l=o.children.head instanceof No?null:o.children.head;n.moveChildren(o,l),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,s){super.formatAt(t,e,n,s),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(n==null||this.scroll.query(e,Dt.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&e.endsWith(`
`)?s.insertAt(0,e.slice(0,-1),n):s.insertAt(0,e,n)}else{const s=this.scroll.create(e,n);this.appendChild(s)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===Dt.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat(new Ft().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const o=n.shift();if(o){const d=o.type==="block"&&(o.delta.length()===0||!this.descendant(Br,t)[0]&&t<this.length()),f=o.type==="block"?o.delta:new Ft().insert({[o.key]:o.value});L1(this,t,f);const g=o.type==="block"?1:0,y=t+f.length()+g;d&&this.insertAt(y-1,`
`);const m=Ks(this.line(t)[0]),b=Js.AttributeMap.diff(m,o.attributes)||{};Object.keys(b).forEach(_=>{this.formatAt(y-1,1,_,b[_])}),t=y}let[l,u]=this.children.find(t);if(n.length&&(l&&(l=l.split(u),u=0),n.forEach(d=>{if(d.type==="block"){const f=this.createBlock(d.attributes,l||void 0);L1(f,0,d.delta)}else{const f=this.create(d.key,d.value);this.insertBefore(f,l||void 0),Object.keys(d.attributes).forEach(g=>{f.format(g,d.attributes[g])})}})),s.type==="block"&&s.delta.length()){const d=l?l.offset(l.scroll)+u:this.length();L1(this,d,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,s]=e;return n instanceof oi?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(WS,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,o,l)=>{let u=[],d=l;return s.children.forEachAt(o,l,(f,g,y)=>{WS(f)?u.push(f):f instanceof xy&&(u=u.concat(n(f,g,d))),d-=y}),u};return n(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(Pt.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=Pt.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const o=this.find(s,!0);return o&&!XS(o)}),t.length>0&&this.emitter.emit(Pt.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Pt.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[s]=this.descendant(o=>o instanceof Br,t);s&&s.statics.blotName===e&&XS(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new Ft;return t.forEach(s=>{const o=s==null?void 0:s.insert;if(o)if(typeof o=="string"){const l=o.split(`
`);l.slice(0,-1).forEach(d=>{n.insert(d,s.attributes),e.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new Ft});const u=l[l.length-1];u&&n.insert(u,s.attributes)}else{const l=Object.keys(o)[0];if(!l)return;this.query(l,Dt.INLINE)?n.push(s):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new Ft,e.push({type:"blockEmbed",key:l,value:o[l],attributes:s.attributes??{}}))}}),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const s={};Object.entries(t).forEach(u=>{let[d,f]=u;this.query(d,Dt.BLOCK&Dt.BLOT)!=null?n=d:s[d]=f});const o=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(o,e||void 0);const l=o.length();return Object.entries(s).forEach(u=>{let[d,f]=u;o.formatAt(0,l,d,f)}),o}}lt(Ah,"blotName","scroll"),lt(Ah,"className","ql-editor"),lt(Ah,"tagName","DIV"),lt(Ah,"defaultChild",Ki),lt(Ah,"allowedChildren",[Ki,Br,Cy]);function L1(a,t,e){e.reduce((n,s)=>{const o=Js.Op.length(s);let l=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const u=s.insert;a.insertAt(n,u);const[d]=a.descendant(oi,n),f=Ks(d);l=Js.AttributeMap.diff(f,l)||{}}else if(typeof s.insert=="object"){const u=Object.keys(s.insert)[0];if(u==null)return n;if(a.insertAt(n,u,s.insert[u]),a.scroll.query(u,Dt.INLINE)!=null){const[f]=a.descendant(oi,n),g=Ks(f);l=Js.AttributeMap.diff(g,l)||{}}}}return Object.keys(l).forEach(u=>{a.formatAt(n,o,u,l[u])}),n+o},t)}const Rw={scope:Dt.BLOCK,whitelist:["right","center","justify"]},ID=new To("align","align",Rw);new Na("align","ql-align",Rw);const OD=new Hl("align","text-align",Rw);class KC extends Hl{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}}new Na("color","ql-color",{scope:Dt.INLINE});const MD=new KC("color","color",{scope:Dt.INLINE});new Na("background","ql-bg",{scope:Dt.INLINE});const DD=new KC("background","background-color",{scope:Dt.INLINE});class jd extends Cy{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${WC(this.code(t,e))}
</pre>`}}class So extends Ki{static register(){mt.register(jd)}}lt(So,"TAB","  ");class QC extends kc{}QC.blotName="code";QC.tagName="CODE";So.blotName="code-block";So.className="ql-code-block";So.tagName="DIV";jd.blotName="code-block-container";jd.className="ql-code-block-container";jd.tagName="DIV";jd.allowedChildren=[So];So.allowedChildren=[xo,No,cp];So.requiredContainer=jd;const Pw={scope:Dt.BLOCK,whitelist:["rtl"]},FD=new To("direction","dir",Pw);new Na("direction","ql-direction",Pw);const BD=new Hl("direction","direction",Pw),ZC={scope:Dt.INLINE,whitelist:["serif","monospace"]};new Na("font","ql-font",ZC);class jD extends Hl{value(t){return super.value(t).replace(/["']/g,"")}}const qD=new jD("font","font-family",ZC);new Na("size","ql-size",{scope:Dt.INLINE,whitelist:["small","large","huge"]});const HD=new Hl("size","font-size",{scope:Dt.INLINE,whitelist:["10px","18px","32px"]}),zD=La("quill:keyboard"),UD=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class ky extends Ra{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!e[n]!==t[n]&&e[n]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=GD(t);if(s==null){zD.warn("Attempted to add invalid keyboard binding",s);return}typeof e=="function"&&(e={handler:e}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(l=>{const u={...s,key:l,...e,...n};this.bindings[u.key]=this.bindings[u.key]||[],this.bindings[u.key].push(u)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const s=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(N=>ky.match(t,N));if(s.length===0)return;const o=mt.find(t.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const l=this.quill.getSelection();if(l==null||!this.quill.hasFocus())return;const[u,d]=this.quill.getLine(l.index),[f,g]=this.quill.getLeaf(l.index),[y,m]=l.length===0?[f,g]:this.quill.getLeaf(l.index+l.length),b=f instanceof V0?f.value().slice(0,g):"",_=y instanceof V0?y.value().slice(m):"",E={collapsed:l.length===0,empty:l.length===0&&u.length()<=1,format:this.quill.getFormat(l),line:u,offset:d,prefix:b,suffix:_,event:t};s.some(N=>{if(N.collapsed!=null&&N.collapsed!==E.collapsed||N.empty!=null&&N.empty!==E.empty||N.offset!=null&&N.offset!==E.offset)return!1;if(Array.isArray(N.format)){if(N.format.every(I=>E.format[I]==null))return!1}else if(typeof N.format=="object"&&!Object.keys(N.format).every(I=>N.format[I]===!0?E.format[I]!=null:N.format[I]===!1?E.format[I]==null:kw(N.format[I],E.format[I])))return!1;return N.prefix!=null&&!N.prefix.test(E.prefix)||N.suffix!=null&&!N.suffix.test(E.suffix)?!1:N.handler.call(this,l,E,N)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[o]=this.quill.getLine(t.index);let l=new Ft().retain(t.index-n).delete(n);if(e.offset===0){const[u]=this.quill.getLine(t.index-1);if(u&&!(u.statics.blotName==="block"&&u.length()<=1)){const f=o.formats(),g=this.quill.getFormat(t.index-1,1);if(s=Js.AttributeMap.diff(f,g)||{},Object.keys(s).length>0){const y=new Ft().retain(t.index+o.length()-2).retain(1,s);l=l.compose(y)}}}this.quill.updateContents(l,mt.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[o]=this.quill.getLine(t.index);let l=new Ft().retain(t.index).delete(n);if(e.offset>=o.length()-1){const[u]=this.quill.getLine(t.index+1);if(u){const d=o.formats(),f=this.quill.getFormat(t.index,1);s=Js.AttributeMap.diff(d,f)||{},Object.keys(s).length>0&&(l=l.retain(u.length()-1).retain(1,s))}}this.quill.updateContents(l,mt.sources.USER),this.quill.focus()}handleDeleteRange(t){Iw({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce((o,l)=>(this.quill.scroll.query(l,Dt.BLOCK)&&!Array.isArray(e.format[l])&&(o[l]=e.format[l]),o),{}),s=new Ft().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,mt.sources.USER),this.quill.setSelection(t.index+1,mt.sources.SILENT),this.quill.focus()}}const $D={bindings:{bold:R1("bold"),italic:R1("italic"),underline:R1("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(a,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",mt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(a,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",mt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(a,t){t.format.indent!=null?this.quill.format("indent","-1",mt.sources.USER):t.format.list!=null&&this.quill.format("list",!1,mt.sources.USER)}},"indent code-block":YS(!0),"outdent code-block":YS(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(a){this.quill.deleteText(a.index-1,1,mt.sources.USER)}},tab:{key:"Tab",handler(a,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new Ft().retain(a.index).delete(a.length).insert("	");return this.quill.updateContents(e,mt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(a.index+1,mt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,mt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(a,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(a.index,a.length,e,mt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(a){const[t,e]=this.quill.getLine(a.index),n={...t.formats(),list:"checked"},s=new Ft().retain(a.index).insert(`
`,n).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,mt.sources.USER),this.quill.setSelection(a.index+1,mt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(a,t){const[e,n]=this.quill.getLine(a.index),s=new Ft().retain(a.index).insert(`
`,t.format).retain(e.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,mt.sources.USER),this.quill.setSelection(a.index+1,mt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(a){const t=this.quill.getModule("table");if(t){const[e,n,s,o]=t.getTable(a),l=VD(e,n,s,o);if(l==null)return;let u=e.offset();if(l<0){const d=new Ft().retain(u).insert(`
`);this.quill.updateContents(d,mt.sources.USER),this.quill.setSelection(a.index+1,a.length,mt.sources.SILENT)}else if(l>0){u+=e.length();const d=new Ft().retain(u).insert(`
`);this.quill.updateContents(d,mt.sources.USER),this.quill.setSelection(u,mt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(a,t){const{event:e,line:n}=t,s=n.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(s-1,mt.sources.USER):this.quill.setSelection(s+n.length(),mt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(a,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[n,s]=this.quill.getLine(a.index);if(s>e)return!0;let o;switch(t.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(a.index," ",mt.sources.USER),this.quill.history.cutoff();const l=new Ft().retain(a.index-s).delete(e+1).retain(n.length()-2-s).retain(1,{list:o});return this.quill.updateContents(l,mt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(a.index-e,mt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(a){const[t,e]=this.quill.getLine(a.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const o=new Ft().retain(a.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,mt.sources.USER),this.quill.setSelection(a.index-1,mt.sources.SILENT),!1}return!0}},"embed left":n0("ArrowLeft",!1),"embed left shift":n0("ArrowLeft",!0),"embed right":n0("ArrowRight",!1),"embed right shift":n0("ArrowRight",!0),"table down":KS(!1),"table up":KS(!0)}};ky.DEFAULTS=$D;function YS(a){return{key:"Tab",shiftKey:!a,format:{"code-block":!0},handler(t,e){let{event:n}=e;const s=this.quill.scroll.query("code-block"),{TAB:o}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,o,mt.sources.USER),this.quill.setSelection(t.index+o.length,mt.sources.SILENT);return}const l=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:u,length:d}=t;l.forEach((f,g)=>{a?(f.insertAt(0,o),g===0?u+=o.length:d+=o.length):f.domNode.textContent.startsWith(o)&&(f.deleteAt(0,o.length),g===0?u-=o.length:d-=o.length)}),this.quill.update(mt.sources.USER),this.quill.setSelection(u,d,mt.sources.SILENT)}}}function n0(a,t){return{key:a,shiftKey:t,altKey:null,[a==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:s}=n;a==="ArrowRight"&&(s+=n.length+1);const[o]=this.quill.getLeaf(s);return o instanceof nr?(a==="ArrowLeft"?t?this.quill.setSelection(n.index-1,n.length+1,mt.sources.USER):this.quill.setSelection(n.index-1,mt.sources.USER):t?this.quill.setSelection(n.index,n.length+1,mt.sources.USER):this.quill.setSelection(n.index+n.length+1,mt.sources.USER),!1):!0}}}function R1(a){return{key:a[0],shortKey:!0,handler(t,e){this.quill.format(a,!e.format[a],mt.sources.USER)}}}function KS(a){return{key:a?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const n=a?"prev":"next",s=e.line,o=s.parent[n];if(o!=null){if(o.statics.blotName==="table-row"){let l=o.children.head,u=s;for(;u.prev!=null;)u=u.prev,l=l.next;const d=l.offset(this.quill.scroll)+Math.min(e.offset,l.length()-1);this.quill.setSelection(d,0,mt.sources.USER)}}else{const l=s.table()[n];l!=null&&(a?this.quill.setSelection(l.offset(this.quill.scroll)+l.length()-1,0,mt.sources.USER):this.quill.setSelection(l.offset(this.quill.scroll),0,mt.sources.USER))}return!1}}}function GD(a){if(typeof a=="string"||typeof a=="number")a={key:a};else if(typeof a=="object")a=xh(a);else return null;return a.shortKey&&(a[UD]=a.shortKey,delete a.shortKey),a}function Iw(a){let{quill:t,range:e}=a;const n=t.getLines(e);let s={};if(n.length>1){const o=n[0].formats(),l=n[n.length-1].formats();s=Js.AttributeMap.diff(l,o)||{}}t.deleteText(e,mt.sources.USER),Object.keys(s).length>0&&t.formatLine(e.index,1,s,mt.sources.USER),t.setSelection(e.index,mt.sources.SILENT)}function VD(a,t,e,n){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?n===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const WD=/font-weight:\s*normal/,XD=["P","OL","UL"],QS=a=>a&&XD.includes(a.tagName),YD=a=>{Array.from(a.querySelectorAll("br")).filter(t=>QS(t.previousElementSibling)&&QS(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},KD=a=>{Array.from(a.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(WD)}).forEach(t=>{var n;const e=a.createDocumentFragment();e.append(...t.childNodes),(n=t.parentNode)==null||n.replaceChild(e,t)})};function QD(a){a.querySelector('[id^="docs-internal-guid-"]')&&(KD(a),YD(a))}const ZD=/\bmso-list:[^;]*ignore/i,JD=/\bmso-list:[^;]*\bl(\d+)/i,tF=/\bmso-list:[^;]*\blevel(\d+)/i,eF=(a,t)=>{const e=a.getAttribute("style"),n=e==null?void 0:e.match(JD);if(!n)return null;const s=Number(n[1]),o=e==null?void 0:e.match(tF),l=o?Number(o[1]):1,u=new RegExp(`@list l${s}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),d=t.match(u),f=d&&d[1]==="bullet"?"bullet":"ordered";return{id:s,indent:l,type:f,element:a}},nF=a=>{var l,u;const t=Array.from(a.querySelectorAll("[style*=mso-list]")),e=[],n=[];t.forEach(d=>{(d.getAttribute("style")||"").match(ZD)?e.push(d):n.push(d)}),e.forEach(d=>{var f;return(f=d.parentNode)==null?void 0:f.removeChild(d)});const s=a.documentElement.innerHTML,o=n.map(d=>eF(d,s)).filter(d=>d);for(;o.length;){const d=[];let f=o.shift();for(;f;)d.push(f),f=o.length&&((l=o[0])==null?void 0:l.element)===f.element.nextElementSibling&&o[0].id===f.id?o.shift():null;const g=document.createElement("ul");d.forEach(b=>{const _=document.createElement("li");_.setAttribute("data-list",b.type),b.indent>1&&_.setAttribute("class",`ql-indent-${b.indent-1}`),_.innerHTML=b.element.innerHTML,g.appendChild(_)});const y=(u=d[0])==null?void 0:u.element,{parentNode:m}=y??{};y&&(m==null||m.replaceChild(g,y)),d.slice(1).forEach(b=>{let{element:_}=b;m==null||m.removeChild(_)})}};function iF(a){a.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&nF(a)}const sF=[iF,QD],rF=a=>{a.documentElement&&sF.forEach(t=>{t(a)})},oF=La("quill:clipboard"),aF=[[Node.TEXT_NODE,bF],[Node.TEXT_NODE,JS],["br",dF],[Node.ELEMENT_NODE,JS],[Node.ELEMENT_NODE,hF],[Node.ELEMENT_NODE,cF],[Node.ELEMENT_NODE,yF],["li",gF],["ol, ul",mF],["pre",fF],["tr",vF],["b",P1("bold")],["i",P1("italic")],["strike",P1("strike")],["style",pF]],lF=[ID,FD].reduce((a,t)=>(a[t.keyName]=t,a),{}),ZS=[OD,DD,MD,BD,qD,HD].reduce((a,t)=>(a[t.keyName]=t,a),{});class JC extends Ra{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],aF.concat(this.options.matchers??[]).forEach(n=>{let[s,o]=n;this.addMatcher(s,o)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[So.blotName])return new Ft().insert(n||"",{[So.blotName]:s[So.blotName]});if(!e)return new Ft().insert(n||"",s);const o=this.convertHTML(e);return Ug(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||s.table)?o.compose(new Ft().retain(o.length()-1).delete(1)):o}normalizeHTML(t){rF(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,s=new WeakMap,[o,l]=this.prepareMatching(n,s);return ek(this.quill.scroll,n,o,l,s)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mt.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,e),this.quill.setSelection(0,mt.sources.SILENT)}else{const s=this.convert({html:e,text:""});this.quill.updateContents(new Ft().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),mt.sources.SILENT)}}onCaptureCopy(t){var l,u;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(n==null)return;const{html:s,text:o}=this.onCopy(n,e);(l=t.clipboardData)==null||l.setData("text/plain",o),(u=t.clipboardData)==null||u.setData("text/html",s),e&&Iw({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var l,u,d,f,g;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const n=(l=t.clipboardData)==null?void 0:l.getData("text/html");let s=(u=t.clipboardData)==null?void 0:u.getData("text/plain");if(!n&&!s){const y=(d=t.clipboardData)==null?void 0:d.getData("text/uri-list");y&&(s=this.normalizeURIList(y))}const o=Array.from(((f=t.clipboardData)==null?void 0:f.files)||[]);if(!n&&o.length>0){this.quill.uploader.upload(e,o);return}if(n&&o.length>0){const y=new DOMParser().parseFromString(n,"text/html");if(y.body.childElementCount===1&&((g=y.body.firstElementChild)==null?void 0:g.tagName)==="IMG"){this.quill.uploader.upload(e,o);return}}this.onPaste(e,{html:n,text:s})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:s}=e;const o=this.quill.getFormat(t.index),l=this.convert({text:n,html:s},o);oF.log("onPaste",l,{text:n,html:s});const u=new Ft().retain(t.index).delete(t.length).concat(l);this.quill.updateContents(u,mt.sources.USER),this.quill.setSelection(u.length()-t.length,mt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],s=[];return this.matchers.forEach(o=>{const[l,u]=o;switch(l){case Node.TEXT_NODE:s.push(u);break;case Node.ELEMENT_NODE:n.push(u);break;default:Array.from(t.querySelectorAll(l)).forEach(d=>{if(e.has(d)){const f=e.get(d);f==null||f.push(u)}else e.set(d,[u])});break}}),[n,s]}}lt(JC,"DEFAULTS",{matchers:[]});function Oc(a,t,e,n){return n.query(t)?a.reduce((s,o)=>{if(!o.insert)return s;if(o.attributes&&o.attributes[t])return s.push(o);const l=e?{[t]:e}:{};return s.insert(o.insert,{...l,...o.attributes})},new Ft):a}function Ug(a,t){let e="";for(let n=a.ops.length-1;n>=0&&e.length<t.length;--n){const s=a.ops[n];if(typeof s.insert!="string")break;e=s.insert+e}return e.slice(-1*t.length)===t}function Il(a,t){if(!(a instanceof Element))return!1;const e=t.query(a);return e&&e.prototype instanceof nr?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(a.tagName.toLowerCase())}function uF(a,t){return a.previousElementSibling&&a.nextElementSibling&&!Il(a.previousElementSibling,t)&&!Il(a.nextElementSibling,t)}const i0=new WeakMap;function tk(a){return a==null?!1:(i0.has(a)||(a.tagName==="PRE"?i0.set(a,!0):i0.set(a,tk(a.parentNode))),i0.get(a))}function ek(a,t,e,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((o,l)=>l(t,o,a),new Ft):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((o,l)=>{let u=ek(a,l,e,n,s);return l.nodeType===t.ELEMENT_NODE&&(u=e.reduce((d,f)=>f(l,d,a),u),u=(s.get(l)||[]).reduce((d,f)=>f(l,d,a),u)),o.concat(u)},new Ft):new Ft}function P1(a){return(t,e,n)=>Oc(e,a,!0,n)}function cF(a,t,e){const n=To.keys(a),s=Na.keys(a),o=Hl.keys(a),l={};return n.concat(s).concat(o).forEach(u=>{let d=e.query(u,Dt.ATTRIBUTE);d!=null&&(l[d.attrName]=d.value(a),l[d.attrName])||(d=lF[u],d!=null&&(d.attrName===u||d.keyName===u)&&(l[d.attrName]=d.value(a)||void 0),d=ZS[u],d!=null&&(d.attrName===u||d.keyName===u)&&(d=ZS[u],l[d.attrName]=d.value(a)||void 0))}),Object.entries(l).reduce((u,d)=>{let[f,g]=d;return Oc(u,f,g,e)},t)}function hF(a,t,e){const n=e.query(a);if(n==null)return t;if(n.prototype instanceof nr){const s={},o=n.value(a);if(o!=null)return s[n.blotName]=o,new Ft().insert(s,n.formats(a,e))}else if(n.prototype instanceof up&&!Ug(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return Oc(t,n.blotName,n.formats(a,e),e);return t}function dF(a,t){return Ug(t,`
`)||t.insert(`
`),t}function fF(a,t,e){const n=e.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(a,e):!0;return Oc(t,"code-block",s,e)}function pF(){return new Ft}function gF(a,t,e){const n=e.query(a);if(n==null||n.blotName!=="list"||!Ug(t,`
`))return t;let s=-1,o=a.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(s+=1),o=o.parentNode;return s<=0?t:t.reduce((l,u)=>u.insert?u.attributes&&typeof u.attributes.indent=="number"?l.push(u):l.insert(u.insert,{indent:s,...u.attributes||{}}):l,new Ft)}function mF(a,t,e){const n=a;let s=n.tagName==="OL"?"ordered":"bullet";const o=n.getAttribute("data-checked");return o&&(s=o==="true"?"checked":"unchecked"),Oc(t,"list",s,e)}function JS(a,t,e){if(!Ug(t,`
`)){if(Il(a,e)&&(a.childNodes.length>0||a instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&a.nextSibling){let n=a.nextSibling;for(;n!=null;){if(Il(n,e))return t.insert(`
`);const s=e.query(n);if(s&&s.prototype instanceof Br)return t.insert(`
`);n=n.firstChild}}}return t}function yF(a,t,e){var o;const n={},s=a.style||{};return s.fontStyle==="italic"&&(n.italic=!0),s.textDecoration==="underline"&&(n.underline=!0),s.textDecoration==="line-through"&&(n.strike=!0),((o=s.fontWeight)!=null&&o.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(n.bold=!0),t=Object.entries(n).reduce((l,u)=>{let[d,f]=u;return Oc(l,d,f,e)},t),parseFloat(s.textIndent||0)>0?new Ft().insert("	").concat(t):t}function vF(a,t,e){var s,o;const n=((s=a.parentElement)==null?void 0:s.tagName)==="TABLE"?a.parentElement:(o=a.parentElement)==null?void 0:o.parentElement;if(n!=null){const u=Array.from(n.querySelectorAll("tr")).indexOf(a)+1;return Oc(t,"table",u,e)}return t}function bF(a,t,e){var s;let n=a.data;if(((s=a.parentElement)==null?void 0:s.tagName)==="O:P")return t.insert(n.trim());if(!tk(a)){if(n.trim().length===0&&n.includes(`
`)&&!uF(a,e))return t;const o=(l,u)=>{const d=u.replace(/[^\u00a0]/g,"");return d.length<1&&l?" ":d};n=n.replace(/\r\n/g," ").replace(/\n/g," "),n=n.replace(/\s\s+/g,o.bind(o,!0)),(a.previousSibling==null&&a.parentElement!=null&&Il(a.parentElement,e)||a.previousSibling instanceof Element&&Il(a.previousSibling,e))&&(n=n.replace(/^\s+/,o.bind(o,!1))),(a.nextSibling==null&&a.parentElement!=null&&Il(a.parentElement,e)||a.nextSibling instanceof Element&&Il(a.nextSibling,e))&&(n=n.replace(/\s+$/,o.bind(o,!1)))}return t.insert(n)}class nk extends Ra{constructor(e,n){super(e,n);lt(this,"lastRecorded",0);lt(this,"ignoreChange",!1);lt(this,"stack",{undo:[],redo:[]});lt(this,"currentRange",null);this.quill.on(mt.events.EDITOR_CHANGE,(s,o,l,u)=>{s===mt.events.SELECTION_CHANGE?o&&u!==mt.sources.SILENT&&(this.currentRange=o):s===mt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===mt.sources.USER?this.record(o,l):this.transform(o)),this.currentRange=cw(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const o=this.quill.getContents(),l=s.delta.invert(o);this.stack[n].push({delta:l,range:cw(s.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,mt.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),o=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(s=s.compose(u.delta),o=u.range)}else this.lastRecorded=l;s.length()!==0&&(this.stack.undo.push({delta:s,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){tT(this.stack.undo,e),tT(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,mt.sources.USER);else{const n=AF(this.quill.scroll,e.delta);this.quill.setSelection(n,mt.sources.USER)}}}lt(nk,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function tT(a,t){let e=t;for(let n=a.length-1;n>=0;n-=1){const s=a[n];a[n]={delta:e.transform(s.delta,!0),range:s.range&&cw(s.range,e)},e=s.delta.transform(e),a[n].delta.length()===0&&a.splice(n,1)}}function wF(a,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(n=>a.query(n,Dt.BLOCK)!=null):!1}function AF(a,t){const e=t.reduce((s,o)=>s+(o.delete||0),0);let n=t.length()-e;return wF(a,t)&&(n-=1),n}function cw(a,t){if(!a)return a;const e=t.transformPosition(a.index),n=t.transformPosition(a.index+a.length);return{index:e,length:n-e}}class ik extends Ra{constructor(t,e){super(t,e),t.root.addEventListener("drop",n=>{var l;n.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(n.clientX,n.clientY);s=document.createRange(),s.setStart(u.offsetNode,u.offset),s.setEnd(u.offsetNode,u.offset)}const o=s&&t.selection.normalizeNative(s);if(o){const u=t.selection.normalizedToRange(o);(l=n.dataTransfer)!=null&&l.files&&this.upload(u,n.dataTransfer.files)}})}upload(t,e){const n=[];Array.from(e).forEach(s=>{var o;s&&((o=this.options.mimetypes)!=null&&o.includes(s.type))&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}ik.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(a,t){if(!this.quill.scroll.query("image"))return;const e=t.map(n=>new Promise(s=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.readAsDataURL(n)}));Promise.all(e).then(n=>{const s=n.reduce((o,l)=>o.insert({image:l}),new Ft().retain(a.index).delete(a.length));this.quill.updateContents(s,Pt.sources.USER),this.quill.setSelection(a.index+n.length,Pt.sources.SILENT)})}};const _F=["insertText","insertReplacementText"];class EF extends Ra{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(mt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Iw({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Ft().retain(t.index).insert(e,n),mt.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,mt.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!_F.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const n=SF(t);if(n==null)return;const s=this.quill.selection.normalizeNative(e),o=s?this.quill.selection.normalizedToRange(s):null;o&&this.replaceText(o,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function SF(a){var t;return typeof a.data=="string"?a.data:(t=a.dataTransfer)!=null&&t.types.includes("text/plain")?a.dataTransfer.getData("text/plain"):null}const TF=/Mac/i.test(navigator.platform),xF=100,CF=a=>!!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="Home"||TF&&a.key==="a"&&a.ctrlKey===!0);class kF extends Ra{constructor(e,n){super(e,n);lt(this,"isListening",!1);lt(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:o}=n;if(!(s instanceof qr)||!s.uiNode)return!0;const l=getComputedStyle(s.domNode).direction==="rtl";return l&&o.key!=="ArrowRight"||!l&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(o.shiftKey?1:0),mt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&CF(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+xF,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof qr)||!s.uiNode)return;const o=document.createRange();o.setStartAfter(s.uiNode),o.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(o)}}mt.register({"blots/block":Ki,"blots/block/embed":Br,"blots/break":No,"blots/container":Cy,"blots/cursor":cp,"blots/embed":YC,"blots/inline":kc,"blots/scroll":Ah,"blots/text":xo,"modules/clipboard":JC,"modules/history":nk,"modules/keyboard":ky,"modules/uploader":ik,"modules/input":EF,"modules/uiNode":kF});const NF='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let eT=0;function nT(a,t){a.setAttribute(t,`${a.getAttribute(t)!=="true"}`)}class Ow{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),nT(this.label,"aria-expanded"),nT(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=NF,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${eT}`,eT+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const n=this.buildItem(e);t.appendChild(n),e.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class LF extends Ow{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class RF extends Ow{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=e[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const PF=a=>{const{overflowY:t}=getComputedStyle(a,null);return t!=="visible"&&t!=="clip"};class IF{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,PF(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let l=0;if(o.right>s.right&&(l=s.right-o.right,this.root.style.left=`${e+l}px`),o.left<s.left&&(l=s.left-o.left,this.root.style.left=`${e+l}px`),o.bottom>s.bottom){const u=o.bottom-o.top,d=t.bottom-t.top+u;this.root.style.top=`${n-d}px`,this.root.classList.add("ql-flip")}return l}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const OF=[!1,"center","right","justify"],MF=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],DF=[!1,"serif","monospace"],FF=["1","2","3",!1],BF=["small",!1,"large","huge"];class Mw extends Fd{constructor(t,e){super(t,e);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(s.target)||o.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),e[o]!=null))if(o==="direction")n.innerHTML=e[o][""]+e[o].rtl;else if(typeof e[o]=="string")n.innerHTML=e[o];else{const l=n.value||"";l!=null&&e[o][l]&&(n.innerHTML=e[o][l])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Of(s,OF),typeof e.align=="object"))return new RF(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const o=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Of(s,MF,o==="background"?"#ffffff":"#000000"),new LF(s,e[o])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Of(s,DF):s.classList.contains("ql-header")?Of(s,FF):s.classList.contains("ql-size")&&Of(s,BF)),new Ow(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(Pt.events.EDITOR_CHANGE,n)}}Mw.DEFAULTS=_c({},Fd.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let a=this.container.querySelector("input.ql-image[type=file]");a==null&&(a=document.createElement("input"),a.setAttribute("type","file"),a.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),a.classList.add("ql-image"),a.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,a.files),a.value=""}),this.container.appendChild(a)),a.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class jF extends IF{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Pt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Pt.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=qF(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Pt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",Pt.sources.USER),this.quill.setSelection(n+2,Pt.sources.USER)}break}}this.textbox.value="",this.hide()}}function qF(a){let t=a.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||a.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=a.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:a}function Of(a,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),a.appendChild(s)})}class yu extends kc{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return HF(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}lt(yu,"blotName","link"),lt(yu,"tagName","A"),lt(yu,"SANITIZED_URL","about:blank"),lt(yu,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function HF(a,t){const e=document.createElement("a");e.href=a;const n=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(n)>-1}const zF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',UF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',$F='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',GF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',VF='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',WF='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',XF='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',YF='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',iT='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',KF='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',QF='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',ZF='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',JF='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',t3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',e3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',n3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',i3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',s3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',r3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',o3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',a3='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',l3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',u3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',c3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',h3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',d3='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',f3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',p3='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',g3='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',m3='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',y3='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',v3='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',b3='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',sT={align:{"":zF,center:UF,right:$F,justify:GF},background:VF,blockquote:WF,bold:XF,clean:YF,code:iT,"code-block":iT,color:KF,direction:{"":QF,rtl:ZF},formula:JF,header:{1:t3,2:e3,3:n3,4:i3,5:s3,6:r3},italic:o3,image:a3,indent:{"+1":l3,"-1":u3},link:c3,list:{bullet:h3,check:d3,ordered:f3},script:{sub:p3,super:g3},strike:m3,table:y3,underline:v3,video:b3},w3=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class sk extends jF{constructor(){super(...arguments);lt(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,Pt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Pt.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===Pt.sources.USER){const[o,l]=this.quill.scroll.descendant(yu,e.index);if(o!=null){this.linkRange=new Dd(e.index-l,o.length());const u=yu.formats(o.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}lt(sk,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class rk extends Mw{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=w3),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),sT),this.buildPickers(t.container.querySelectorAll("select"),sT),this.tooltip=new sk(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,n)=>{t.handlers.link.call(t,!n.format.link)}))}}rk.DEFAULTS=_c({},Mw.DEFAULTS,{modules:{toolbar:{handlers:{link(a){if(a){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,mt.sources.USER)}}}}});const rT=La("quill:toolbar");class Dw extends Ra{constructor(t,e){var n,s;if(super(t,e),Array.isArray(this.options.container)){const o=document.createElement("div");o.setAttribute("role","toolbar"),A3(o,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(o,t.container),this.container=o}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){rT.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(o=>{var u;const l=(u=this.options.handlers)==null?void 0:u[o];l&&this.addHandler(o,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(o=>{this.attach(o)}),this.quill.on(mt.events.EDITOR_CHANGE,()=>{const[o]=this.quill.selection.getRange();this.update(o)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){rT.warn("ignoring attaching to nonexistent format",e,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let o;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const u=t.options[t.selectedIndex];u.hasAttribute("selected")?o=!1:o=u.value||!1}else t.classList.contains("ql-active")?o=!1:o=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[l]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,o);else if(this.quill.scroll.query(e).prototype instanceof nr){if(o=prompt(`Enter ${e}`),!o)return;this.quill.updateContents(new Ft().retain(l.index).delete(l.length).insert({[e]:o}),mt.sources.USER)}else this.quill.format(e,o,mt.sources.USER);this.update(l)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,o]=n;if(o.tagName==="SELECT"){let l=null;if(t==null)l=null;else if(e[s]==null)l=o.querySelector("option[selected]");else if(!Array.isArray(e[s])){let u=e[s];typeof u=="string"&&(u=u.replace(/"/g,'\\"')),l=o.querySelector(`option[value="${u}"]`)}l==null?(o.value="",o.selectedIndex=-1):l.selected=!0}else if(t==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const l=e[s],u=l===o.getAttribute("value")||l!=null&&l.toString()===o.getAttribute("value")||l==null&&!o.getAttribute("value");o.classList.toggle("ql-active",u),o.setAttribute("aria-pressed",u.toString())}else{const l=e[s]!=null;o.classList.toggle("ql-active",l),o.setAttribute("aria-pressed",l.toString())}})}}Dw.DEFAULTS={};function oT(a,t,e){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),e!=null?(n.value=e,n.setAttribute("aria-label",`${t}: ${e}`)):n.setAttribute("aria-label",t),a.appendChild(n)}function A3(a,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach(s=>{if(typeof s=="string")oT(n,s);else{const o=Object.keys(s)[0],l=s[o];Array.isArray(l)?_3(n,o,l):oT(n,o,l)}}),a.appendChild(n)})}function _3(a,t,e){const n=document.createElement("select");n.classList.add(`ql-${t}`),e.forEach(s=>{const o=document.createElement("option");s!==!1?o.setAttribute("value",String(s)):o.setAttribute("selected","selected"),n.appendChild(o)}),a.appendChild(n)}Dw.DEFAULTS={container:null,handlers:{clean(){const a=this.quill.getSelection();if(a!=null)if(a.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,Dt.INLINE)!=null&&this.quill.format(e,!1,mt.sources.USER)})}else this.quill.removeFormat(a.index,a.length,mt.sources.USER)},direction(a){const{align:t}=this.quill.getFormat();a==="rtl"&&t==null?this.quill.format("align","right",mt.sources.USER):!a&&t==="right"&&this.quill.format("align",!1,mt.sources.USER),this.quill.format("direction",a,mt.sources.USER)},indent(a){const t=this.quill.getSelection(),e=this.quill.getFormat(t),n=parseInt(e.indent||0,10);if(a==="+1"||a==="-1"){let s=a==="+1"?1:-1;e.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,mt.sources.USER)}},link(a){a===!0&&(a=prompt("Enter link URL:")),this.quill.format("link",a,mt.sources.USER)},list(a){const t=this.quill.getSelection(),e=this.quill.getFormat(t);a==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,mt.sources.USER):this.quill.format("list","unchecked",mt.sources.USER):this.quill.format("list",a,mt.sources.USER)}}};class W0 extends kc{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}lt(W0,"blotName","bold"),lt(W0,"tagName",["STRONG","B"]);class hw extends W0{}lt(hw,"blotName","italic"),lt(hw,"tagName",["EM","I"]);class $g extends Cy{}$g.blotName="list-container";$g.tagName="OL";class Gg extends Ki{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){mt.register($g)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),s=o=>{if(!t.isEnabled())return;const l=this.statics.formats(e,t);l==="checked"?(this.format("list","unchecked"),o.preventDefault()):l==="unchecked"&&(this.format("list","checked"),o.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}Gg.blotName="list";Gg.tagName="LI";$g.allowedChildren=[Gg];Gg.requiredContainer=$g;function E3(){const a=xn.useRef(null),t=xn.useRef(null),e=xn.useRef(),n=xn.useRef(null),s=xn.useRef(null),o=xn.useRef(null),l=xn.useRef(null),u=xn.useRef(),[d,f]=xn.useState(1),[g,y]=xn.useState(1),[m,b]=xn.useState([]),[_,E]=xn.useState(null),[x,N]=xn.useState("edit"),[I,B]=xn.useState("");let j;function T(D){D.preventDefault()}function P(D){if(D.preventDefault(),D.dataTransfer.items&&D.dataTransfer.items[0].kind==="file"){let U=D.dataTransfer.items[0].getAsFile();console.log(U),U.type==="application/pdf"&&M(U)}}function M(D){console.log("drop pdf",D);const U=new FileReader;U.addEventListener("load",nt,!1),U.readAsArrayBuffer(D)}function W(D){console.log("set_pdf",D.target.files);const U=D.target.files[0];if(console.log(U),U&&U.type==="application/pdf"){const st=new FileReader;st.addEventListener("load",nt,!1),U&&st.readAsArrayBuffer(U)}}async function nt(D){n.current.showModal();let U=D.target.result;E(U),await e.current.load_new_pdf(U),console.log("total pages",e.current.total_pages);let st=e.current.total_pages;y(st),b([...Array(st)])}function ht(){N("edit"),e.current.jump_to_page(1),X(1),n.current.showModal()}function O(){e.current.prev_page(),X(e.current.page_num)}function et(){e.current.next_page(),X(e.current.page_num)}function q(){e.current.jump_to_page(s.current.value),X(e.current.page_num)}function X(D){console.log("get_page",D,x),f(D);let U=D-1;if(x==="edit")if(m[U]!=null){let st=u.current.clipboard.convert({html:m[U].note});u.current.setContents(st)}else u.current.setContents("")}function rt(){n.current.close()}function V(){e.current.page_zoom_in()}function K(){e.current.page_zoom_out()}function Z(){let D=parseInt(d)-1,U=u.current.getSemanticHTML(),st=e.current.export_page();console.log(D,U);let gt=m.map((vt,yt)=>yt===D?{note:U,thumb:st}:vt);console.log(gt),b(gt);let at=document.querySelector("#save-message");at.classList.add("show"),clearTimeout(j),j=setTimeout(()=>{at.style.setProperty("opacity",0)},2e3),at.addEventListener("transitionend",()=>{at.classList.remove("show"),at.style.setProperty("opacity",1)},{once:!0})}function ot(D){N("preview",D+1),n.current.showModal(),e.current.jump_to_page(D+1),X(D+1)}function J(){l.current.close()}return xn.useEffect(()=>{console.log("setPreviewNote",d,x),x==="preview"&&m[d-1]!=null&&(l.current.showModal(),B(m[d-1].note))},[x,d,m]),xn.useEffect(()=>{e.current==null&&(e.current=new WR(t.current))},[e]),xn.useEffect(()=>{u.current==null&&(console.log("setup quill"),mt.register({"modules/toolbar":Dw,"themes/snow":rk,"formats/bold":W0,"formats/italic":hw,"formats/list":Gg,"formats/link":yu}),u.current=new mt(o.current,{theme:"snow",modules:{toolbar:[["bold","italic"],["link"],[{list:"ordered"},{list:"bullet"}]]}}))},[o]),ne.jsxs(ne.Fragment,{children:[_?ne.jsxs("section",{children:[ne.jsx("div",{id:"edit-section",children:ne.jsx("button",{id:"edit-button",onClick:ht,children:"Edit PDF"})}),ne.jsx("div",{id:"notes-added",children:m.map((D,U)=>D&&D.note?ne.jsx("div",{children:ne.jsx("img",{src:D.thumb,alt:"Page "+(U+1),title:"Page "+(U+1),onClick:()=>ot(U)})},U):null)})]}):ne.jsxs("section",{children:[ne.jsxs("div",{id:"drop-zone",onDragOver:T,onDrop:P,children:[ne.jsxs("strong",{children:["Drag and Drop PDF Here",ne.jsx("br",{}),"or"]}),ne.jsx("label",{className:"select-button",htmlFor:"pdf-file",children:"Select PDF"})]}),ne.jsx("input",{type:"file",id:"pdf-file",ref:a,accept:"application/pdf",onChange:W})]}),ne.jsx("dialog",{id:"pdf-dialog",ref:n,children:ne.jsxs("section",{className:"content",children:[ne.jsxs("header",{children:[ne.jsx("h2",{children:x==="edit"?"Edit PDF":"Preview PDF Note"}),ne.jsx("button",{onClick:K,children:"-"}),ne.jsx("button",{onClick:V,children:"+"})]}),ne.jsx("div",{id:"preview-holder",children:ne.jsx("canvas",{id:"pdf-preview",ref:t})}),ne.jsx("div",{id:"text-editor",style:{display:x==="edit"?"block":"none"},children:ne.jsx("div",{id:"notes",ref:o})}),ne.jsxs("div",{id:"pdf-controls",children:[ne.jsx("button",{onClick:rt,children:"Close PDF"}),ne.jsx("button",{style:{display:x==="edit"?"inline-block":"none"},onClick:Z,children:"Save Notes"}),ne.jsx("button",{id:"prev",onClick:O,disabled:d===1,title:"Previous",children:"<"}),ne.jsx("input",{type:"number",onChange:q,ref:s,value:d,min:1,max:g,title:"Page"}),ne.jsxs("span",{children:["of ",g]}),ne.jsx("button",{id:"next",onClick:et,disabled:d===g,title:"Next",children:">"}),ne.jsx("div",{id:"save-message",children:"Note Saved"})]})]})}),ne.jsx("dialog",{id:"note-message",ref:l,children:ne.jsxs("div",{children:[I&&ne.jsx("section",{children:uP(NP.sanitize(I))}),ne.jsx("button",{onClick:J,children:"Close"})]})})]})}const S3=$N.createRoot(document.getElementById("root"));S3.render(ne.jsx(FN.StrictMode,{children:ne.jsx(E3,{})}));
